import{a as y,r as s,e as n,A as ne,P as b,_ as Wt,$ as $t,s as Fr,L as $a,j as re,f as Br}from"./index-78b59a2c.js";import{dR as jr,dS as Ur,M as q,cA as Da,Q as Ee,dT as Vr,u as A,ch as me,_ as h,dU as Gr,dV as zr,dW as Hr,A as ot,dX as Yr,X as ze,cs as Pe,N,da as Wr,Z as qr,$ as Kr,cj as ka,dY as Xr,P as Jr,a2 as Zr,a0 as Qr,cb as K,ce as G,cd as Ma,dZ as en,d_ as qt,d$ as tn,cE as Dt,cx as Pa,cy as an,a6 as ve,ab as z,a7 as xe,a8 as Le,by as je,bF as rn,bE as nn,bJ as sn,G as se,H as ce,K as Na,E as kt,cP as on,O as ln,cO as Kt,bt as cn,W as dn,V as un,a9 as mn,cm as pn,cl as Ne,e as he,ck as hn,bz as Mt,I as de,h as gn,J as Ye,x as fn,T as bn,e0 as yn,r as En,l as vn,cU as wn,b_ as Sn,c0 as Fa,c4 as Ba,c5 as Tn,a3 as We,a4 as _n,c6 as Cn,d4 as In,c9 as xn,c7 as Ln,c8 as On,c_ as Pt,a5 as An,cz as Rn,cM as $n,ci as Dn,B as ja,p as Ua,co as kn,b as Ue,L as Mn,bx as Nt,cQ as Va,de as Ga,y as Pn,df as De,d9 as Nn,j as Fn,db as Bn,c as jn,d as Un,cD as Vn,cB as Gn,dt as zn,e1 as Hn,dN as Yn,a1 as Wn,dO as qn,dP as Kn,dQ as Xn,dE as Jn}from"./useIndexedDBMedia-68e7e3f1.js";async function za(t){return await jr()?Ur("screen_view",{screen_name:t}):Promise.resolve()}const Zn=y.div.withConfig({displayName:"components__DropDownContainer",componentId:"sc-1i3s2c5-0"})(["display:flex;flex-direction:column;width:100%;"]),Qn=y(q.Label).withConfig({displayName:"components__Label",componentId:"sc-1i3s2c5-1"})(["margin-bottom:8px;color:",";"],t=>{let{theme:e,disabled:a}=t;return e.colors.fg[a?"disable":"primary"]}),es=y(q.Paragraph).withConfig({displayName:"components__Hint",componentId:"sc-1i3s2c5-2"})(["margin-top:12px;padding-left:2px;color:",";"],t=>{let{theme:e,hasError:a}=t;return e.colors.fg[a?"negative":"tertiary"]});function ts(t){let{handleSearchValueChange:e,selectedValue:a,searchValue:r,options:i}=t;const l=Da("assertive"),[o,d]=s.useState(!1),c=Ee(d,100),[p,u]=s.useState(!1),m=Ee(u,300,{leading:!0});s.useEffect(()=>{o||m(!1)},[o,m]);const g=s.useMemo(()=>Vr(i),[i]),E=s.useCallback(T=>g.flatMap(S=>S.options).find(S=>String(S.value).toLowerCase()===String(T).toLowerCase()),[g]),f=s.useMemo(()=>{const T=a?String(a.value):r;return T&&g.length!==0?E(T):null},[a,r,g,E]),[w,v]=s.useState(r),_=s.useCallback(T=>{v(T),T!==void 0&&(e==null||e(T))},[e]);return s.useEffect(()=>{w===void 0&&(a==null?void 0:a.value)!==void 0&&_((a==null?void 0:a.label)||"")},[w,_,a]),s.useEffect(()=>{if(o&&(w!=null&&w.length)){const T=i.length?A(me("%d result found.","%d results found.",i.length,"web-stories"),String(i.length)):h("No results found.","web-stories");l(T)}},[w,o,i.length,l]),{activeOption:f,getActiveOption:E,groups:g,inputState:w,setInputState:_,isMenuFocused:p,setIsMenuFocused:m,isOpen:o,setIsOpen:c}}function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},qe.apply(this,arguments)}const as=y.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-1jug8cl-0"})([""]);function rs(t){let{ariaInputLabel:e=Gr,ariaClearLabel:a=zr,disabled:r,handleSearchValueChange:i,hasError:l,hint:o,label:d,onMenuItemClick:c,onClear:p,options:u=[],placeholder:m=Hr,placement:g=ot.Bottom,popupFillWidth:E=Yr,popupZIndex:f,selectedValue:w,searchValue:v,..._}=t;const T=s.useMemo(()=>`list-${ze()}`,[]),S=s.useMemo(()=>`select-button-${ze()}`,[]),C=s.useMemo(()=>`clear-button-${ze()}`,[]),O=s.useRef(null),L=s.useRef(null),{activeOption:H,getActiveOption:I,inputState:x,setInputState:R,isMenuFocused:j,setIsMenuFocused:F,isOpen:V,setIsOpen:P,groups:$}=ts({options:u,selectedValue:w,searchValue:v,handleSearchValueChange:i}),Z=s.useMemo(()=>!!(r||!(x!=null&&x.length)),[r,x]),we=s.useCallback(()=>{P(!0),F(!1)},[P,F]),M=s.useCallback(X=>{X.preventDefault(),P(!0)},[P]),U=s.useCallback(X=>{C&&(X==null?void 0:X.currentTarget)instanceof HTMLElement&&X.currentTarget.id===C||P(!1)},[C,P]),W=s.useCallback((X,oe)=>{P(!1);const Yt=I(oe)||{label:String(oe),value:oe};R(String(Yt.label)),c==null||c(X,Yt)},[I,R,P,c]),ae=s.useCallback(()=>{var X;return(X=O==null?void 0:O.current)==null?void 0:X.focus()},[]),lt=s.useCallback(X=>{let{target:oe}=X;R(oe.value),P(oe.value.length>0)},[R,P]),ct=s.useCallback(()=>{R(""),p==null||p(),ae==null||ae()},[ae,R,p]),dt=s.useCallback(()=>{P(!1),F(!1)},[P,F]),Be=s.useCallback(()=>F(!0),[F]),Se=s.useCallback(()=>{(Z||(x==null?void 0:x.trim().length)===0)&&(F(!1),P(!1))},[x,F,Z,P]),Nr=s.useCallback(X=>{const{key:oe}=X;oe==="Escape"?Z||F(!1):oe==="Tab"?Se():oe==="ArrowDown"?Be():oe==="Enter"&&x&&x.trim().length>0&&W(X.nativeEvent,String(x))},[Z,F,Se,Be,x,W]);return Pe(L,Se,[Se]),n.createElement(Zn,null,d&&n.createElement(Qn,{size:N.Small,disabled:r,isBold:!0},d),n.createElement(as,{ref:L},n.createElement(Wr,qe({"aria-label":e,hasError:l,id:S,onChange:lt,onClick:M,onFocus:we,onKeyDown:Nr,placeholder:m,ariaClearLabel:a,clearId:C,disabled:r,handleClearInput:ct,handleTabClear:dt,inputValue:x||"",isOpen:V,listId:T,ref:O},_))),!Z&&n.createElement(qr,{anchor:O,isOpen:V,placement:g,fillWidth:E,zIndex:f,ignoreMaxOffsetY:!0},n.createElement(Kr,qe({activeValue:H==null?void 0:H.value,handleReturnToParent:ae,isMenuFocused:j,listId:T,menuAriaLabel:A(h("%s Option List Selector","web-stories"),e),onDismissMenu:U,handleMenuItemSelect:W,groups:$,parentId:S},_))),o&&n.createElement(es,{hasError:l,size:N.Small},o))}function Et(){return Et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Et.apply(this,arguments)}const ns=y(ka).withConfig({displayName:"link__StyledLink",componentId:"sc-7h28r8-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],Xr,t=>{let{theme:e}=t;return e.colors.fg.primary},t=>{let{theme:e}=t;return e.colors.interactiveBg.secondaryHover},t=>{let{theme:e}=t;return e.colors.interactiveBg.secondaryPress});function ss(t){let{id:e,onBlur:a,onClick:r,onFocus:i,openNewTab:l,...o}=t;const{focusedId:d,onDismiss:c,onMenuItemBlur:p,onMenuItemFocus:u}=Jr(f=>{let{state:w,actions:v}=f;return{focusedId:w.focusedId,onDismiss:v.onDismiss,onMenuItemBlur:v.onMenuItemBlur,onMenuItemFocus:v.onMenuItemFocus}}),m=s.useMemo(ze,[]),g=e||m,E=l?{target:"_blank",rel:"noreferrer"}:{};return n.createElement(ns,Et({id:g,tabIndex:d===g?0:-1,role:"menuitem",onBlur:f=>{p(),a==null||a(f)},onClick:f=>{r==null||r(f),c(f.nativeEvent)},onFocus:f=>{u(g),i==null||i(f)}},E,o))}const Ha=y.h1.withConfig({displayName:"display__Display",componentId:"sc-1x3xqpc-0"})([""," ",""],Zr,t=>{let{size:e=N.Medium,theme:a}=t;return Qr({preset:a.typography.presets.display[e],theme:a})});var Xt,Jt,Zt,Qt;function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vt.apply(this,arguments)}var os=s.memo(t=>{let{title:e,titleId:a,...r}=t;return s.createElement("svg",vt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 212 64","aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,Xt||(Xt=s.createElement("circle",{cx:32,cy:32,r:32,fill:"url(#a)",transform:"rotate(-180 32 32)"})),Jt||(Jt=s.createElement("g",{fill:"#fff",filter:"url(#b)"},s.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2V19.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4V22.4z"}))),Zt||(Zt=s.createElement("path",{fill:"#000",d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26H80.78zm24.747.41c-1.263 0-2.389-.3-3.379-.897a6.391 6.391 0 0 1-2.304-2.457c-.546-1.041-.82-2.227-.82-3.559 0-1.245.257-2.397.769-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.53 5.53 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.161 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm15.423 11.904c-1.041 0-1.954-.239-2.739-.716-.785-.478-1.357-1.016-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103c.358-.614.93-1.16 1.715-1.638s1.698-.717 2.739-.717c1.195 0 2.262.299 3.2.896.939.598 1.681 1.417 2.227 2.458.547 1.04.82 2.236.82 3.584 0 1.348-.273 2.543-.82 3.584-.546 1.04-1.288 1.86-2.227 2.457-.938.598-2.005.896-3.2.896zm-.23-1.97a3.98 3.98 0 0 0 2.099-.59c.666-.41 1.195-.99 1.587-1.74.41-.751.615-1.63.615-2.637 0-1.024-.205-1.903-.615-2.637-.392-.75-.921-1.323-1.587-1.715a3.857 3.857 0 0 0-2.099-.615c-.751 0-1.459.205-2.125.615-.648.392-1.178.964-1.587 1.715-.41.734-.615 1.613-.615 2.637s.205 1.911.615 2.662c.409.734.939 1.306 1.587 1.715a4.116 4.116 0 0 0 2.125.59zm19.73 1.97a6.608 6.608 0 0 1-2.637-.563 6.642 6.642 0 0 1-2.304-1.664c-.665-.734-1.152-1.647-1.459-2.739l2.074-.845c.29 1.058.819 1.946 1.587 2.663.768.716 1.698 1.075 2.79 1.075.683 0 1.306-.12 1.869-.359a3.286 3.286 0 0 0 1.382-1.1c.359-.478.538-1.059.538-1.741 0-.905-.341-1.622-1.024-2.15-.666-.547-1.655-1.05-2.97-1.511l-1.152-.41a13.954 13.954 0 0 1-2.048-.972 5.22 5.22 0 0 1-1.689-1.536c-.444-.649-.666-1.46-.666-2.432 0-.888.239-1.699.717-2.432.478-.734 1.135-1.323 1.971-1.767.837-.444 1.801-.665 2.893-.665 1.143 0 2.099.213 2.867.64.785.41 1.4.904 1.843 1.484.461.564.768 1.084.922 1.562l-2.022.87c-.103-.358-.299-.725-.589-1.1-.29-.393-.683-.717-1.178-.973-.478-.273-1.083-.41-1.817-.41-.598 0-1.161.12-1.69.359-.512.239-.93.571-1.254.998-.308.41-.461.887-.461 1.434 0 .768.307 1.373.921 1.817.615.444 1.443.845 2.484 1.203l1.203.41c.546.188 1.101.418 1.664.691.58.273 1.118.623 1.613 1.05.495.426.896.956 1.203 1.587.307.614.461 1.357.461 2.227 0 .939-.188 1.75-.564 2.432a4.746 4.746 0 0 1-1.433 1.639 5.972 5.972 0 0 1-1.971.921c-.7.205-1.391.307-2.074.307zm13.187-.204c-1.092 0-1.971-.316-2.636-.948-.666-.648-.999-1.544-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117c0 .683.137 1.212.41 1.587.29.376.759.563 1.408.563.29 0 .555-.042.793-.128.239-.085.453-.187.64-.307v2.125c-.221.102-.469.179-.742.23-.256.069-.606.103-1.05.103zm9.799.204c-1.314 0-2.475-.307-3.482-.921a6.658 6.658 0 0 1-2.381-2.483c-.563-1.058-.844-2.236-.844-3.533 0-1.297.281-2.466.844-3.507a6.605 6.605 0 0 1 2.381-2.51c1.007-.614 2.168-.92 3.482-.92s2.474.315 3.481.946a6.418 6.418 0 0 1 2.356 2.51c.58 1.04.87 2.2.87 3.48 0 1.298-.29 2.475-.87 3.534a6.465 6.465 0 0 1-2.356 2.483c-1.007.614-2.167.921-3.481.921zm0-1.97a4.34 4.34 0 0 0 2.201-.59 4.462 4.462 0 0 0 1.69-1.69c.427-.75.64-1.646.64-2.687s-.213-1.929-.64-2.663c-.427-.75-.99-1.322-1.69-1.715a4.34 4.34 0 0 0-2.201-.589c-.785 0-1.528.197-2.227.59-.7.392-1.263.963-1.69 1.714-.427.734-.64 1.622-.64 2.663 0 1.04.213 1.937.64 2.688.427.734.99 1.297 1.69 1.69a4.48 4.48 0 0 0 2.227.588zm8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4.02 4.02 0 0 1 1.562-.333c.392 0 .699.025.921.077.222.034.427.094.615.179v2.355c-.547-.273-1.161-.41-1.844-.41-.631 0-1.211.18-1.74.538a4.003 4.003 0 0 0-1.28 1.434 4.236 4.236 0 0 0-.461 1.97V40.4h-2.176zm10.88-15.462c-.427 0-.794-.153-1.101-.46a1.503 1.503 0 0 1-.461-1.101c0-.444.154-.81.461-1.101.307-.307.674-.46 1.101-.46.444 0 .81.153 1.101.46.307.29.46.657.46 1.1 0 .428-.153.794-.46 1.102a1.45 1.45 0 0 1-1.101.46zM182.046 40.4V27.344h2.176V40.4h-2.176zm11.256.41c-1.263 0-2.389-.3-3.379-.897a6.39 6.39 0 0 1-2.304-2.457c-.546-1.041-.819-2.227-.819-3.559 0-1.245.256-2.397.768-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.523 5.523 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.16 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm13.475 11.904c-1.468 0-2.663-.34-3.584-1.024-.922-.7-1.562-1.527-1.92-2.483l1.945-.87c.342.785.828 1.39 1.459 1.817a3.75 3.75 0 0 0 2.1.64c.768 0 1.45-.162 2.048-.486.614-.324.921-.802.921-1.434 0-.58-.256-1.032-.768-1.356-.495-.325-1.194-.598-2.099-.82l-1.587-.41c-.615-.17-1.195-.409-1.741-.716s-.99-.7-1.331-1.178c-.324-.494-.487-1.092-.487-1.792 0-.785.231-1.459.692-2.022.46-.563 1.066-.99 1.817-1.28a6.294 6.294 0 0 1 2.407-.46c1.109 0 2.116.247 3.02.742.922.478 1.571 1.169 1.946 2.073l-1.894.87c-.325-.648-.76-1.1-1.306-1.356s-1.143-.384-1.792-.384c-.683 0-1.306.162-1.869.486-.546.307-.819.734-.819 1.28s.213.956.64 1.229c.444.273.981.495 1.613.666l1.894.486c2.577.666 3.866 1.929 3.866 3.789 0 .819-.231 1.527-.691 2.125-.461.597-1.084 1.058-1.869 1.382-.785.324-1.656.486-2.611.486z"})),Qt||(Qt=s.createElement("defs",null,s.createElement("linearGradient",{id:"a",x1:13.255,x2:35.289,y1:6.599,y2:62.791,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#79B3FF"}),s.createElement("stop",{offset:1,stopColor:"#CBACFF"})),s.createElement("filter",{id:"b",width:46.08,height:46.08,x:8.96,y:10.24,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},s.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),s.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),s.createElement("feOffset",{dy:1.28}),s.createElement("feGaussianBlur",{stdDeviation:1.92}),s.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),s.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),s.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})))))}),ea,ta,aa;function wt(){return wt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wt.apply(this,arguments)}var is=s.memo(t=>{let{title:e,titleId:a,...r}=t;return s.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 274 118","aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,ea||(ea=s.createElement("path",{fill:"#F4F2EF",d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z"})),ta||(ta=s.createElement("path",{fill:"#FBBC04",fillRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",clipRule:"evenodd"})),aa||(aa=s.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"})))});function ls(t,e){K(2,arguments);var a=G(t),r=Ma(e);return isNaN(r)?new Date(NaN):(r&&a.setDate(a.getDate()+r),a)}function ra(t){K(1,arguments);var e=G(t);return e.setHours(0,0,0,0),e}function He(t,e){K(2,arguments);var a=G(t),r=G(e),i=a.getTime()-r.getTime();return i<0?-1:i>0?1:i}function cs(t,e){K(2,arguments);var a=G(t),r=G(e),i=a.getTime()-r.getTime();return i>0?-1:i<0?1:i}function Ya(t,e){K(2,arguments);var a=ra(t),r=ra(e);return a.getTime()===r.getTime()}function ds(t,e){K(2,arguments);var a=G(t),r=G(e),i=a.getFullYear()-r.getFullYear(),l=a.getMonth()-r.getMonth();return i*12+l}function us(t,e){return K(2,arguments),G(t).getTime()-G(e).getTime()}var na={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},ms="trunc";function ps(t){return t?na[t]:na[ms]}function hs(t){K(1,arguments);var e=G(t);return e.setHours(23,59,59,999),e}function gs(t){K(1,arguments);var e=G(t),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}function fs(t){K(1,arguments);var e=G(t);return hs(e).getTime()===gs(e).getTime()}function bs(t,e){K(2,arguments);var a=G(t),r=G(e),i=He(a,r),l=Math.abs(ds(a,r)),o;if(l<1)o=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*l);var d=He(a,r)===-i;fs(G(t))&&l===1&&He(t,r)===1&&(d=!1),o=i*(l-Number(d))}return o===0?0:o}function ys(t,e,a){K(2,arguments);var r=us(t,e)/1e3;return ps(a==null?void 0:a.roundingMethod)(r)}function Wa(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}function Es(t){return Wa({},t)}var sa=1440,vs=2520,ut=43200,ws=86400;function Ss(t,e,a){var r,i;K(2,arguments);var l=tn(),o=(r=(i=a==null?void 0:a.locale)!==null&&i!==void 0?i:l.locale)!==null&&r!==void 0?r:en;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var d=He(t,e);if(isNaN(d))throw new RangeError("Invalid time value");var c=Wa(Es(a),{addSuffix:!!(a!=null&&a.addSuffix),comparison:d}),p,u;d>0?(p=G(e),u=G(t)):(p=G(t),u=G(e));var m=ys(u,p),g=(qt(u)-qt(p))/1e3,E=Math.round((m-g)/60),f;if(E<2)return a!=null&&a.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,c):m<10?o.formatDistance("lessThanXSeconds",10,c):m<20?o.formatDistance("lessThanXSeconds",20,c):m<40?o.formatDistance("halfAMinute",0,c):m<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):E===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",E,c);if(E<45)return o.formatDistance("xMinutes",E,c);if(E<90)return o.formatDistance("aboutXHours",1,c);if(E<sa){var w=Math.round(E/60);return o.formatDistance("aboutXHours",w,c)}else{if(E<vs)return o.formatDistance("xDays",1,c);if(E<ut){var v=Math.round(E/sa);return o.formatDistance("xDays",v,c)}else if(E<ws)return f=Math.round(E/ut),o.formatDistance("aboutXMonths",f,c)}if(f=bs(u,p),f<12){var _=Math.round(E/ut);return o.formatDistance("xMonths",_,c)}else{var T=f%12,S=Math.floor(f/12);return T<3?o.formatDistance("aboutXYears",S,c):T<9?o.formatDistance("overXYears",S,c):o.formatDistance("almostXYears",S+1,c)}}function Ts(t,e){return K(1,arguments),Ss(t,Date.now(),e)}function _s(t){return K(1,arguments),Ya(t,Date.now())}function Cs(t,e){K(2,arguments);var a=Ma(e);return ls(t,-a)}function Is(t){return K(1,arguments),Ya(t,Cs(Date.now(),1))}function St(t){if(!t)return"";const e=Dt(t);if(_s(e)){const{locale:a}=Pa();return Ts(e,{includeSeconds:!1,addSuffix:!0,locale:a})}return Is(e)?h("yesterday","web-stories"):an(t)}function xs(t){return Dt(t,{timeZone:"+0000"})}var qa=ve({isRTL:!1,userId:0,locale:{},newStoryURL:"",cdnURL:"",version:"",capabilities:{},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0},containerId:""});function Ls(t){let{config:e,children:a}=t;return n.createElement(qa.Provider,{value:e},a)}const B={CREATING_STORY_FROM_TEMPLATE:"creating_story_from_template",CREATE_STORY_FROM_TEMPLATE_SUCCESS:"create_story_from_template_success",CREATE_STORY_FROM_TEMPLATE_FAILURE:"create_story_from_template_failure",LOADING_STORIES:"loading_stories",FETCH_STORIES_SUCCESS:"fetch_stories_success",FETCH_STORIES_FAILURE:"fetch_stories_failure",UPDATE_STORY:"update_story",UPDATE_STORY_FAILURE:"update_story_failure",TRASH_STORY:"trash_story",TRASH_STORY_FAILURE:"trash_story_failure",DUPLICATE_STORY:"duplicate_story",DUPLICATE_STORY_FAILURE:"duplicate_story_failure"},Os={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};var oa,ia;function Tt(){return Tt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Tt.apply(this,arguments)}const As=s.memo(t=>{let{title:e,titleId:a,...r}=t;return s.createElement("svg",Tt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,oa||(oa=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z"})),ia||(ia=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263l4.967-2.129Z"})))});var la,ca;function _t(){return _t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_t.apply(this,arguments)}const Rs=s.memo(t=>{let{title:e,titleId:a,...r}=t;return s.createElement("svg",_t({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,la||(la=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.493 2.493 0 0 0-.782.748 2.493 2.493 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.476 2.476 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484Z"})),ca||(ca=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9"})))}),Y={OPEN_IN_EDITOR:"open-in-editor-action",RENAME:"rename-action",DUPLICATE:"duplicate-action",DELETE:"delete-story-action",COPY_STORY_LINK:"copy-story-link",OPEN_STORY_LINK:"open-story-link",CLOSE:"close-menu"},$s=[{label:h("Open in editor","web-stories"),value:Y.OPEN_IN_EDITOR,isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasEditAction)}},{label:h("Open in new tab","web-stories"),value:Y.OPEN_STORY_LINK,isEnabled:t=>!!(t!=null&&t.previewLink)},{label:h("Copy Story URL","web-stories"),value:Y.COPY_STORY_LINK,isEnabled:t=>!!(t!=null&&t.previewLink)},{label:h("Rename","web-stories"),value:Y.RENAME,separator:"top",isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasEditAction)}},{label:h("Duplicate","web-stories"),value:Y.DUPLICATE,isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasEditAction)}},{label:h("Delete Story","web-stories"),value:Y.DELETE,separator:"top",isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasDeleteAction)}}],te={ASC:"asc",DESC:"desc"},k={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},Ds={orderby:k,order:te},Ka={[k.NAME]:te.ASC,[k.DATE_CREATED]:te.DESC,[k.LAST_MODIFIED]:te.DESC,[k.CREATED_BY]:te.ASC},ks=[{label:h("Name","web-stories"),value:k.NAME},{label:h("Date Created","web-stories"),value:k.DATE_CREATED},{label:h("Last Modified","web-stories"),value:k.LAST_MODIFIED},{label:h("Created By","web-stories"),value:k.CREATED_BY}],Ve={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},D={ALL:Object.values(Ve).join(","),PUBLISHED_AND_FUTURE:[Ve.PUBLISH,Ve.FUTURE].join(","),...Ve},Ms={[D.PUBLISH]:h("Published","web-stories"),[D.PENDING]:h("Pending","web-stories"),[D.FUTURE]:h("Scheduled","web-stories"),[D.DRAFT]:h("Draft","web-stories"),[D.PRIVATE]:h("Private","web-stories")},Ps=[{label:h("All Stories","web-stories"),value:D.ALL,status:"all"},{label:h("Drafts","web-stories"),value:D.DRAFT,status:D.DRAFT},{label:h("Pending","web-stories"),value:D.PENDING,status:D.PENDING},{label:h("Published","web-stories"),value:D.PUBLISH,status:D.PUBLISH},{label:h("Scheduled","web-stories"),value:D.FUTURE,status:D.FUTURE},{label:h("Private","web-stories"),value:D.PRIVATE,status:D.PRIVATE}],Ns={[D.ALL]:t=>A(me("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",t,"web-stories"),String(t)),[D.DRAFT]:t=>A(me("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",t,"web-stories"),String(t)),[D.PUBLISH]:t=>A(me("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",t,"web-stories"),String(t)),[D.FUTURE]:t=>A(me("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",t,"web-stories"),String(t)),[D.PENDING]:t=>A(me("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",t,"web-stories"),String(t)),[D.PRIVATE]:t=>A(me("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",t,"web-stories"),String(t))},Ct={filters:{status:D.ALL},sort:{orderby:k.LAST_MODIFIED,order:Ka[k.LAST_MODIFIED]}},pe={DIY_CRAFTS:"diy_crafts",MOVIES_TV:"movies_tv",BEAUTY_STYLE:"beauty_style",FITNESS_WELLBEING:"fitness_wellbeing",FOOD:"food",TRAVEL:"travel",MUSIC:"music",SPORTS:"sports"};z("DIY & Crafts","template vertical","web-stories"),pe.DIY_CRAFTS,z("Movies & TV","template vertical","web-stories"),pe.MOVIES_TV,z("Beauty & Style","template vertical","web-stories"),pe.BEAUTY_STYLE,z("Fitness & Wellbeing","template vertical","web-stories"),pe.FITNESS_WELLBEING,z("Food","template vertical","web-stories"),pe.FOOD,z("Travel","template vertical","web-stories"),pe.TRAVEL,z("Music","template vertical","web-stories"),pe.MUSIC,z("Sports","template vertical","web-stories"),pe.SPORTS;const ie={WHITE:"white",BLACK:"black",GRAY:"gray",BROWN:"brown",RED:"red",ORANGE:"orange",YELLOW:"yellow",GREEN:"green",BLUE:"blue",PINK:"pink",PURPLE:"purple"};z("White","color","web-stories"),ie.WHITE,z("Black","color","web-stories"),ie.BLACK,z("Gray","color","web-stories"),ie.GRAY,z("Brown","color","web-stories"),ie.BROWN,z("Red","color","web-stories"),ie.RED,z("Orange","color","web-stories"),ie.ORANGE,z("Yellow","color","web-stories"),ie.YELLOW,z("Green","color","web-stories"),ie.GREEN,z("Blue","color","web-stories"),ie.BLUE,z("Pink","color","web-stories"),ie.PINK,z("Purple","color","web-stories"),ie.PURPLE;const Ft={ALL:"template"},Fs={[Ft.ALL]:t=>A(me("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",t,"web-stories"),String(t))},Bs={ASC:"asc",DESC:"desc"},Ie={POPULAR:"popular",RECENT:"recent"},js={orderby:Ie,order:Bs},Ke={filters:{status:Ft.ALL},sort:{orderby:Ie.POPULAR}},Us=[{label:h("Popular","web-stories"),value:Ie.POPULAR},{label:h("Recent","web-stories"),value:Ie.RECENT}],Vs={template:h("See details","web-stories")},Xe=288,be=1098,ue={TABLET:"tablet",DESKTOP:"desktop",THUMBNAIL:"thumbnail"},Je={[ue.TABLET]:200,[ue.DESKTOP]:232,[ue.THUMBNAIL]:33},It={COLUMN_GAP:24,ROW_GAP:32},Bt={GUTTER:52},Gs="useskeyboard",Xa={LAYOUT_SQUISHABLE:3,LAYOUT_FIXED:5,STICKY_TABLE:2,POPOVER_MENU:10,POPOVER_PANEL:10},J={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},Ze={[J.DASHBOARD]:h("Dashboard","web-stories"),[J.TEMPLATES_GALLERY]:h("Explore Templates","web-stories"),[`${J.TEMPLATES_GALLERY}/${J.TEMPLATE_DETAIL}`]:h("Template Details","web-stories"),DEFAULT:h("Dashboard","web-stories")},zs=[{value:J.DASHBOARD,label:Ze[J.DASHBOARD],Icon:Rs},{value:J.TEMPLATES_GALLERY,label:Ze[J.TEMPLATES_GALLERY],Icon:As}],ee={GRID:"grid",LIST:"list"},da={[ee.GRID]:h("Switch to List View","web-stories"),[ee.LIST]:h("Switch to Grid View","web-stories")},Qe={DASHBOARD:"DASHBOARD",TEMPLATES_GALLERY:"TEMPLATES_GALLERY"},Hs={[Qe.DASHBOARD]:{...Ns},[Qe.TEMPLATES_GALLERY]:{...Fs}},Ja=300,et=853,tt=640;function Ys(t,e){switch(e.type){case B.LOADING_STORIES:case B.CREATING_STORY_FROM_TEMPLATE:return{...t,isLoading:e.payload};case B.CREATE_STORY_FROM_TEMPLATE_FAILURE:case B.FETCH_STORIES_FAILURE:case B.UPDATE_STORY_FAILURE:case B.TRASH_STORY_FAILURE:case B.DUPLICATE_STORY_FAILURE:return{...t,error:{...e.payload,id:Date.now()}};case B.CREATE_STORY_FROM_TEMPLATE_SUCCESS:return{...t,error:{}};case B.UPDATE_STORY:return{...t,error:{},stories:{...t.stories,[e.payload.id]:e.payload}};case B.TRASH_STORY:{const a=e.payload.storyStatus===D.DRAFT?D.DRAFT:D.PUBLISH;return{...t,error:{},storiesOrderById:t.storiesOrderById.filter(r=>r!==e.payload.id),totalStoriesByStatus:{...t.totalStoriesByStatus,all:t.totalStoriesByStatus.all-1,[a]:t.totalStoriesByStatus[a]-1},stories:Object.keys(t.stories).reduce((r,i)=>(parseInt(i)!==e.payload.id&&(r[i]=t.stories[i]),r),{})}}case B.DUPLICATE_STORY:return{...t,error:{},storiesOrderById:[e.payload.id,...t.storiesOrderById],totalStoriesByStatus:{...t.totalStoriesByStatus,all:t.totalStoriesByStatus.all+1,[e.payload.status]:t.totalStoriesByStatus[e.payload.status]+1},stories:{...t.stories,[e.payload.id]:e.payload}};case B.FETCH_STORIES_SUCCESS:{const{fetchedStoryIds:a,totalStoriesByStatus:r,totalPages:i,page:l,stories:o}=e.payload,{storiesOrderById:d,stories:c}=t,p=l===1?a:[...d,...a],u=[...new Set(p)];return{...t,error:{},storiesOrderById:u,stories:{...c,...o},totalPages:i||1,totalStoriesByStatus:r,allPagesFetched:l>=i}}default:return t}}const Re={LOAD_STORIES:{MESSAGE:h("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:h("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:h("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:h("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:h("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:h("Cannot connect to data source","web-stories"),MESSAGE:h("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:h("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:h("Could not load the template","web-stories")}};function Q(){return xe(qa,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le)}const Ws=`${nn.LOCAL_AUTOSAVE_PREFIX}_auto-draft`,qs=()=>{const t=s.useRef(!0),e=s.useMemo(()=>new Map,[]),[a,r]=s.useReducer(Ys,Os),{apiCallbacks:i}=Q(),l=s.useRef(!1);s.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const o=s.useCallback(async u=>{r({type:B.LOADING_STORIES,payload:!0});const m=je("load_stories");try{const{stories:g,fetchedStoryIds:E,totalPages:f,totalStoriesByStatus:w}=await i.fetchStories(u);if(!l.current)return;t.current&&e.forEach(v=>{v(w)}),t.current=!1,r({type:B.FETCH_STORIES_SUCCESS,payload:{stories:g,totalPages:f,totalStoriesByStatus:w,fetchedStoryIds:E,page:u.page}})}catch(g){r({type:B.FETCH_STORIES_FAILURE,payload:{message:Re.LOAD_STORIES.MESSAGE,code:g.code}})}finally{r({type:B.LOADING_STORIES,payload:!1}),m()}},[i,e]),d=s.useCallback(async u=>{const m=je("load_update_story");try{const g=await i.updateStory(u);r({type:B.UPDATE_STORY,payload:g})}catch(g){r({type:B.UPDATE_STORY_FAILURE,payload:{message:Re.UPDATE_STORY.MESSAGE,code:g.code}})}finally{m()}},[i]),c=s.useCallback(async u=>{const m=je("load_trash_story");try{await i.trashStory(u.id),r({type:B.TRASH_STORY,payload:{id:u.id,storyStatus:u.status}})}catch(g){r({type:B.TRASH_STORY_FAILURE,payload:{message:Re.DELETE_STORY.MESSAGE,code:g.code}})}finally{m()}},[i]),p=s.useCallback(async u=>{r({type:B.CREATING_STORY_FROM_TEMPLATE,payload:!0});try{const m=await i.createStoryFromTemplate(u);rn.deleteItemByKey(Ws),r({type:B.CREATE_STORY_FROM_TEMPLATE_SUCCESS}),window.location=m.editLink}catch(m){r({type:B.CREATE_STORY_FROM_TEMPLATE_FAILURE,payload:{message:Re.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:m.code}})}finally{r({type:B.CREATING_STORY_FROM_TEMPLATE,payload:!1})}},[i]);return{stories:a,api:{duplicateStory:s.useCallback(async u=>{const m=je("load_duplicate_story");try{const g=await i.duplicateStory(u);r({type:B.DUPLICATE_STORY,payload:g})}catch(g){r({type:B.DUPLICATE_STORY_FAILURE,payload:{message:Re.DUPLICATE_STORY.MESSAGE,code:g.code}})}finally{m()}},[i]),fetchStories:o,createStoryFromTemplate:p,trashStory:c,updateStory:d,addInitialFetchListener:s.useCallback(u=>{const m=Symbol();return e.set(m,u),()=>{e.delete(m)}},[e])}}},Te={LOADING_TEMPLATES:"loading_templates",FETCH_TEMPLATES_SUCCESS:"fetch_templates_success",FETCH_TEMPLATES_FAILURE:"fetch_templates_failure",PLACEHOLDER:"placeholder"},Za={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null},Ks=(t,e)=>t.reduce((a,r)=>(r[e]&&(a[r[e]],a[r[e]]=r),a),{});function Xs(t,e){switch(e.type){case Te.LOADING_TEMPLATES:return{...t,isLoading:e.payload};case Te.FETCH_TEMPLATES_FAILURE:return{...t,error:{...e.payload,id:Date.now()}};case Te.FETCH_TEMPLATES_SUCCESS:{const a=e.payload.templates.map(l=>{let{id:o}=l;return o}),r=e.payload.page===1?a:[...t.templatesOrderById,...a],i=[...new Set(r)];return{...t,error:{},templatesOrderById:i,templates:{...t.templates,...Ks(e.payload.templates,"id")},isLoading:!1,totalPages:e.payload.totalPages,totalTemplates:e.payload.totalTemplates,allPagesFetched:e.payload.page>=e.payload.totalPages,templatesByTag:e.payload.templatesByTag}}case Te.PLACEHOLDER:return Za;default:return t}}function Js(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const{id:a,slug:r,modified:i,creationDate:l}=t;return a&&r?{...t,id:a,slug:r,creationDate:Dt(l,Pa()),status:"template",modified:xs(i),isLocal:e}:null}const Zs=()=>{const[t,e]=s.useReducer(Xs,Za),{cdnURL:a}=Q(),r=s.useCallback(async()=>{e({type:Te.LOADING_TEMPLATES,payload:!0});const l={},{getAllTemplates:o}=await sn(()=>import("./index-60e91408.js"),["assets/index-60e91408.js","assets/useIndexedDBMedia-68e7e3f1.js","assets/index-78b59a2c.js"]),d=(await o({cdnURL:a})).map(c=>{const p=Js(c);return p.tags.forEach(u=>{l[u]?l[u].push(p.id):l[u]=[p.id]}),p}).sort((c,p)=>cs(c.creationDate,p.creationDate));e({type:Te.FETCH_TEMPLATES_SUCCESS,payload:{page:1,templates:d,totalPages:1,totalTemplates:d.length,templatesByTag:l}})},[a]),i=s.useCallback(l=>t.templates[l]?Promise.resolve(t.templates[l]):Promise.reject(new Error),[t]);return{templates:t,api:{fetchExternalTemplates:r,fetchExternalTemplateById:i}}};function Qs(){const{apiCallbacks:{getAuthors:t}}=Q();return{api:{getAuthors:t}}}function eo(){const{apiCallbacks:{getTaxonomies:t,getTaxonomyTerms:e}}=Q();return{api:{getTaxonomies:t,getTaxonomyTerms:e}}}const Qa=ve({state:{},actions:{}});function to(t){let{children:e}=t;const{api:a}=Qs(),{api:r}=eo(),{templates:i,api:l}=Zs(),{stories:o,api:d}=qs(),c={state:{stories:o,templates:i},actions:{storyApi:d,templateApi:l,usersApi:a,taxonomyApi:r}};return n.createElement(Qa.Provider,{value:c},e)}const er=ne(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return`1px solid ${e.colors.border.defaultNormal}`}),ao=y.div.withConfig({displayName:"components__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),tr=y.div.withConfig({displayName:"components__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],er);tr.propTypes={$isThreeRows:b.bool};const ro=y.div.withConfig({displayName:"components__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),ar=y(ce).attrs({type:se.Plain}).withConfig({displayName:"components__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],t=>{let{$isSelected:e,theme:a}=t;return e&&ne(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],a.borders.radius.medium,a.colors.interactiveBg.active)},er);ar.propTypes={$isSelected:b.bool};const rr=b.oneOf([...Object.values(D),...Object.values(Ft)]),no=b.shape({id:b.number.isRequired,status:rr,title:b.string.isRequired,modified:b.oneOfType([b.object,b.string]),author:b.object,capabilities:b.shape({hasDeleteAction:b.bool,hasEditAction:b.bool})}),so=b.shape({id:b.number.isRequired,status:rr,title:b.string.isRequired,pages:b.array,modified:b.object,colors:b.arrayOf(b.shape({label:b.string.isRequired,color:b.string.isRequired})),description:b.string,tags:b.arrayOf(b.string),createdBy:b.string,postersByPage:b.arrayOf(b.shape({webp:b.string,png:b.string,type:b.string}))});b.arrayOf(no),b.arrayOf(so).isRequired,b.shape({duplicateStory:b.func,trashStory:b.func,updateStory:b.func}),b.shape({createStoryFromTemplate:b.func,handleDetailsToggle:b.func,switchToTemplateByOffset:b.func}),b.shape({all:b.number,draft:b.number,publish:b.number});const nr=b.shape({width:b.number,height:b.number});b.shape({handleMenuToggle:b.func.isRequired,contextMenuId:b.number.isRequired,menuItems:b.arrayOf(b.shape({label:b.string,value:b.oneOfType([b.string,b.bool]),url:b.string,isEnabled:b.func,action:b.func}))}),b.shape({handleOnRenameStory:b.func,id:b.number,handleCancelRename:b.func});const sr=y.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],It.COLUMN_GAP,It.ROW_GAP,t=>{let{columnWidth:e}=t;return`
    repeat(auto-fill, ${e}px)`},t=>{let{columnHeight:e}=t;return`minmax(${e}px, auto)`},t=>{let{theme:e}=t;return ne(["&:focus-visible{",";}"],Na(e.colors.border.focus))});sr.propTypes={columnHeight:b.number,columnWidth:b.number};const or=s.forwardRef(function(e,a){let{ariaLabel:r,children:i,pageSize:l}=e;return n.createElement(sr,{ref:a,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":r,columnWidth:l.width,columnHeight:l.height},i)});var ua;function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xt.apply(this,arguments)}const oo=s.memo(t=>{let{title:e,titleId:a,...r}=t;return s.createElement("svg",xt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 4 16","aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,ua||(ua=s.createElement("path",{fill:"currentColor",d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})))}),io="context-menu-button",le=y.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],t=>{let{menuOpen:e,isVisible:a}=t;return e||a?1:0},t=>{let{theme:e,$isInverted:a}=t;return a?e.colors.inverted.fg.primary:e.colors.interactiveFg.brandNormal},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e,$isInverted:a}=t;return kt(!1,!!a&&e.colors.standard.black)});le.propTypes={menuOpen:b.bool};const ir=y.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],t=>{let{verticalAlign:e="flex-start"}=t;return e},t=>{let{$menuStyleOverrides:e}=t;return e});function lr(t){let{contextMenuId:e,onMoreButtonSelected:a,storyId:r,verticalAlign:i,menuItems:l,itemActive:o,tabIndex:d,menuStyleOverrides:c,menuLabel:p,isInverted:u}=t;const m=e===r,g=s.useCallback(E=>a(E,-1),[a]);return n.createElement(ir,{verticalAlign:i,"data-testid":`story-context-menu-${r}`,$menuStyleOverrides:c},n.createElement(le,{"data-testid":`story-context-button-${r}`,tabIndex:d,menuOpen:m,isVisible:o,"aria-label":p||h("More Options","web-stories"),onClick:E=>a(E,m?-1:r),className:io,$isInverted:u},n.createElement(oo,null)),n.createElement(on,{animate:!0,isOpen:m,onDismiss:g},l.map(E=>{let{label:f,separator:w,...v}=E;const _=v.href?ss:ln;return n.createElement(s.Fragment,{key:f},w==="top"&&n.createElement(Kt,null),n.createElement(_,v,f),w==="bottom"&&n.createElement(Kt,null))})))}ir.propTypes={verticalAlign:b.oneOf(["center","flex-start","flex-end"])};const jt=y.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],t=>{let{$posterHeight:e}=t;return`${e}px auto`},le,le,le,le);jt.propTypes={$posterHeight:b.number};b.shape({label:b.string.isRequired,color:b.string.isRequired});const lo=y.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),co=y.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],t=>{let{theme:e,$backgroundColor:a,color:r,size:i,spacing:l}=t;return`
    width: ${i}px;
    height: ${i}px;
    border-radius: 50%;
    margin-bottom: 0;
    background-color: rgb(${a});
    ${(o=>({"#fff":`border: solid 1px ${o}`,"#ffffff":`border: solid 1px ${o}`,white:`border: solid 1px ${o}`,"#fef9f1":`border: solid 1px ${o}`,"#fff8f2":`border: solid 1px ${o}`,"#f9f9f9":`border: solid 1px ${o}`,"#fcfcfc":`border: solid 1px ${o}`}))(e.colors.border.defaultNormal)[r]||""};

    & + & {
      margin-left: ${l||10}px;
    }
  `});function uo(t){let{colors:e,size:a,spacing:r,...i}=t;return n.createElement(lo,i,e.map(l=>{let{label:o,color:d}=l;const{r:c,g:p,b:u}=cn(d).color,m=`${c}, ${p}, ${u}`;return n.createElement(co,{key:d,size:a,spacing:r,color:d,$backgroundColor:m,title:o,ariaLabel:o,"data-testid":"detail-template-color"})}))}const it=y.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],Bt.GUTTER),mo={MENU:"menu",PANEL:"panel",COLOR_PANEL:"color_panel"};y(ce).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],t=>{let{theme:e}=t;return Na(e.colors.border.focus)});y.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(dn);y.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],t=>{let{isDragging:e,theme:a}=t;return e?a.colors.border.focus:a.colors.border.defaultNormal});y(q.Paragraph).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],t=>{let{theme:e}=t;return e.colors.fg.tertiary});y.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],t=>{let{theme:e}=t;return e.colors.standard.white},t=>{let{isLoading:e}=t;return e?.6:0},t=>{let{isLoading:e}=t;return e?"100":"0"});const po=y(un).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],t=>{let{$isInverted:e,theme:a}=t;return e&&ne(["input{color:",";}"],a.colors.inverted.fg.primary)}),cr=t=>{let{noAutoFocus:e,error:a,id:r,isInverted:i,label:l,onEditCancel:o,onEditComplete:d,placeholder:c,value:p}=t;const u=s.useRef(null),[m,g]=s.useState(p);s.useEffect(()=>{g(p)},[p]),Pe(u,()=>{o()},[o]),s.useEffect(()=>{var w;!e&&u.current&&((w=u.current.querySelector("input"))==null||w.focus())},[e]);const E=s.useCallback(w=>{let{target:v}=w;g(v.value)},[g]),f=s.useCallback(w=>{let{nativeEvent:v}=w;v.keyCode===13?d(m):v.keyCode===27&&o()},[m,d,o]);return n.createElement("div",{ref:u},n.createElement(po,{"aria-label":l,id:`${r}`,"data-testid":"inline-input-form",value:m,onKeyDown:f,onChange:E,placeholder:c,hasError:!!a,hint:a,$isInverted:i}))},dr=ve(null),ho=t=>{let{children:e}=t;const a=s.useRef(),r=s.useRef(null);s.useEffect(()=>{var o;a.current=(o=document==null?void 0:document.getElementById("web-stories-dashboard"))==null?void 0:o.querySelector(["button","a"])},[]);const i=s.useCallback(()=>{var o,d,c;(d=(o=document.documentElement)==null?void 0:o.scrollTo)==null||d.call(o,{top:0,behavior:"smooth"}),(c=a.current)==null||c.focus()},[]),l=s.useMemo(()=>({state:{scrollFrameRef:r},actions:{scrollToTop:i}}),[i]);return n.createElement(dr.Provider,{value:l},e)},ur=()=>{const t=mn(dr);if(!t)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return t},go=y.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),fo=t=>{let{children:e}=t;const{state:{scrollFrameRef:a}}=ur();return n.createElement(go,{ref:a},e)},bo=y.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],Xa.LAYOUT_FIXED),yo=t=>{let{children:e}=t;return n.createElement(bo,null,e)},Eo=y.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],be,be),vo=y.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],t=>{let{fullWidth:e}=t;return e?"100%":`calc(100% - ${Xe}px)`},t=>{let{fullWidth:e}=t;return e?"0":`${Xe}px`},be),wo=y.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],t=>{let{topOffset:e}=t;return`${e}px`},Xe,t=>{let{theme:e}=t;return e.colors.bg.primary},Xa.LAYOUT_FIXED,pn.outCubic,be,t=>{let{isOpen:e}=t;return e?1:0},t=>{let{isOpen:e}=t;return e?"visible":"hidden"},t=>{let{isOpen:e}=t;return e?"none":"-100%"}),mr=y.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var _e;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_e||(_e={}));var ma=function(t){return Object.freeze(t)};function mt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}var pa="beforeunload",So="hashchange",To="popstate";function _o(t){t===void 0&&(t={});var e=t,a=e.window,r=a===void 0?document.defaultView:a,i=r.history;function l(){var I=fa(r.location.hash.substr(1)),x=I.pathname,R=x===void 0?"/":x,j=I.search,F=j===void 0?"":j,V=I.hash,P=V===void 0?"":V,$=i.state||{};return[$.idx,ma({pathname:R,search:F,hash:P,state:$.usr||null,key:$.key||"default"})]}var o=null;function d(){if(o)E.call(o),o=null;else{var I=_e.Pop,x=l(),R=x[0],j=x[1];if(E.length)if(R!=null){var F=u-R;F&&(o={action:I,location:j,retry:function(){L(F*-1)}},L(F))}else mt(!1,"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.");else S(I)}}r.addEventListener(To,d),r.addEventListener(So,function(){var I=l(),x=I[1];pt(x)!==pt(m)&&d()});var c=_e.Pop,p=l(),u=p[0],m=p[1],g=ga(),E=ga();u==null&&(u=0,i.replaceState(Wt({},i.state,{idx:u}),""));function f(){var I=document.querySelector("base"),x="";if(I&&I.getAttribute("href")){var R=r.location.href,j=R.indexOf("#");x=j===-1?R:R.slice(0,j)}return x}function w(I){return f()+"#"+(typeof I=="string"?I:pt(I))}function v(I,x){return x===void 0&&(x=null),ma(Wt({pathname:m.pathname,hash:"",search:""},typeof I=="string"?fa(I):I,{state:x,key:Co()}))}function _(I,x){return[{usr:I.state,key:I.key,idx:x},w(I)]}function T(I,x,R){return!E.length||(E.call({action:I,location:x,retry:R}),!1)}function S(I){c=I;var x=l();u=x[0],m=x[1],g.call({action:c,location:m})}function C(I,x){var R=_e.Push,j=v(I,x);function F(){C(I,x)}if(mt(j.pathname.charAt(0)==="/","Relative pathnames are not supported in hash history.push("+JSON.stringify(I)+")"),T(R,j,F)){var V=_(j,u+1),P=V[0],$=V[1];try{i.pushState(P,"",$)}catch{r.location.assign($)}S(R)}}function O(I,x){var R=_e.Replace,j=v(I,x);function F(){O(I,x)}if(mt(j.pathname.charAt(0)==="/","Relative pathnames are not supported in hash history.replace("+JSON.stringify(I)+")"),T(R,j,F)){var V=_(j,u),P=V[0],$=V[1];i.replaceState(P,"",$),S(R)}}function L(I){i.go(I)}var H={get action(){return c},get location(){return m},createHref:w,push:C,replace:O,go:L,back:function(){L(-1)},forward:function(){L(1)},listen:function(x){return g.push(x)},block:function(x){var R=E.push(x);return E.length===1&&r.addEventListener(pa,ha),function(){R(),E.length||r.removeEventListener(pa,ha)}}};return H}function ha(t){t.preventDefault(),t.returnValue=""}function ga(){var t=[];return{get length(){return t.length},push:function(a){return t.push(a),function(){t=t.filter(function(r){return r!==a})}},call:function(a){t.forEach(function(r){return r&&r(a)})}}}function Co(){return Math.random().toString(36).substr(2,8)}function pt(t){var e=t.pathname,a=e===void 0?"/":e,r=t.search,i=r===void 0?"":r,l=t.hash,o=l===void 0?"":l;return i&&i!=="?"&&(a+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(a+=o.charAt(0)==="#"?o:"#"+o),a}function fa(t){var e={};if(t){var a=t.indexOf("#");a>=0&&(e.hash=t.substr(a),t=t.substr(0,a));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}var pr=ve({state:{activeRoute:"",currentPath:"",queryParams:{},availableRoutes:[],defaultRoute:""},actions:{push:()=>{},replace:()=>{},setAvailableRoutes:()=>[]}});function Me(){return xe(pr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le)}function Lt(t){return t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:t.startsWith("/")?`#${t}`:t===""?"#/":`${window.location.hash}/${t}`}function Io(t){let{currentPath:e,path:a,availableRoutes:r,defaultRoute:i,isDefault:l=!1,exact:o=!1}=t;const d=new RegExp(`^${a}`).exec(e);if(!d&&!l)return null;const c=d==null?void 0:d[0];return l&&r.filter(p=>e.startsWith(p)).length<=1?i:o&&e!==c?null:c}function ht(t){let{component:e,path:a,exact:r=!1,isDefault:i=!1}=t;const{availableRoutes:l,currentPath:o,defaultRoute:d}=Me(c=>{let{state:p}=c;return p});return Io({currentPath:o,availableRoutes:l,defaultRoute:d,path:a,exact:r,isDefault:i})?e:null}const hr=ve({actions:{},state:{}});function gr(){return xe(hr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le)}function xo(t){let{children:e}=t;const[a,r]=s.useState(!1),i=s.useCallback(()=>{r(!a)},[a]),l=s.useMemo(()=>({actions:{toggleSideBar:i},state:{sideBarVisible:a}}),[a,i]);return n.createElement(hr.Provider,{value:l},e)}const gt=y.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),Lo=y(Ne).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),ba=y.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),ya=y.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),Ea=ne(["span{color:",";}svg path{stroke:",";}"],t=>{let{theme:e}=t;return e.colors.interactiveFg.brandPress},t=>{let{theme:e}=t;return e.colors.interactiveFg.brandPress}),va=y(ka).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})(t=>{let{active:e,theme:a,isIconLink:r}=t;return ne([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],r&&ne(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),a.colors.fg.secondary,e&&Ea,Ea)}),Oo=y(q.Span).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),Ao=y(q.Paragraph).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})(t=>{let{theme:e}=t;return ne(["color:",";"],e.colors.fg.secondary)});function at(){return at=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},at.apply(this,arguments)}const Ro=y.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);function $o(){const t=Me(f=>{let{state:w}=f;return w.activeRoute}),{newStoryURL:e,version:a,leftRailSecondaryNavigation:r,canViewDefaultTemplates:i,styleConstants:{topOffset:l}}=Q(),o=s.useRef(null),d=s.useRef(null),{state:{sideBarVisible:c},actions:{toggleSideBar:p}}=gr(),u=s.useCallback(f=>{let{target:w}=f;w!==o.current&&w!==d.current&&p()},[p,o,d]),m=s.useCallback(()=>{c&&p()},[p,c]);Pe(o,m,[c]),s.useLayoutEffect(()=>{c&&o.current&&o.current.focus()},[c]);const g=s.useCallback(()=>{he("create_new_story")},[]),E=s.useCallback((f,w)=>{hn(f,w.trackingEvent)},[]);return n.createElement(wo,{onClickCapture:u,ref:o,isOpen:c,topOffset:l,role:"navigation","aria-label":h("Main dashboard navigation","web-stories")},n.createElement("div",{ref:d},n.createElement(Lo,{forwardedAs:"h2"},n.createElement(os,{title:h("Web Stories Dashboard","web-stories")})),n.createElement(gt,null,n.createElement(Mt,{type:se.Quaternary,size:de.Small,href:e,onClick:g},h("Create New Story","web-stories"))),n.createElement(gt,null,n.createElement(ba,null,zs.map(f=>{let{Icon:w,...v}=f;return v.value===J.TEMPLATES_GALLERY&&!i?null:n.createElement(ya,{key:v.value},n.createElement(va,at({active:t===v.value,href:Lt(v.value),size:N.Small,isBold:!0,isIconLink:!!w,"aria-label":t===v.value?A(h("%s (active view)","web-stories"),v.label):v.label},v.isExternal&&{rel:"noreferrer",target:"_blank",onClick:_=>E(_,v)}),n.createElement(Ro,null,w&&n.createElement(w,{width:"22px"})),n.createElement(Oo,{size:N.Small,isBold:!0},v.label)))})))),n.createElement(gt,null,r&&n.createElement(ba,null,r.map(f=>n.createElement(ya,{key:f.value},n.createElement(va,at({active:t===f.value,href:Lt(f.value),size:N.Small,"aria-label":t===f.value?A(h("%s (active view)","web-stories"),f.label):f.label},f.isExternal&&{rel:"noreferrer",target:"_blank",onClick:w=>E(w,f)}),n.createElement(q.Span,{size:N.Small,isBold:!0},f.label))))),n.createElement(Ao,{size:N.XSmall},A(h(" %1$s Google Version %2$s","web-stories"),new Date().getFullYear(),a))))}var wa;function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ot.apply(this,arguments)}const Do=s.memo(t=>{let{title:e,titleId:a,...r}=t;return s.createElement("svg",Ot({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,wa||(wa=s.createElement("path",{fill:"currentColor",d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})))}),ko=y(Do).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],t=>{let{theme:e}=t;return e.colors.interactiveFg.brandNormal}),Mo=y.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],t=>{let{theme:e}=t;return e.borders.radius.small},kt,t=>{let{showOnlyOnSmallViewport:e}=t;return e&&ne(["display:none;@media screen and (max-width:","px){display:inline-block;}"],be)});function Po(t){let{showOnlyOnSmallViewport:e}=t;const{actions:a}=gr();return n.createElement(Mo,{onClick:a.toggleSideBar,showOnlyOnSmallViewport:e,"aria-label":h("Toggle main navigation","web-stories")},n.createElement(ko,{"aria-hidden":!0}))}const No=y(ce).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})(t=>{let{$isVisible:e,theme:a}=t;return ne(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],a.colors.opacity.white64,e?"auto":"none",Number(e))}),Fo=y(gn).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),fr=()=>{const[t,e]=s.useState(!1),{actions:{scrollToTop:a}}=ur(),r=Ee(()=>e(window.scrollY>0),100);return s.useEffect(()=>(window.addEventListener("scroll",r,{passive:!0}),function(){window.removeEventListener("scroll",r,{passive:!0})}),[r]),n.createElement(No,{disabled:!t,"aria-label":h("Scroll back to top","web-stories"),"data-testid":"scroll-to-top-button",$isVisible:t,onClick:a,variant:Ye.Circle},n.createElement(Fo,{"aria-hidden":!0}))},Bo=y.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],fn((t,e)=>{let{paragraph:a}=t,{Small:r}=e;return a[r]})),jo=y.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),Uo=y.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],t=>{let{theme:e}=t;return e.colors.bg.secondary}),Vo=y(Uo).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],t=>{let{theme:e}=t;return e.colors.bg.secondary},t=>{let{topOffset:e}=t;return`${e}px`},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e}=t;return e.borders.radius.small}),Oe=y.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),Go=y(Oe).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),Sa=y(Oe).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),zo=y(Oe).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],t=>{let{theme:e}=t;return e.breakpoint.tabletMax}),Ho=y(Oe).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Yo=y(Oe).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]);y(Oe).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]);const br=y.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],t=>{let{theme:e}=t;return e.breakpoint.tabletMax}),ge=y.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;word-break:break-word;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,t=>{let{theme:e}=t;return e.colors.standard.black}),Wo=y(ge).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],t=>{let{theme:e}=t;return e.colors.fg.secondary},t=>{let{theme:e}=t;return e.breakpoint.tabletMax});y(ge).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]);y(ge).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]);const qo=y(ge).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],Je[ue.THUMBNAIL]);function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},At.apply(this,arguments)}function Ut(t){let{placement:e=ot.Bottom,...a}=t;const{isRTL:r}=Q(),i=r?yn[e]:e;return n.createElement(bn,At({placement:i},a))}const Ko=y.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),Xo=y.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],t=>{let{theme:e}=t;return e.borders.radius.small},kt,t=>{let{theme:e}=t;return e.colors.interactiveFg.hover},t=>{let{theme:e}=t;return e.colors.interactiveFg.active});function Jo(t){let{onPress:e,layoutStyle:a}=t;return n.createElement(Ko,null,n.createElement(Ut,{title:da[a],placement:ot.BottomEnd,hasTail:!0},n.createElement(Xo,{"aria-label":da[a],onClick:e},a===ee.GRID&&n.createElement(En,{height:"32px",width:"32px","data-testid":"list-icon"}),a===ee.LIST&&n.createElement(vn,{height:"32px",width:"32px","data-testid":"grid-icon"}))))}const Zo=t=>{let{availableRoutes:e,currentPath:a,defaultRoute:r}=t;return e.filter(i=>a.startsWith(i)).length<=1?r:a};function Qo(t){let{children:e,...a}=t;const r=s.useRef(a.history||_o()),[i,l]=s.useState(r.current.location.pathname),[o,d]=s.useState([]),c=J.DASHBOARD,p=s.useMemo(()=>Zo({availableRoutes:o,currentPath:i,defaultRoute:c}),[o,i,c]),u=f=>{const w=new URLSearchParams(f);return Object.fromEntries(w)},[m,g]=s.useState(u(r.current.location.search));s.useEffect(()=>r.current.listen(f=>{let{location:w}=f;g(u(w.search)),l(w.pathname)}),[]);const E=s.useMemo(()=>({state:{activeRoute:p,currentPath:i,queryParams:m,availableRoutes:o,defaultRoute:c},actions:{push:f=>r.current.push(f),replace:f=>r.current.replace(f),setAvailableRoutes:d}}),[p,o,i,c,m]);return n.createElement(pr.Provider,{value:E},e)}const ei=$t(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),ti=$t(["*:focus{outline:none !important;}"]),ai=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],ri=()=>{const[t,e]=s.useState(!1),a=i=>{!t&&ai.includes(i.key)&&e(!0)},r=()=>{t&&e(!1)};return s.useEffect(()=>(document.addEventListener("keydown",a),document.addEventListener("mousedown",r),function(){document.removeEventListener("keydown",a),document.removeEventListener("mousedown",r)})),s.useEffect(()=>{document.body.classList.toggle(Gs,t)},[t]),t?null:n.createElement(ti,null)},Ta=t=>Math.round(t/Sn),_a=t=>t<=be?ue.TABLET:ue.DESKTOP,ni=(t,e)=>{let{bp:a,respectSetWidth:r,availableContainerSpace:i}=e;if(r)return{width:t,height:Ta(t)};a===ue.DESKTOP&&(i-=Xe);const l=Math.floor(i/t),o=t+(i-(t*l+It.COLUMN_GAP*(l-1)+2*Bt.GUTTER))/l;return{width:o,height:Ta(o)}},Ca=t=>window.innerWidth<be?be:t;function yr(){var g;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{thumbnailMode:e=!1,isGrid:a}=t,{containerId:r}=Q(),i=s.useRef(document.getElementById(r)),[l,o]=s.useState(window.innerWidth),[d,c]=s.useState(_a(l)),[p,u]=s.useState(Ca(((g=i.current)==null?void 0:g.offsetWidth)||window.innerWidth)),m=Ee(E=>{o(E)},500);return s.useEffect(()=>{c(_a(l))},[l]),wn(i,E=>{let{width:f}=E;u(Ca(f)),window.innerWidth!==l&&m(window.innerWidth)},[u,l,m]),s.useMemo(()=>({pageSize:ni(Je[e?ue.THUMBNAIL:d],{respectSetWidth:!a||e,availableContainerSpace:p,bp:d})}),[d,a,e,p])}function si(t){let{filtersObject:e=Ct.filters,sortObject:a=Ct.sort,isLoading:r=!1,totalPages:i}=t;const[l,o]=s.useState(ee.GRID),[d,c]=s.useState(a),[p,u]=s.useState(e),[m,g]=s.useState(1),E=s.useRef(!1),[f,w]=s.useState(!1),{pageSize:v}=yr({thumbnailMode:l===ee.LIST,isGrid:l===ee.GRID}),_=s.useCallback(L=>{g(Fa(L,{MIN:1,MAX:i}))},[i]),T=s.useCallback(L=>{c(L),_(1)},[_]),S=s.useCallback(L=>{u(L),_(1)},[_]),C=s.useCallback(()=>{const L=l===ee.LIST?ee.GRID:ee.LIST;o(L)},[l,o]),O=s.useCallback(()=>{E.current=!0,_(m+1)},[m,_]);return s.useEffect(()=>{var L;(L=p==null?void 0:p.search)!=null&&L.length&&he("search",{search_type:"dashboard_stories",search_term:p.search,search_filter:p.status,search_author_filter:p.author,search_order:d.order,search_orderby:d.orderby,search_view:l})},[p,d,l]),s.useEffect(()=>{r||(E.current=!1)},[r]),s.useEffect(()=>{i&&!f&&w(!0)},[i,f]),s.useEffect(()=>{f&&S(e)},[S,f,e]),s.useEffect(()=>{f&&T(a)},[T,f,a]),s.useMemo(()=>({view:{style:l,toggleStyle:C,pageSize:v},sort:{value:d.orderby,direction:d.order,set:T},filters:{value:p,set:S},page:{value:m,set:g,requestNextPage:O},initialPageReady:f,showStoriesWhileLoading:E}),[l,C,v,d,T,p,S,f,m,O])}b.shape({style:b.oneOf(Object.values(ee)),toggleStyle:b.func,pageSize:nr}),b.shape({filterId:b.number,toggleFilterId:b.func,queriedAuthors:b.arrayOf(b.shape({id:b.number,name:b.string})).isRequired,setQueriedAuthors:b.func}),b.shape({value:b.oneOfType([b.number,b.string]),set:b.func}),b.shape({value:b.oneOf(Object.values(k)),set:b.func,direction:b.oneOf(Object.values(te)),setDirection:b.func}),b.shape({value:b.number,set:b.func,requestNextPage:b.func}),b.shape({keyword:b.string,setKeyword:b.func}),b.shape({current:b.bool});function oi(t){let{totalPages:e,sortObject:a=Ke.sort,filtersObject:r=Ke.filters}=t;const[i,l]=s.useState(a),[o,d]=s.useState(r),[c,p]=s.useState(1),{pageSize:u}=yr({isGrid:!0}),m=s.useCallback(w=>{p(Fa(w,{MIN:1,MAX:e}))},[e]),g=s.useCallback(()=>m(c+1),[c,m]),E=s.useCallback(w=>{l(w),m(1)},[m]),f=s.useCallback(w=>{d(w),m(1)},[m]);return s.useMemo(()=>({view:{style:ee.GRID,pageSize:u},sort:{value:i.orderby,direction:i.order,set:E},filters:{value:o,set:f},page:{value:c,set:p,requestNextPage:g}}),[u,i,E,c,g,o,f])}b.shape({style:b.oneOf(Object.values(ee)),pageSize:nr}),b.shape({value:b.oneOfType([b.number,b.string]),set:b.func}),b.shape({value:b.number,set:b.func,requestNextPage:b.func}),b.shape({keyword:b.string,setKeyword:b.func}),b.shape({value:b.oneOf(Object.values(Ie)),set:b.func});const ii=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});function li(t){let{config:e,children:a}=t;const r=Tn(ii(),e),i={...We,colors:_n},{isRTL:l,flags:o,styleConstants:{leftOffset:d,topOffset:c}={}}=r;return n.createElement(Cn,{features:o},n.createElement(Fr,{stylisPlugins:l?[Ba]:[]},n.createElement($a,{theme:i},n.createElement(In,null),n.createElement(xn,null),n.createElement(Ls,{config:r},n.createElement(to,null,n.createElement(xo,null,n.createElement(Qo,null,n.createElement(Ln,null,n.createElement(On,{value:{isRTL:l,leftOffset:d,topOffset:c}},n.createElement(ei,null),n.createElement(ri,null),a)))))))))}Object.defineProperty(Ba,"name",{value:"stylisRTLPlugin"});function ci(t){return A(h("Poster of template page %s","web-stories"),t)}function di(t){let{galleryPosters:e,isRTL:a,galleryLabel:r}=t;const[i,l]=s.useState(0),[o,d]=s.useState(),c=s.useRef(),p=s.useRef(),u=s.useRef({}),m=s.useCallback(f=>{l(f),d(f)},[]),g=s.useCallback(f=>{d(f)},[]);s.useEffect(()=>{e&&(l(0),d())},[e]),Pt({containerRef:c,gridRef:p,itemRefs:u,isRTL:a,currentItemId:o,items:e});const E=s.useMemo(()=>e.map((f,w)=>{const v=`gallery_item_${w}`,_=w+1,T=o?o===w:i===w;return n.createElement("div",{key:v,ref:S=>{u.current[w]=S},onFocus:()=>g(w)},n.createElement(ar,{$isSelected:i===w,tabIndex:T?0:-1,onClick:()=>m(w),"aria-label":A(h(i===w?"Page %s (current page)":"Page %s","web-stories"),_)},n.createElement("picture",null,n.createElement("source",{srcSet:f.webp,type:"image/webp"}),n.createElement("source",{srcSet:f.png,type:"image/png"}),n.createElement("img",{src:f.png,decoding:"async",alt:ci(_),width:tt,height:et}))))}),[e,i,o,g,m]);return n.createElement(ao,{ref:c},n.createElement(ro,{ref:p,role:"group","aria-label":r,"data-testid":"mini-cards-container"},E),n.createElement(tr,null,e[i]&&n.createElement("picture",null,n.createElement("source",{srcSet:e[i].webp,type:"image/webp"}),n.createElement("source",{srcSet:e[i].png,type:"image/png"}),n.createElement("img",{src:e[i].png,decoding:"async",alt:A(h("Active Page Preview - Page %s","web-stories"),i+1),width:tt,height:et}))))}function ke(){return ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ke.apply(this,arguments)}const ui=t=>{let{onClose:e,onSecondary:a,onPrimary:r,primaryText:i,secondaryText:l,primaryRest:o,secondaryRest:d,actions:c,children:p,...u}=t;const m=s.useMemo(()=>i&&n.createElement(ce,ke({type:se.Primary,size:de.Small,onClick:()=>r==null?void 0:r()},o),i),[i,o,r]),g=s.useMemo(()=>l&&n.createElement(ce,ke({type:se.Tertiary,size:de.Small,onClick:()=>(a==null?void 0:a())||e()},d),l),[l,d,a,e]);return n.createElement($a,{theme:We},n.createElement(An,ke({onClose:e},u,{actions:c||n.createElement(n.Fragment,null,g,m)}),p))},ye={Provider:ho,Scrollable:fo,Fixed:yo},Vt="UPDATE_FILTER",Gt="UPDATE_SORT",zt="REGISTER_FILTERS",Er=(t,e)=>{let{type:a,payload:r={}}=e;switch(a){case Vt:{const i=["search","status"],{key:l,value:o}=r,d=t.filters.find(m=>m.key===l);if(!d)return t;if(o.filterId&&(d==null?void 0:d.filterId)===o.filterId){if(i.includes(l))return t;o.filterId=null}const c=t.filters.indexOf(d),p=[...t.filters];p[c]={...d,...o};const u={};for(const m of p)m.filterId&&(u[m.key]=m.filterId);return{...t,filters:p,filtersObject:u}}case Gt:{const{type:i,values:l}=r,o={},d=i==="story"?Ds:js;for(const c in l)c in d&&Object.values(d[c]).includes(l[c])&&t.sortObject[c]!==l[c]&&(o[c]=l[c]);return Object.entries(o).length===0?t:{...t,sortObject:{...t.sortObject,...o}}}case zt:{const{value:i}=r,l=t.filters.map(d=>d.key),o=i.filter(d=>!l.includes(d.key));return o.length?{...t,filters:[...o,...t.filters]}:t}default:return t}};function Ae(){return xe(Qa,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le)}const ft={};function mi(){const{getTaxonomies:t,getTaxonomyTerms:e}=Ae(i=>{let{actions:{taxonomyApi:{getTaxonomies:l,getTaxonomyTerms:o}}}=i;return{getTaxonomies:l,getTaxonomyTerms:o}}),a=s.useCallback(async(i,l)=>{const{restBase:o,restPath:d}=i;return(await e(d,{search:l,per_page:-1})).map(c=>({...c,restBase:o,restPath:d}))},[e]),r=s.useCallback(async i=>{const{restBase:l}=i;return ft[l]||(ft[l]=await a(i)),ft[l]},[a]);return s.useCallback(async()=>(await t({hierarchical:!0,show_ui:!0})).map(i=>({key:i.restBase,restPath:i.restPath,placeholder:i.labels.allItems,ariaLabel:i.labels.filterByItem,noMatchesFoundLabel:i.labels.notFound,searchPlaceholder:i.labels.searchItems,query:l=>a(i,l),getPrimaryOptions:()=>r(i)})),[a,r,t])}let bt=null;function pi(){const{getAuthors:t}=Ae(r=>{let{actions:{usersApi:{getAuthors:i}}}=r;return{getAuthors:i}}),e=s.useCallback(async r=>(await t(r)).map(i=>{let{id:l,name:o}=i;return{id:l,name:o}}),[t]),a=s.useCallback(async()=>(bt||(bt=await e()),bt),[e]);return s.useCallback(()=>({key:"author",ariaLabel:h("Filter stories by author","web-stories"),placeholder:h("All Authors","web-stories"),searchPlaceholder:h("Search Authors","web-stories"),noMatchesFoundLabel:h("No authors found","web-stories"),query:e,getPrimaryOptions:a}),[e,a])}const vr=ve({state:{},actions:{}});function hi(t){let{children:e}=t;const a=mi(),r=pi(),[i,l]=s.useReducer(Er,{filters:[],filtersObject:{},sortObject:{}}),o=s.useCallback(m=>{l({type:Gt,payload:{type:"story",values:m}})},[]),d=s.useCallback((m,g)=>{l({type:Vt,payload:{key:m,value:g}})},[]),c=s.useCallback(m=>{l({type:zt,payload:{value:m}})},[]),p=s.useCallback(async()=>{const m=[...await a(),r()].filter(g=>!!g);m.length&&c(m)},[c,r,a]),u=s.useMemo(()=>({state:i,actions:{updateFilter:d,updateSort:o,registerFilters:c}}),[i,d,o,c]);return s.useEffect(()=>{p()},[p]),n.createElement(vr.Provider,{value:u},e)}function Fe(){return xe(vr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le)}const gi=y(Rn).withConfig({displayName:"sortDropDown__StyledDropDown",componentId:"sc-lqi6ue-0"})(["width:210px;"]);function fi(t){let{pageSortOptions:e,pageSortDefaultOption:a,currentSort:r,handleSortChange:i}=t;const l=s.useCallback((o,d)=>{i({orderby:d})},[i]);return n.createElement(gi,{ariaLabel:h("Choose sort option for display","web-stories"),options:e,type:mo.DropDown,selectedValue:(r==null?void 0:r.orderby)||a,onMenuItemClick:l})}const bi=y.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["display:grid;gap:1rem;min-height:76px;grid-template-columns:1fr auto auto;justify-content:start;align-items:center;margin-top:-10px;"]),Ia=y.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),yi=y.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;flex-wrap:wrap;margin:1rem 0;row-gap:1rem;justify-self:end;"]),Ei=y.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-3"})([""]),vi=y($n).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-4"})(["max-width:","px;"],350);function wr(t){let{handleLayoutSelect:e,resultsLabel:a,layoutStyle:r,pageSortOptions:i=[],pageSortDefaultOption:l,showGridToggle:o,showSortDropdown:d,filters:c=[],currentSort:p,handleSortChange:u}=t;const{updateFilter:m}=Fe(g=>{let{actions:{updateFilter:E}}=g;return{updateFilter:E}});return n.createElement(it,null,n.createElement(Ei,{id:"body-view-options-header"}),n.createElement(bi,null,n.createElement(q.Span,{size:N.Small},n.createElement(Dn,null,a)),n.createElement(yi,null,c!=null&&c.length?c.map(g=>n.createElement(Ia,{key:g.key,title:g.placeholder},n.createElement(vi,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:h("Search results","web-stories"),"aria-label":g.ariaLabel,onChange:E=>{let{id:f}=E;m(g.key,{filterId:f})},getOptionsByQuery:g.query,getPrimaryOptions:g.getPrimaryOptions,selectedId:g.filterId,placeholder:g.placeholder,noMatchesFoundLabel:g.noMatchesFoundLabel,searchPlaceholder:g.searchPlaceholder,offsetOverride:!0,maxWidth:350,containerStyleOverrides:ne(["flex-direction:column;"])}))):null,d&&n.createElement(Ia,null,n.createElement(fi,{pageSortOptions:i,pageSortDefaultOption:l,currentSort:p,handleSortChange:u}))),o&&n.createElement(Jo,{layoutStyle:r,onPress:e})))}const wi=y.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),Si=y(is).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);function Sr(t){let{children:e}=t;return n.createElement(wi,null,n.createElement(Si,{"aria-hidden":!0,width:274,height:118}),e)}const Ti=y(it).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],t=>{let{theme:e}=t;return e.colors.divider.secondary}),_i=y(Ha).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),Ci=y.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),Ii=y.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),Ht=t=>{let{children:e,heading:a,searchPlaceholder:r,searchOptions:i=[],showSearch:l,handleSearchChange:o,searchValue:d,onClear:c=ja}=t;return n.createElement(Ti,null,n.createElement(_i,{as:"h2",size:N.Small},n.createElement(Po,{showOnlyOnSmallViewport:!0}),a),e&&n.createElement(Ci,null,e),l&&n.createElement(Ii,null,n.createElement(rs,{placeholder:r,searchValue:d,options:i,handleSearchValueChange:o,onClear:c,emptyText:h("No options available","web-stories")})))},Ce=t=>t===""?h("Untitled","web-stories"):t,Tr=()=>{},_r=t=>{let{menuItems:e,story:a,isLocked:r}=t;const i=e.default?()=>e.default(a):Tr;return e.filter(l=>l.isEnabled===void 0||l.isEnabled(a)).map(l=>{let{capability:o,value:d,...c}=l;const p=(m=>e.find(g=>(g==null?void 0:g.value)===m))(d),u={onClick:p?()=>p.action(a):i};switch(d){case Y.OPEN_IN_EDITOR:u.href=a.bottomTargetAction,u.openNewTab=!1;break;case Y.OPEN_STORY_LINK:u.href=a.previewLink,u.openNewTab=!0;break;case Y.RENAME:case Y.DELETE:u.disabled=r}return c==null||delete c.action,{...c,...u}})},xi=y.div.withConfig({displayName:"components__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],t=>{let{theme:e}=t;return e.colors.gradient.placeholder},Je[ue.THUMBNAIL],Je[ue.THUMBNAIL]/(3/4),t=>{let{theme:e}=t;return e.borders.radius.small}),Li=y.div.withConfig({displayName:"components__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),Oi=y(Ua).withConfig({displayName:"components__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],t=>{let{theme:e}=t;return e.colors.interactiveBg.brandNormal},t=>{let{theme:e}=t;return e.colors.standard.white},t=>{let{theme:e}=t;return e.borders.radius.round}),Ai=y(br).withConfig({displayName:"components__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],le,le),Ri=y.div.withConfig({displayName:"components__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],le,le,le);function $i(t){window.getSelection().selectAllChildren(t.target)}function Di(){window.getSelection().removeAllRanges()}const ki=t=>{var u;let{story:e,renameStory:a,userId:r,storyMenu:i,storyStatus:l}=t;const o=s.useMemo(()=>(e==null?void 0:e.locked)&&r!==(e==null?void 0:e.lockUser.id),[e,r]),d=Ce(e.title),c=s.useMemo(()=>_r({menuItems:i.menuItems,story:e,isLocked:o}),[i,e,o]),p=s.useMemo(()=>c.length?n.createElement(lr,{menuLabel:A(h("Context menu for %s","web-stories"),d),onMoreButtonSelected:(m,g)=>i.handleMenuToggle(g),contextMenuId:i.contextMenuId,storyId:e.id,menuItems:c,verticalAlign:"center"}):null,[c,d,i,e]);return n.createElement(Ai,{"data-testid":`story-list-item-${e.id}`},n.createElement(qo,null,n.createElement(Ut,{title:o&&(e!=null&&e.lockUser.name)?A(h("%s is currently editing this story","web-stories"),e==null?void 0:e.lockUser.name):""},n.createElement(Li,null,n.createElement(xi,e.featuredMediaUrl?{src:e.featuredMediaUrl,alt:A(h("%s Poster image","web-stories"),d),as:"img",decoding:"async"}:null),o&&n.createElement(Oi,null)))),n.createElement(ge,null,n.createElement(Ri,null,a.id===e.id?n.createElement(cr,{onEditComplete:m=>a.handleOnRenameStory(e,m),onEditCancel:a.handleCancelRename,value:e.title,id:e.id,label:h("Rename story","web-stories")}):n.createElement(n.Fragment,null,n.createElement(Ne,{tabIndex:0,onFocus:$i,onBlur:Di,size:N.XXXSmall,as:"h3","aria-label":o?A(h("%1$s (locked by %2$s)","web-stories"),d,e==null?void 0:e.lockUser.name):d},d),p))),n.createElement(ge,null,n.createElement(q.Span,{size:N.Small},((u=e.author)==null?void 0:u.name)||"")),n.createElement(ge,null,n.createElement(q.Span,{size:N.Small},St(e.createdGmt))),n.createElement(ge,null,n.createElement(q.Span,{size:N.Small},St(e.modifiedGmt))),l!==D.DRAFT&&n.createElement(Wo,null,n.createElement(q.Span,{size:N.Small},Ms[e==null?void 0:e.status])))},{focusableOutlineCSS:Mi}=kn,Pi=y.div.withConfig({displayName:"components__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),Cr=y.div.withConfig({displayName:"components__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],t=>{let{theme:e}=t;return e.colors.fg.primary},t=>{let{active:e}=t;return e?"visible":"hidden"},t=>{let{asc:e}=t;return e&&ne(["transform:rotate(180deg);"])}),Ni=y.div.withConfig({displayName:"components__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),yt=y(Cr).withConfig({displayName:"components__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],t=>{let{active:e}=t;return!e&&"display: none;"},t=>{let{theme:e}=t;return e.breakpoint.mobile}),$e=y(q.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"components__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],t=>{let{theme:e}=t;return e.colors.blue[70]},t=>{let{theme:e}=t;return Mi(e.colors.border.focus,e.colors.bg.secondary)}),Fi={[te.DESC]:te.ASC,[te.ASC]:te.DESC};function Bi(t){let{hideStoryList:e,renameStory:a,stories:r,storyMenu:i}=t;const{userId:l,styleConstants:{topOffset:o}}=Q(),{filters:d,sortObject:c,updateSort:p}=Fe(v=>{let{state:{filters:_,sortObject:T},actions:{updateSort:S}}=v;return{filters:_,sortObject:T,updateSort:S}}),[u,m]=s.useMemo(()=>[c==null?void 0:c.orderby,c==null?void 0:c.order],[c]),g=s.useMemo(()=>d.filter(v=>{let{key:_}=v;return _==="status"}).filterId,[d]),E=s.useCallback(v=>{p(v!==u?{orderby:v,order:Ka[v]}:{order:Fi[m]})},[p,u,m]),f=s.useCallback((v,_)=>{let{key:T}=v;T==="Enter"&&E(_)},[E]),w=s.useMemo(()=>!e&&r.map(v=>n.createElement(ki,{key:`story-${v.id}`,story:v,userId:l,renameStory:a,storyStatus:g,storyMenu:i})),[e,a,r,g,i,l]);return n.createElement(Pi,{"data-testid":"story-list-view"},n.createElement(Bo,{"aria-label":h("List view of created stories","web-stories")},n.createElement(Vo,{topOffset:o},n.createElement(br,null,n.createElement(Go,{onClick:()=>E(k.NAME),onKeyDown:v=>f(v,k.NAME)},n.createElement($e,{"aria-label":h("Title, select to sort table by story title","web-stories"),size:N.Small,isBold:!0},h("Title","web-stories"))),n.createElement(Yo,{onClick:()=>E(k.NAME),onKeyDown:v=>f(v,k.NAME)},n.createElement($e,{"aria-hidden":!0,active:u===k.NAME,size:N.Small,isBold:!0},h("Title","web-stories")),n.createElement(Cr,{active:u===k.NAME,asc:m===te.ASC},n.createElement(Ue,null))),n.createElement(Ho,null,n.createElement($e,{"aria-label":h("Author, select to sort table by story author","web-stories"),onClick:()=>E(k.CREATED_BY),onKeyDown:v=>f(v,k.CREATED_BY),active:u===k.CREATED_BY,size:N.Small,isBold:!0},h("Author","web-stories")),n.createElement(yt,{"aria-hidden":!0,active:u===k.CREATED_BY,asc:m===te.ASC},u===k.CREATED_BY?n.createElement(Ue,null):n.createElement(Ni,null))),n.createElement(Sa,null,n.createElement($e,{"aria-label":h("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>E(k.DATE_CREATED),onKeyDown:v=>f(v,k.DATE_CREATED),active:u===k.DATE_CREATED,size:N.Small,isBold:!0},h("Date Created","web-stories")),n.createElement(yt,{"aria-hidden":!0,active:u===k.DATE_CREATED,asc:m===te.ASC},n.createElement(Ue,null))),n.createElement(Sa,null,n.createElement($e,{"aria-label":h("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>E(k.LAST_MODIFIED),onKeyDown:v=>f(v,k.LAST_MODIFIED),active:u===k.LAST_MODIFIED,size:N.Small,isBold:!0},h("Last Modified","web-stories")),n.createElement(yt,{"aria-hidden":!0,active:u===k.LAST_MODIFIED,asc:m===te.ASC},n.createElement(Ue,null))),g!==D.DRAFT&&n.createElement(zo,null,n.createElement(q.Span,{isBold:!0,size:N.Small},h("Publish State","web-stories"))))),n.createElement(jo,null,w)))}const rt=y.div.withConfig({displayName:"components__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return e.colors.gradient.posterOverlay}),nt=y.div.withConfig({displayName:"components__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return e.colors.opacity.black3}),Ir=y.div.withConfig({displayName:"components__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),xr=y.div.withConfig({displayName:"components__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return e.colors.gradient.placeholder}),Lr=y(jt).withConfig({displayName:"components__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],t=>{let{$posterHeight:e}=t;return`${e}px auto`});Lr.propTypes={$posterHeight:b.number};const ji=y.div.withConfig({displayName:"components__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),Ui=y.a.withConfig({displayName:"components__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return`4px solid ${e.colors.interactiveBg.active}`}),Vi=y.div.withConfig({displayName:"components__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),Or=y.div.withConfig({displayName:"components__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),Gi=y(Or).withConfig({displayName:"components__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),zi=y.div.withConfig({displayName:"components__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),xa=y.div.withConfig({displayName:"components__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;align-items:space-between;flex-direction:column;align-self:flex-end;"]),Hi=y(Ne).attrs({as:"h3",size:N.XSmall}).withConfig({displayName:"components__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],t=>{let{theme:e}=t;return e.colors.inverted.fg.primary}),Ge=y(q.Span).attrs({size:N.XSmall}).withConfig({displayName:"components__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],t=>{let{theme:e}=t;return e.colors.inverted.fg.primary}),Yi=y.img.withConfig({displayName:"components__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],t=>{let{theme:e}=t;return`2px solid ${e.colors.interactiveBg.brandNormal}`},t=>{let{theme:e}=t;return e.borders.radius.small}),Wi=y(Ua).withConfig({displayName:"components__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],t=>{let{theme:e}=t;return e.colors.inverted.fg.primary}),qi=t=>{let{author:e,contextMenu:a,displayDate:r,editMode:i,formattedTitle:l,id:o,isLocked:d,lockUser:c={},onEditComplete:p,onEditCancel:u,status:m,title:g}=t;const E=s.useMemo(()=>{if(!r)return null;switch(m){case D.PUBLISH:return A(h("Published %s","web-stories"),r);case D.FUTURE:return A(h("Scheduled %s","web-stories"),r);default:return A(h("Modified %s","web-stories"),r)}},[m,r]),{name:f,avatar:w}=c,v=d&&w&&n.createElement(Gi,null,n.createElement(Ut,{position:ot.BottomStart,title:f&&A(h("%s is currently editing this story","web-stories"),f)},n.createElement(Yi,{src:w,alt:f,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"})));return n.createElement(Vi,null,v,i?n.createElement(cr,{onEditComplete:p,onEditCancel:u,value:g,id:o,label:h("Rename story","web-stories"),isInverted:!0}):n.createElement(Or,null,d&&n.createElement(Wi,null),n.createElement(Hi,null,l)),n.createElement(zi,null,n.createElement(xa,null,m===D.DRAFT&&n.createElement(Ge,{isBold:!0},h("Draft","web-stories")),m===D.PENDING&&n.createElement(Ge,{isBold:!0},h("Pending","web-stories")),(e==null?void 0:e.name)&&n.createElement(Ge,null,e==null?void 0:e.name),n.createElement(Ge,{className:"dashboard-grid-item-date"},E)),n.createElement(xa,null,a)))};function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},st.apply(this,arguments)}const Ar=s.forwardRef((t,e)=>{var v,_;let{onFocus:a,isActive:r,pageSize:i,renameStory:l,story:o,storyMenu:d}=t;const{userId:c}=Q(),p=r?0:-1,u=l?{editMode:(l==null?void 0:l.id)===(o==null?void 0:o.id),onEditComplete:T=>l==null?void 0:l.handleOnRenameStory(o,T),onEditCancel:l==null?void 0:l.handleCancelRename}:{},m=s.useMemo(()=>(o==null?void 0:o.locked)&&c!==(o==null?void 0:o.lockUser.id),[o,c]),g=s.useMemo(()=>_r({menuItems:d.menuItems,story:o,isLocked:m}),[d,o,m]),E=St((o==null?void 0:o.status)===D.DRAFT?o==null?void 0:o.modifiedGmt:o==null?void 0:o.createdGmt),f=Ce(o.title),w=s.useMemo(()=>g.length?n.createElement(lr,{menuLabel:m?A(h("Context menu for %1$s (locked by %2$s)","web-stories"),f,o==null?void 0:o.lockUser.name):A(h("Context menu for %s","web-stories"),f),itemActive:r,tabIndex:p,onMoreButtonSelected:d.handleMenuToggle,contextMenuId:d.contextMenuId,storyId:o.id,isInverted:!0,menuItems:g,menuStyleOverrides:ne(["margin:0 0 0 auto;"])}):null,[m,f,(v=o==null?void 0:o.lockUser)==null?void 0:v.name,o.id,r,p,d,g]);return n.createElement(Lr,{"data-testid":`story-grid-item-${o.id}`,onFocus:a,$posterHeight:i.height,ref:e,"aria-label":A(h("Details about %s","web-stories"),f)},n.createElement(Ir,null,n.createElement(ji,null,n.createElement(xr,st({},o.featuredMediaUrl?{alt:A(h("%s Poster image","web-stories"),f),as:"img",src:o.featuredMediaUrl,decoding:"async"}:null,{width:tt,height:et})),n.createElement(rt,null),n.createElement(nt,null,((_=o==null?void 0:o.capabilities)==null?void 0:_.hasEditAction)&&n.createElement(Ui,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:p,href:o.editStoryLink},n.createElement(Mn,null,A(h("Open %s in Editor","web-stories"),f))),n.createElement(qi,st({author:o.author,contextMenu:w,displayDate:E,formattedTitle:f,id:o.id,isLocked:m,lockUser:o==null?void 0:o.lockUser,status:o==null?void 0:o.status,title:o.title},u))))))});Ar.displayName="StoryGridItem";const Ki=y(or).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],Bt.GUTTER),Xi=t=>{let{stories:e,pageSize:a,storyMenu:r,renameStory:i,returnStoryFocusId:l}=t;const{isRTL:o}=Q(),d=s.useRef(),c=s.useRef(),p=s.useRef({}),[u,m]=s.useState(),g=s.useRef(),E=s.useMemo(()=>e.map(T=>{let{id:S}=T;return S}),[e]);Pt({containerRef:d,gridRef:c,itemRefs:p,isRTL:o,currentItemId:u,items:e}),s.useEffect(()=>{var T,S,C;if(!u&&(l!=null&&l.value)&&!g.current){const O=l==null?void 0:l.value;m(O);const L=(C=(S=(T=p.current)==null?void 0:T[O])==null?void 0:S.querySelectorAll(["button","a"]))==null?void 0:C[0];L==null||L.focus()}},[u,l]),s.useEffect(()=>{u&&(g.current=u)},[u]);const f=s.useCallback((T,S)=>{if(r.handleMenuToggle(S),S<0&&(T==null?void 0:T.keyCode)===9){const C=T!=null&&T.shiftKey?u:E[E.indexOf(u)+1];l.set(C),g.current=null,m(null)}},[u,E,l,r]),w=s.useCallback(()=>{g.current=null,m(null),l.set(null)},[l]);Pe(d,()=>m(null),[]);const v=s.useMemo(()=>{const T=[Y.DELETE,Y.RENAME,Y.DUPLICATE],S=r.menuItems.map(C=>{const O={...C};return T.includes(C==null?void 0:C.value)&&(O.action=L=>{w(),C.action(L)}),O});return{...r,handleMenuToggle:f,menuItems:S}},[f,r,w]),_=s.useMemo(()=>e.map(T=>n.createElement(Ar,{onFocus:()=>m(T.id),isActive:u===T.id,ref:S=>{p.current[T.id]=S},key:T.id,pageSize:a,renameStory:i,story:T,storyMenu:v})),[u,v,a,i,e]);return n.createElement("div",{ref:d},n.createElement(Ki,{pageSize:a,ref:c,role:"list",ariaLabel:h("Viewing stories","web-stories")},_))},La="DELETE_STORY";function Ji(t){let{loading:e,storyActions:a,stories:r,view:i}=t;const[l,o]=s.useState(-1),[d,c]=s.useState(-1),[p,u]=s.useState(""),[m,g]=s.useState(null),[E,f]=s.useState({}),[w,v]=s.useState(null),{showSnackbar:_}=Nt(),T=p===La&&m,S=s.useMemo(()=>r.map($=>{let{id:Z}=$;return Z}),[r]);s.useEffect(()=>{if(E.id&&!w){const $=S.indexOf(E.id),Z=$>0?-1:1,we=E.isDeleted?Z:0,M=S[$+we];M&&v(M)}},[E,w,S]),s.useEffect(()=>{p||g(null)},[p,g]),s.useEffect(()=>{p&&(f({}),v(null))},[p]);const C=s.useCallback(($,Z)=>{c(-1),he("rename_story"),a.updateStory({...$,title:{raw:Z}})},[a]),O=s.useCallback(()=>{he("delete_story"),a.trashStory(m),f({id:m.id,isDeleted:!0}),u("")},[a,m]),L=s.useCallback(()=>{o(-1),he("open_in_editor")},[]),H=s.useCallback($=>{o(-1),c($.id)},[]),I=s.useCallback($=>{o(-1),he("duplicate_story"),a.duplicateStory($),f({id:$.id})},[a]),x=s.useCallback($=>{o(-1),g($),u(La)},[]),R=s.useCallback($=>{o(-1),window.navigator.clipboard.writeText($.link),_({message:A(h("%s has been copied to your clipboard.","web-stories"),Ce($.title)),dismissible:!0}),f({id:$.id})},[_]),j=$s.map($=>{switch($==null?void 0:$.value){case Y.COPY_STORY_LINK:$.action=R;break;case Y.DELETE:$.action=x;break;case Y.DUPLICATE:$.action=I;break;case Y.OPEN_STORY_LINK:$.action=L;break;case Y.RENAME:$.action=H;break;default:$.action=()=>o(-1)}return $}),F=s.useMemo(()=>({handleMenuToggle:o,contextMenuId:l,menuItems:j}),[l,j,o]),V=s.useMemo(()=>({id:d,handleOnRenameStory:C,handleCancelRename:()=>c(-1)}),[C,c,d]),P=s.useMemo(()=>i.style===ee.LIST?n.createElement(Bi,{hideStoryList:(e==null?void 0:e.isLoading)&&!(e!=null&&e.showStoriesWhileLoading.current),pageSize:i.pageSize,renameStory:V,stories:r,storyMenu:F}):!(e!=null&&e.isLoading)||e!=null&&e.isLoading&&(e!=null&&e.showStoriesWhileLoading.current)?n.createElement(Xi,{isLoading:e==null?void 0:e.isLoading,pageSize:i.pageSize,renameStory:V,storyMenu:F,stories:r,returnStoryFocusId:{value:w,set:v}}):null,[e,V,w,r,F,i]);return n.createElement(n.Fragment,null,P,(e==null?void 0:e.isLoading)&&!(e!=null&&e.showStoriesWhileLoading.current)&&n.createElement(mr,null,n.createElement(Va,null)),T&&n.createElement(ui,{isOpen:!0,contentLabel:h("Dialog to confirm deleting a story","web-stories"),title:h("Delete Story","web-stories"),onClose:()=>{f({id:m.id}),u("")},secondaryText:h("Cancel","web-stories"),secondaryRest:{"aria-label":A(h('Cancel deleting story "%s"',"web-stories"),Ce(m.title))},primaryText:h("Delete","web-stories"),onPrimary:O,primaryRest:{"aria-label":A(h('Confirm deleting story "%s"',"web-stories"),Ce(m.title))}},n.createElement(q.Paragraph,{size:N.Small},A(h('Are you sure you want to delete "%s"?',"web-stories"),Ce(m.title)))))}function Rr(t){let{filtersObject:e}=t;const{search:a}=e;return a?A(h(`Sorry, we couldn't find any results matching "%s"`,"web-stories"),a):Object.keys(e).length!==0?h("Sorry, we couldn't find any results","web-stories"):h("Start telling Stories.","web-stories")}function Zi(t){let{allPagesFetched:e,canViewDefaultTemplates:a,filtersObject:r={},loading:i,page:l,stories:o,storyActions:d,view:c}=t;return n.createElement(ye.Scrollable,null,n.createElement(it,null,o.length>0?n.createElement(n.Fragment,null,n.createElement(Ji,{storyActions:d,stories:o,view:c,loading:i}),n.createElement(Ga,{canLoadMore:!e,isLoading:i==null?void 0:i.isLoading,allDataLoadedMessage:h("No more stories","web-stories"),allDataLoadedAriaMessage:h("All stories are loaded","web-stories"),loadingAriaMessage:h("Loading more stories","web-stories"),onLoadMore:l.requestNextPage})):!(i!=null&&i.isLoading)&&n.createElement(Sr,null,n.createElement(Ne,{size:N.Small,as:"h3"},n.createElement(Rr,{filtersObject:r})),Object.keys(r).length===0&&a&&n.createElement(Mt,{type:se.Primary,size:de.Medium,href:Lt(J.TEMPLATES_GALLERY)},h("Explore Templates","web-stories")))))}Rr.propTypes={filtersObject:b.object};function $r(t){let{isActiveSearch:e,currentFilter:a,totalResults:r,view:i}=t;return s.useMemo(()=>{var c;const l=r??0,o=((c=Hs[i])==null?void 0:c[a])||"",d=typeof o=="function"?o(l):o;return e?A(me("%s result","%s results",l,"web-stories"),A("<strong>%s</strong>",l)):d},[e,r,i,a])}function Qi(t){return t.reduce((e,a)=>!a.title||(a==null?void 0:a.title.trim().length)<=0?e:[...e,{label:a.title,value:a.title}],[])}const el=y(Pn).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],t=>{let{theme:e,isActive:a}=t;return a?e.colors.gray[20]:e.colors.fg.tertiary});function tl(t){let{initialPageReady:e,totalStoriesByStatus:a,currentStatus:r}=t;const{updateFilter:i,registerFilters:l}=Fe(p=>{let{actions:{updateFilter:u,registerFilters:m}}=p;return{updateFilter:u,registerFilters:m}}),o=s.useCallback(p=>{i("status",{filterId:p})},[i]);s.useEffect(()=>{l([{key:"status",filterId:Ct.filters.status}])},[l]);const d=s.useMemo(()=>Object.keys(a).reduce((p,u)=>p+a[u],0),[a]),c=s.useMemo(()=>Ps.filter(p=>{let{status:u}=p;return u in a&&a[u]>0||u===r}).map(p=>{let{label:u,status:m,value:g}=p;const E=a[m],f=!E;return{ariaLabel:A(h("Filter stories by %s","web-stories"),u),disabled:f,isActive:r===g,value:g,label:u,count:E}}),[a,r]);return!e||!d||a&&Object.keys(a).length===0?null:n.createElement(n.Fragment,null,c.map(p=>{let{ariaLabel:u,disabled:m,isActive:g,value:E,label:f,count:w}=p;return n.createElement(el,{key:E,onClick:()=>o(E),isActive:g,disabled:m,"aria-label":u},f,n.createElement("span",null,w))}))}var al=s.memo(function(e){let{initialPageReady:a,stories:r,totalStoriesByStatus:i,view:l}=e;const o=s.useMemo(()=>Qi(r),[r]),{filters:d,sortObject:c,updateFilter:p,updateSort:u,registerFilters:m}=Fe(S=>{let{state:{filters:C,sortObject:O},actions:{updateFilter:L,updateSort:H,registerFilters:I}}=S;return{filters:C,updateFilter:L,sortObject:O,updateSort:H,registerFilters:I}}),[g,E,f]=s.useMemo(()=>{const S=d.find(O=>{let{key:L}=O;return L==="status"}),C=d.find(O=>{let{key:L}=O;return L==="search"});return[d.filter(O=>{let{key:L}=O;return!["status","search"].includes(L)}),S==null?void 0:S.filterId,C==null?void 0:C.filterId]},[d]),w=s.useMemo(()=>((E==null?void 0:E.split(","))||[]).reduce((S,C)=>S+(i[C]||0),0),[E,i]),v=$r({currentFilter:E,isActiveSearch:!!f,totalResults:w,view:Qe.DASHBOARD}),_=Ee(async S=>{await he("search",{search_type:"dashboard",search_term:S}),p("search",{filterId:S})},Ja);s.useEffect(()=>{m([{key:"search"}])},[m]);const T=s.useCallback(()=>p("search",{filterId:null}),[p]);return n.createElement(n.Fragment,null,n.createElement(Ht,{heading:h("Dashboard","web-stories"),searchPlaceholder:h("Search Stories","web-stories"),searchOptions:o,handleSearchChange:_,showSearch:a,searchValue:f,onClear:T},n.createElement(tl,{initialPageReady:a,totalStoriesByStatus:i,currentStatus:E})),n.createElement(wr,{showGridToggle:!0,filters:g,showSortDropdown:!0,resultsLabel:v,layoutStyle:l.style,handleLayoutSelect:l.toggleStyle,pageSortOptions:ks,pageSortDefaultOption:k.LAST_MODIFIED,handleSortChange:u,currentSort:c}))});function rl(){const{duplicateStory:t,fetchStories:e,trashStory:a,updateStory:r,allPagesFetched:i,isLoading:l,stories:o,storiesOrderById:d,totalPages:c,totalStoriesByStatus:p}=Ae(C=>{let{actions:{storyApi:{duplicateStory:O,fetchStories:L,trashStory:H,updateStory:I}},state:{stories:{allPagesFetched:x,isLoading:R,stories:j,storiesOrderById:F,totalPages:V,totalStoriesByStatus:P}}}=C;return{duplicateStory:O,fetchStories:L,trashStory:H,updateStory:I,allPagesFetched:x,isLoading:R,stories:j,storiesOrderById:F,totalPages:V,totalStoriesByStatus:P}}),{filtersObject:u,sortObject:m}=Fe(C=>{let{state:{filtersObject:O,sortObject:L}}=C;return{filtersObject:O,sortObject:L}}),{apiCallbacks:g,canViewDefaultTemplates:E}=Q(),f=s.useRef(!1);s.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]);const{page:w,view:v,showStoriesWhileLoading:_,initialPageReady:T}=si({filtersObject:u,sortObject:m,isLoading:l,totalPages:c});s.useEffect(()=>{e({page:w.value,filters:u,sort:m})},[e,u,m,w.value,g]);const S=s.useMemo(()=>d.map(C=>o[C]),[o,d]);return n.createElement(ye.Provider,null,n.createElement(al,{initialPageReady:T,stories:S,totalStoriesByStatus:p,view:v}),n.createElement(Zi,{allPagesFetched:i,canViewDefaultTemplates:E,filtersObject:u,loading:{isLoading:l,showStoriesWhileLoading:_},page:w,stories:S,storyActions:{duplicateStory:t,trashStory:a,updateStory:r},view:v}),n.createElement(ye.Fixed,null,n.createElement(fr,null)))}function nl(){return n.createElement(hi,null,n.createElement(rl,null))}const fe={VERTICAL:"VERTICAL",COLOR:"COLOR",TAG:"TAG",TITLE:"TITLE"};function sl(t){const e=Object.values(t),a=e.flatMap(o=>o.colors).map(o=>({label:o.family,value:o.family,type:fe.COLOR})),r=e.flatMap(o=>o.tags).map(o=>({label:o,value:o,type:fe.TAG})),i=e.map(o=>o.vertical).map(o=>({label:o,value:o,type:fe.VERTICAL})),l=e.map(o=>({label:o.title,value:o.title,type:fe.TITLE}));return[...De(r,"label"),...De(a,"label"),...De(i,"label"),...De(l,"label")]}function ol(t){return e=>!t||t.some(a=>{switch(a==null?void 0:a.type){case fe.TAG:return e.tags.map(r=>r.toLowerCase()).includes(a.value.toLowerCase());case fe.COLOR:return e.colors.map(r=>r.label.toLowerCase()).includes(a.value.toLowerCase());case fe.VERTICAL:return e.vertical.toLowerCase().includes(a.value.toLowerCase());case fe.TITLE:return e.title.toLowerCase().includes(a.value.toLowerCase());default:return!0}})}const Dr=ve({state:{},actions:{}}),{filters:il,sort:ll}=Ke;function cl(t){let{children:e}=t;const[a,r]=s.useReducer(Er,{filters:[],filtersObject:il,sortObject:ll}),i=s.useCallback((c,p)=>{r({type:Vt,payload:{key:c,value:p}})},[]),l=s.useCallback(c=>{r({type:Gt,payload:{type:"template",values:c}})},[]),o=s.useCallback(c=>{r({type:zt,payload:{value:c}})},[]),d=s.useMemo(()=>({state:a,actions:{updateSort:l,updateFilter:i,registerFilters:o}}),[a,l,i,o]);return n.createElement(Dr.Provider,{value:d},e)}function kr(){return xe(Dr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le)}const dl=y.div.withConfig({displayName:"components__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],rt,nt,rt,nt,t=>{let{$isSelected:e}=t;return e?1:0}),ul=y.div.withConfig({displayName:"components__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),ml=y(xr).attrs({as:"picture"}).withConfig({displayName:"components__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],t=>{let{theme:e}=t;return e.borders.radius.medium}),Mr="focus_template",pl=y(ce).attrs({type:se.Tertiary,size:de.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],t=>{let{theme:e}=t;return e.colors.standard.white}),Pr=s.forwardRef((t,e)=>{let{onCreateStory:a,onFocus:r,height:i,id:l,isActive:o,posterSrc:d,slug:c,title:p,status:u,onSeeDetailsClick:m=ja}=t;const g=o?0:-1,E=A(h("First page of %s template","web-stories"),p);return n.createElement(jt,{ref:e,id:`template-grid-item-${l}`,className:"templateGridItem","data-testid":`template-grid-item-${l}`,$posterHeight:i,onFocus:r},n.createElement(Ir,null,n.createElement(dl,{$isSelected:o},n.createElement(ml,null,n.createElement("source",{srcSet:d==null?void 0:d.webp,type:"image/webp"}),n.createElement("source",{srcSet:d==null?void 0:d.png,type:"image/png"}),n.createElement("img",{src:d==null?void 0:d.png,alt:E,decoding:"async",width:tt,height:et})),n.createElement(rt,null),n.createElement(nt,{"data-testid":"card-action-container","data-template-slug":c},n.createElement(ul,null,n.createElement(pl,{ariaLabel:A(h("Go to detail view of %s","web-stories"),p),onClick:()=>m(l,p),className:Mr,tabIndex:g},Vs[u]),a&&n.createElement(ce,{size:de.Small,type:se.Primary,onClick:a,tabIndex:g,ariaLabel:A(h("Create new story from %s","web-stories"),p)},h("Use template","web-stories")))))))});Pr.displayName="TemplateGridItem";function hl(t){let{pageSize:e,templates:a,templateActions:r}=t;const{isRTL:i,apiCallbacks:l}=Q(),o=s.useRef(),d=s.useRef(),c=s.useRef({}),[p,u]=s.useState(null),{handleDetailsToggle:m,createStoryFromTemplate:g}=r||{},E=!!(l!=null&&l.createStoryFromTemplate);Pt({containerRef:o,gridRef:d,itemRefs:c,isRTL:i,currentItemId:p,items:a}),s.useEffect(()=>{var w,v,_;p&&((_=(v=(w=c.current)==null?void 0:w[p])==null?void 0:v.querySelector(`.${Mr}`))==null||_.focus())},[p]),Pe(o,()=>u(null),[]);const f=s.useMemo(()=>a.map(w=>{let{id:v,slug:_,status:T,title:S,postersByPage:C}=w;const O=p===v,L=C==null?void 0:C[0];return n.createElement(Pr,{onCreateStory:E?()=>g(v):Tr,onFocus:()=>{u(v)},onSeeDetailsClick:m,height:e.height,id:v,isActive:O,key:_,posterSrc:L,ref:H=>{c.current[v]=H},slug:_,status:T,title:S})}),[a,p,E,m,e.height,g]);return n.createElement("div",{ref:o},n.createElement(or,{pageSize:e,role:"list",ref:d,ariaLabel:h("Viewing available templates","web-stories")},f))}function gl(t){let{allPagesFetched:e,isLoading:a,page:r,templates:i,view:l,totalTemplates:o,search:d,templateActions:c}=t;const{newStoryURL:p}=Q(),u=s.useMemo(()=>a?n.createElement(mr,null,n.createElement(Va,null)):o>0?n.createElement(n.Fragment,null,n.createElement(hl,{templates:i,pageSize:l.pageSize,templateActions:c}),n.createElement(Ga,{canLoadMore:!e,isLoading:a,allDataLoadedMessage:h("No more templates","web-stories"),allDataLoadedAriaMessage:h("All templates are loaded","web-stories"),loadingAriaMessage:h("Loading more templates","web-stories"),onLoadMore:r.requestNextPage})):n.createElement(Sr,null,n.createElement(Ne,{size:N.Small,as:"h3"},d?A(h(`Sorry, we couldn't find any results matching "%s"`,"web-stories"),d):h("No templates currently available.","web-stories")),!d&&n.createElement(Mt,{type:se.Primary,size:de.Medium,href:p},h("Create New Story","web-stories"))),[e,a,p,r.requestNextPage,c,d,i,o,l.pageSize]);return n.createElement(ye.Scrollable,null,n.createElement(it,null,u))}function fl(t){let{isLoading:e,totalTemplates:a,view:r,searchOptions:i=[]}=t;const l=Nn("enableInProgressTemplateActions"),{filters:o,sortObject:d,updateFilter:c,updateSort:p,registerFilters:u}=kr(v=>{let{state:{filters:_,sortObject:T},actions:{updateFilter:S,updateSort:C,registerFilters:O}}=v;return{filters:_,sortObject:T,updateFilter:S,updateSort:C,registerFilters:O}}),[m,g]=s.useMemo(()=>{const v=o.find(T=>{let{key:S}=T;return S==="status"}),_=o.find(T=>{let{key:S}=T;return S==="search"});return[v==null?void 0:v.filterId,_==null?void 0:_.filterId]},[o]),E=Ee(v=>{c("search",{filterId:v})},Ja);s.useEffect(()=>{u([{key:"search"}]),u([{key:"status",filterId:Ke.filters.status}])},[u]);const f=s.useCallback(()=>c("search",{filterId:null}),[c]),w=$r({totalResults:a,currentFilter:m,view:Qe.TEMPLATES_GALLERY});return n.createElement(n.Fragment,null,n.createElement(Ht,{heading:h("Explore Templates","web-stories"),searchPlaceholder:h("Search Templates","web-stories"),showSearch:!0,searchOptions:i,searchValue:g,handleSearchChange:E,onClear:f}),n.createElement(wr,{resultsLabel:w,layoutStyle:r.style,handleLayoutSelect:r.toggleStyle,isLoading:e,pageSortOptions:Us,pageSortDefaultOption:Ie.POPULAR,currentSort:d,handleSortChange:p,showSortDropdown:l,sortDropdownAriaLabel:h("Choose sort option for display","web-stories")}))}const bl=y.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),yl=y(ce).attrs({type:se.Primary,size:de.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);function El(t){let{templateTitle:e,templateId:a,templateActions:r,canCreateStory:i}=t;const{createStoryFromTemplate:l,handleDetailsToggle:o}=r||{};return n.createElement(bl,null,n.createElement(ce,{type:se.Tertiary,variant:Ye.Square,size:de.Small,"aria-label":h("Close","web-stories"),onClick:o},n.createElement(Fn,null)),i&&n.createElement(yl,{onClick:()=>l(a),"aria-label":A(h("Use %s template to create new story","web-stories"),e)},h("Use template","web-stories")))}const vl=y.section.withConfig({displayName:"components__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),wl=y.div.withConfig({displayName:"components__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),Sl=y.div.withConfig({displayName:"components__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),Tl=y.section.attrs({"aria-label":h("Template Details","web-stories")}).withConfig({displayName:"components__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),_l=y.div.withConfig({displayName:"components__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]);y.section.attrs({"aria-label":h("Related Templates","web-stories")}).withConfig({displayName:"components__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]);const Cl=y(vl).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"]),Il=y(q.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],t=>{let{theme:e}=t;return e.colors.fg.tertiary}),xl=y(q.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),Oa=y.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,t=>{let{alignLeft:e}=t;return e?`
          left: 0;
          transform: translate(-187.5%, -50%);
        `:`
          right: 0;
          transform: translate(187.5%, -50%);
        `}),Ll=y(Bn).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],t=>{let{theme:e}=t;return e.colors.fg.primary}),Aa=y.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);function Ol(t){let{activeTemplateIndex:e,isRTL:a,filteredTemplatesLength:r,switchToTemplateByOffset:i,template:l}=t;const{postersByPage:o,title:d,description:c,tags:p,colors:u}=l||{},[m,g]=s.useState([]);s.useEffect(()=>{o&&g(Object.values(o).map((v,_)=>({id:_,...v})))},[o]);const{NextButton:E,PrevButton:f}=s.useMemo(()=>{const v=a?e-1:e+1,_=a?e+1:e-1,T=a?!r||e===r-1:!r||e===0,S=a?!r||e===0:!r||e===r-1,C=n.createElement(ce,{type:se.Tertiary,size:de.Small,variant:Ye.Square,"aria-label":h("View previous template","web-stories"),onClick:()=>{i(_),g([])},disabled:T},n.createElement(jn,{height:32,width:32})),O=n.createElement(ce,{type:se.Tertiary,size:de.Small,variant:Ye.Square,"aria-label":h("View next template","web-stories"),onClick:()=>{i(v),g([])},disabled:S},n.createElement(Un,{height:32,width:32}));return a?{NextButton:C,PrevButton:O}:{NextButton:O,PrevButton:C}},[r,e,a,i]),w=l?A(h("By %s","web-stories"),l.createdBy):null;return n.createElement(Cl,null,n.createElement(wl,null,n.createElement(Oa,{alignLeft:!0},f),n.createElement(Sl,null,n.createElement(di,{galleryPosters:m,isRTL:a,galleryLabel:h("Template details by page","web-stories")}),n.createElement(_l,null,n.createElement(Tl,null,n.createElement(Ha,{size:N.Small,as:"h3","data-testid":"template-details-title"},d),n.createElement(Il,{size:N.Medium},w),n.createElement(xl,{size:N.Medium},c),n.createElement(Aa,{role:"list","aria-label":h("Template tags","web-stories")},p.map(v=>n.createElement(Ll,{key:v,disabled:!0},v))),n.createElement(Aa,null,n.createElement(uo,{colors:u,size:32,"aria-label":h("Template colors","web-stories")}))))),n.createElement(Oa,null,E)))}function Al(t){let{activeTemplateIndex:e,activeTemplate:a,filteredTemplatesLength:r,isDetailsViewOpen:i,templateActions:l}=t;const{isRTL:o,apiCallbacks:d}=Q(),c=!!(d!=null&&d.createStoryFromTemplate),{handleDetailsToggle:p,switchToTemplateByOffset:u}=l||{};return n.createElement(Vn,{isOpen:i,onClose:p,contentLabel:A(h("Template Details for %s","web-stories"),a==null?void 0:a.title),overlayStyles:{backgroundColor:`${We.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${We.colors.standard.white}`}},n.createElement(El,{templateTitle:a==null?void 0:a.title,templateId:a==null?void 0:a.id,templateActions:l,canCreateStory:c}),n.createElement(Ol,{activeTemplateIndex:e,isRTL:o,filteredTemplatesLength:r,switchToTemplateByOffset:u,template:a}))}function Rl(){const t=Da(),[e,a]=s.useState(!1),[r,i]=s.useState(null),[l,o]=s.useState(0),{templateIdParam:d,replace:c}=Me(M=>{let{actions:U,state:W}=M;return{templateIdParam:W.queryParams.id,replace:U.replace}}),p=s.useRef(d),{allPagesFetched:u,isLoading:m,templates:g,templatesOrderById:E,totalPages:f,totalTemplates:w,createStoryFromTemplate:v,fetchExternalTemplates:_}=Ae(M=>{let{state:{templates:{allPagesFetched:U,isLoading:W,templates:ae,templatesOrderById:lt,totalPages:ct,totalTemplates:dt}},actions:{storyApi:{createStoryFromTemplate:Be},templateApi:{fetchExternalTemplates:Se}}}=M;return{allPagesFetched:U,isLoading:W,templates:ae,templatesOrderById:lt,totalPages:ct,totalTemplates:dt,createStoryFromTemplate:Be,fetchExternalTemplates:Se}}),{filters:T,sortObject:S,filtersObject:C}=kr(M=>{let{state:{filters:U,sortObject:W,filtersObject:ae}}=M;return{filters:U,sortObject:W,filtersObject:ae}}),{page:O,view:L}=oi({filtersObject:C,sortObject:S,totalPages:f}),[H]=s.useMemo(()=>{const M=T.find(U=>{let{key:W}=U;return W==="search"});return[M==null?void 0:M.filterId]},[T]),I=s.useMemo(()=>sl(g),[g]),x=s.useMemo(()=>H?I.filter(M=>M.label.toLowerCase().includes(H.toLowerCase())):I,[I,H]),R=s.useMemo(()=>E.map(M=>g[M]).filter(ol(x)),[E,g,x]),j=s.useMemo(()=>w!==R.length?R.length:w,[R,w]),F=s.useMemo(()=>De(x,"label"),[x]),V=s.useCallback(M=>{const U=g[M];he("use_template",{name:U.title,template_id:U.id}),v(U)},[v,g]),P=s.useCallback(M=>{const U=R.find(W=>W.id===M);i(U),o(R.findIndex(W=>W.id===M)),p.current&&(p.current=void 0),c(`?id=${U.id}&isLocal=${U.isLocal}`)},[c,R]),$=s.useCallback((M,U)=>{a(W=>{const ae=!W;return U&&za(U),ae&&M&&P(M),ae||(c(""),t(h("Exit detail templates view","web-stories"))),ae})},[c,t,P]),Z=s.useCallback(M=>{const U=R[M];i(U),o(M),c(`?id=${U.id}&isLocal=${U.isLocal}`),t(A(h("Viewing %s","web-stories"),U.title))},[R,c,t]),we=s.useMemo(()=>({createStoryFromTemplate:V,handleDetailsToggle:$,switchToTemplateByOffset:Z}),[V,$,Z]);return s.useEffect(()=>{_()},[_]),s.useEffect(()=>{if(p.current&&R.length){if(!R.some(M=>M.id===parseInt(p.current)))return void c("");a(!0),P(parseInt(p.current))}},[R,c,P]),n.createElement(ye.Provider,null,n.createElement(fl,{isLoading:m&&!w,totalTemplates:j,searchOptions:F,view:L}),n.createElement(gl,{isLoading:m,allPagesFetched:u,page:O,templates:R,totalTemplates:j,search:H,view:L,templateActions:we}),n.createElement(ye.Fixed,null,n.createElement(fr,null)),n.createElement(Al,{activeTemplate:r,activeTemplateIndex:l,isDetailsViewOpen:e,templateActions:we,filteredTemplatesLength:R.length}))}function $l(){return n.createElement(cl,null,n.createElement(Rl,null))}function Dl(){const{storyError:t,templateError:e}=Ae(i=>{let{state:{stories:{error:l},templates:{error:o}}}=i;return{storyError:l,templateError:o}}),{showSnackbar:a}=Nt(),r=Ee(i=>a({message:i,dismissible:!0}),200);s.useEffect(()=>{t!=null&&t.id&&r(t.message)},[t,r]),s.useEffect(()=>{e!=null&&e.id&&r(e.message)},[e,r])}function Rt(){return Rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Rt.apply(this,arguments)}const kl=t=>{let{additionalRoutes:e}=t;const{currentPath:a,templateId:r,availableRoutes:i}=Me(S=>{let{state:C}=S;return{...C,templateId:C.queryParams.id}}),{push:l,setAvailableRoutes:o}=Me(S=>{let{actions:C}=S;return C}),{canViewDefaultTemplates:d,leftRailSecondaryNavigation:c=[],documentTitleSuffix:p=h("Web Stories","web-stories")}=Q(),{addInitialFetchListener:u}=Ae(S=>{var L;let{actions:{storyApi:{addInitialFetchListener:C}},state:{templates:{templates:O}}}=S;return{currentTemplate:r!==void 0?(L=O[r])==null?void 0:L.title:void 0,addInitialFetchListener:C}}),m=s.useRef(a===J.DASHBOARD),[g,E]=s.useState(!m.current);s.useEffect(()=>u==null?void 0:u(S=>{(S==null?void 0:S.all)<=0&&m.current&&d&&(l(J.TEMPLATES_GALLERY),m.current=!1),E(!0)}),[u,l,a,d]),s.useEffect(()=>{if(i.length>0)return;const S=e?e.map(C=>{let{path:O}=C;return O}):[];o([...Object.values(J),...S])},[e,i.length,o]),s.useEffect(()=>{if(!g)return;const S=c.find(O=>O.value===a),C=Ze[a]||(S==null?void 0:S.label)||Ze.DEFAULT;document.title=A(h("%1$s  %2$s","web-stories"),C,p),za(C)},[a,g,c,p]),Dl();const{clearSnackbar:f,removeSnack:w,placement:v,currentSnacks:_}=Nt(),T=Gn(a);return s.useEffect(()=>{a!==T&&f()},[f,a,T]),n.createElement(n.Fragment,null,n.createElement(Eo,null,n.createElement($o,null),n.createElement(vo,null,i.length>0&&n.createElement(n.Fragment,null,n.createElement(ht,{exact:!0,isDefault:!0,path:J.DASHBOARD,component:n.createElement(nl,null)}),d&&n.createElement(ht,{path:J.TEMPLATES_GALLERY,component:n.createElement($l,null)}),e&&e.map(S=>n.createElement(ht,Rt({key:S.path},S)))))),n.createElement(zn,{notifications:_,onRemove:w,placement:v,max:1}))};function Ml(){return re.jsxDEV(ye.Provider,{children:re.jsxDEV("div",{children:[re.jsxDEV(Ht,{heading:"Settings"},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/settings.jsx",lineNumber:7,columnNumber:9},this),re.jsxDEV(ye.Scrollable,{children:re.jsxDEV("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#EEE"},children:"Settings"},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/settings.jsx",lineNumber:9,columnNumber:11},this)},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/settings.jsx",lineNumber:8,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/settings.jsx",lineNumber:6,columnNumber:7},this)},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/settings.jsx",lineNumber:5,columnNumber:5},this)}const Pl=async()=>{const t=await Hn(),e=[];return{stories:t.reduce((r,i)=>{var l;return console.log("acc, story",r,i),e.push(i.storyId),r[i.storyId]={author:i.author,capabilities:{hasEditAction:!0,hasDeleteAction:!0},id:i.storyId,created:i==null?void 0:i.created,createdGMT:i==null?void 0:i.createdGMT,editStoryLink:`/webstories/editor.html?id=${i.storyId}`,featuredMediaUrl:i==null?void 0:i.featuredMediaUrl,modified:i==null?void 0:i.modified,modifiedGMT:i==null?void 0:i.modifiedGMT,status:i.status?i.status:"publish",title:(l=i==null?void 0:i.title)==null?void 0:l.raw},r},{}),fetchedStoryIds:e,totalPages:e.length===0?0:1,totalStoriesByStatus:{all:e.length,publish:e.length}}},Nl=async t=>{await deleteStoryInDB(t)},Fl=async({id:t,author:e,title:a})=>{var i;if(!t)return{};const r=await Yn(t);return e&&(r.author=e),a&&(r.title=a),await updateStoryInDB(r),{author:r.author,capabilities:{hasEditAction:!0,hasDeleteAction:!0},id:r.storyId,created:r==null?void 0:r.created,createdGMT:r==null?void 0:r.createdGMT,editStoryLink:`/webstories/editor.html?id=${r.storyId}`,featuredMediaUrl:r==null?void 0:r.featuredMediaUrl,modified:r==null?void 0:r.modified,modifiedGMT:r==null?void 0:r.modifiedGMT,status:r.status?r.status:"publish",title:(i=r==null?void 0:r.title)==null?void 0:i.raw}},Bl=$t`
  body.web-story_page_stories-dashboard #wpbody {
    ${Wn};
  }
`,jl=()=>{const t={newStoryURL:"/webstories/editor.html",apiCallbacks:{fetchStories:Pl,updateStory:Fl,trashStory:Nl}};return re.jsxDEV(li,{config:t,children:[re.jsxDEV(Bl,{},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/components/story-dashboard/index.jsx",lineNumber:40,columnNumber:7},globalThis),re.jsxDEV(kl,{additionalRoutes:[{path:"/settings",component:re.jsxDEV(Ml,{},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/components/story-dashboard/index.jsx",lineNumber:45,columnNumber:24},globalThis)}]},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/components/story-dashboard/index.jsx",lineNumber:41,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/praveen/Documents/webstories/src/components/story-dashboard/index.jsx",lineNumber:39,columnNumber:5},globalThis)};qn();const Ul=()=>{Xn();const{isInitializingIndexDB:t,isRefreshingMedia:e}=Jn(({state:a})=>({isInitializingIndexDB:a.isInitializingIndexDB,isRefreshingMedia:a.isRefreshingMedia}));return!t&&!e?re.jsxDEV(jl,{},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/index.jsx",lineNumber:45,columnNumber:5},globalThis):re.jsxDEV("p",{children:"Please wait"},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/index.jsx",lineNumber:47,columnNumber:5},globalThis)},Ra=()=>{Br.render(re.jsxDEV(Kn,{children:re.jsxDEV(Ul,{},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/index.jsx",lineNumber:54,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/praveen/Documents/webstories/src/pages/Dashboard/index.jsx",lineNumber:53,columnNumber:5},globalThis),document.getElementById("playground-root"))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ra):Ra();
