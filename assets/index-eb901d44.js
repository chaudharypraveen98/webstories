import{dZ as Pr,d_ as Nr,a as y,Z as q,cU as Aa,r as o,a3 as Ee,d$ as Fr,C as A,cA as ue,_ as h,e0 as Br,e1 as jr,e2 as Ur,J as st,e3 as Gr,a9 as ze,cM as Pe,e as n,a0 as N,dw as Vr,ab as zr,ac as Hr,cC as Ra,e4 as Yr,a2 as Wr,af as qr,ad as Kr,ag as we,bw as z,an as Le,ao as Oe,bX as je,c1 as Xr,c0 as Zr,e5 as K,e6 as V,e7 as $a,e8 as Jr,e9 as Yt,ea as Qr,eb as Rt,cR as ka,cS as en,bj as tn,D as re,co as b,P as ne,Q as ie,X as Ma,N as $t,d5 as an,a1 as rn,d4 as Wt,bT as nn,a8 as on,a7 as sn,bt as ln,cG as cn,ec as qt,cF as Ne,f as he,cD as dn,bY as kt,U as ce,p as un,V as Ye,G as mn,T as pn,ed as hn,A as gn,l as fn,$ as Mt,da as bn,cl as yn,cn as Da,cs as Pa,ct as En,bq as We,br as wn,cu as vn,cv as Sn,bp as Na,dq as Tn,cy as _n,cw as Cn,cx as In,dh as Dt,bs as Ln,cT as On,d2 as xn,cB as An,K as Fa,y as Ba,cI as Rn,h as Ue,Y as $n,bW as Pt,d6 as ja,dA as Ua,H as kn,dB as ke,dv as Mn,t as Dn,dx as Pn,i as Nn,k as Fn,di as Bn,cV as jn,dO as Un,j as me,ee as Gn,ef as Vn,dY as zn,eg as Hn,ae as Yn}from"./useIndexedDBMedia-e884b012.js";async function Ga(t){return await Pr()?Nr("screen_view",{screen_name:t}):Promise.resolve()}const Wn=y.div.withConfig({displayName:"components__DropDownContainer",componentId:"sc-1i3s2c5-0"})(["display:flex;flex-direction:column;width:100%;"]),qn=y(q.Label).withConfig({displayName:"components__Label",componentId:"sc-1i3s2c5-1"})(["margin-bottom:8px;color:",";"],t=>{let{theme:e,disabled:a}=t;return e.colors.fg[a?"disable":"primary"]}),Kn=y(q.Paragraph).withConfig({displayName:"components__Hint",componentId:"sc-1i3s2c5-2"})(["margin-top:12px;padding-left:2px;color:",";"],t=>{let{theme:e,hasError:a}=t;return e.colors.fg[a?"negative":"tertiary"]});function Xn(t){let{handleSearchValueChange:e,selectedValue:a,searchValue:r,options:l}=t;const i=Aa("assertive"),[s,d]=o.useState(!1),c=Ee(d,100),[p,u]=o.useState(!1),m=Ee(u,300,{leading:!0});o.useEffect(()=>{s||m(!1)},[s,m]);const g=o.useMemo(()=>Fr(l),[l]),E=o.useCallback(T=>g.flatMap(S=>S.options).find(S=>String(S.value).toLowerCase()===String(T).toLowerCase()),[g]),f=o.useMemo(()=>{const T=a?String(a.value):r;return T&&g.length!==0?E(T):null},[a,r,g,E]),[v,w]=o.useState(r),_=o.useCallback(T=>{w(T),T!==void 0&&(e==null||e(T))},[e]);return o.useEffect(()=>{v===void 0&&(a==null?void 0:a.value)!==void 0&&_((a==null?void 0:a.label)||"")},[v,_,a]),o.useEffect(()=>{if(s&&(v!=null&&v.length)){const T=l.length?A(ue("%d result found.","%d results found.",l.length,"web-stories"),String(l.length)):h("No results found.","web-stories");i(T)}},[v,s,l.length,i]),{activeOption:f,getActiveOption:E,groups:g,inputState:v,setInputState:_,isMenuFocused:p,setIsMenuFocused:m,isOpen:s,setIsOpen:c}}function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},qe.apply(this,arguments)}const Zn=y.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-1jug8cl-0"})([""]);function Jn(t){let{ariaInputLabel:e=Br,ariaClearLabel:a=jr,disabled:r,handleSearchValueChange:l,hasError:i,hint:s,label:d,onMenuItemClick:c,onClear:p,options:u=[],placeholder:m=Ur,placement:g=st.Bottom,popupFillWidth:E=Gr,popupZIndex:f,selectedValue:v,searchValue:w,..._}=t;const T=o.useMemo(()=>`list-${ze()}`,[]),S=o.useMemo(()=>`select-button-${ze()}`,[]),C=o.useMemo(()=>`clear-button-${ze()}`,[]),x=o.useRef(null),O=o.useRef(null),{activeOption:H,getActiveOption:L,inputState:I,setInputState:R,isMenuFocused:U,setIsMenuFocused:F,isOpen:G,setIsOpen:P,groups:$}=Xn({options:u,selectedValue:v,searchValue:w,handleSearchValueChange:l}),J=o.useMemo(()=>!!(r||!(I!=null&&I.length)),[r,I]),ve=o.useCallback(()=>{P(!0),F(!1)},[P,F]),D=o.useCallback(X=>{X.preventDefault(),P(!0)},[P]),j=o.useCallback(X=>{C&&(X==null?void 0:X.currentTarget)instanceof HTMLElement&&X.currentTarget.id===C||P(!1)},[C,P]),W=o.useCallback((X,oe)=>{P(!1);const Ht=L(oe)||{label:String(oe),value:oe};R(String(Ht.label)),c==null||c(X,Ht)},[L,R,P,c]),ae=o.useCallback(()=>{var X;return(X=x==null?void 0:x.current)==null?void 0:X.focus()},[]),it=o.useCallback(X=>{let{target:oe}=X;R(oe.value),P(oe.value.length>0)},[R,P]),ct=o.useCallback(()=>{R(""),p==null||p(),ae==null||ae()},[ae,R,p]),dt=o.useCallback(()=>{P(!1),F(!1)},[P,F]),Be=o.useCallback(()=>F(!0),[F]),Se=o.useCallback(()=>{(J||(I==null?void 0:I.trim().length)===0)&&(F(!1),P(!1))},[I,F,J,P]),Dr=o.useCallback(X=>{const{key:oe}=X;oe==="Escape"?J||F(!1):oe==="Tab"?Se():oe==="ArrowDown"?Be():oe==="Enter"&&I&&I.trim().length>0&&W(X.nativeEvent,String(I))},[J,F,Se,Be,I,W]);return Pe(O,Se,[Se]),n.createElement(Wn,null,d&&n.createElement(qn,{size:N.Small,disabled:r,isBold:!0},d),n.createElement(Zn,{ref:O},n.createElement(Vr,qe({"aria-label":e,hasError:i,id:S,onChange:it,onClick:D,onFocus:ve,onKeyDown:Dr,placeholder:m,ariaClearLabel:a,clearId:C,disabled:r,handleClearInput:ct,handleTabClear:dt,inputValue:I||"",isOpen:G,listId:T,ref:x},_))),!J&&n.createElement(zr,{anchor:x,isOpen:G,placement:g,fillWidth:E,zIndex:f,ignoreMaxOffsetY:!0},n.createElement(Hr,qe({activeValue:H==null?void 0:H.value,handleReturnToParent:ae,isMenuFocused:U,listId:T,menuAriaLabel:A(h("%s Option List Selector","web-stories"),e),onDismissMenu:j,handleMenuItemSelect:W,groups:$,parentId:S},_))),s&&n.createElement(Kn,{hasError:i,size:N.Small},s))}function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yt.apply(this,arguments)}const Qn=y(Ra).withConfig({displayName:"link__StyledLink",componentId:"sc-7h28r8-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],Yr,t=>{let{theme:e}=t;return e.colors.fg.primary},t=>{let{theme:e}=t;return e.colors.interactiveBg.secondaryHover},t=>{let{theme:e}=t;return e.colors.interactiveBg.secondaryPress});function eo(t){let{id:e,onBlur:a,onClick:r,onFocus:l,openNewTab:i,...s}=t;const{focusedId:d,onDismiss:c,onMenuItemBlur:p,onMenuItemFocus:u}=Wr(f=>{let{state:v,actions:w}=f;return{focusedId:v.focusedId,onDismiss:w.onDismiss,onMenuItemBlur:w.onMenuItemBlur,onMenuItemFocus:w.onMenuItemFocus}}),m=o.useMemo(ze,[]),g=e||m,E=i?{target:"_blank",rel:"noreferrer"}:{};return n.createElement(Qn,yt({id:g,tabIndex:d===g?0:-1,role:"menuitem",onBlur:f=>{p(),a==null||a(f)},onClick:f=>{r==null||r(f),c(f.nativeEvent)},onFocus:f=>{u(g),l==null||l(f)}},E,s))}const Va=y.h1.withConfig({displayName:"display__Display",componentId:"sc-1x3xqpc-0"})([""," ",""],qr,t=>{let{size:e=N.Medium,theme:a}=t;return Kr({preset:a.typography.presets.display[e],theme:a})});var Kt,Xt,Zt,Jt;function Et(){return Et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Et.apply(this,arguments)}var to=o.memo(t=>{let{title:e,titleId:a,...r}=t;return o.createElement("svg",Et({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 212 64","aria-labelledby":a},r),e?o.createElement("title",{id:a},e):null,Kt||(Kt=o.createElement("circle",{cx:32,cy:32,r:32,fill:"url(#a)",transform:"rotate(-180 32 32)"})),Xt||(Xt=o.createElement("g",{fill:"#fff",filter:"url(#b)"},o.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2V19.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4V22.4z"}))),Zt||(Zt=o.createElement("path",{fill:"#000",d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26H80.78zm24.747.41c-1.263 0-2.389-.3-3.379-.897a6.391 6.391 0 0 1-2.304-2.457c-.546-1.041-.82-2.227-.82-3.559 0-1.245.257-2.397.769-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.53 5.53 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.161 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm15.423 11.904c-1.041 0-1.954-.239-2.739-.716-.785-.478-1.357-1.016-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103c.358-.614.93-1.16 1.715-1.638s1.698-.717 2.739-.717c1.195 0 2.262.299 3.2.896.939.598 1.681 1.417 2.227 2.458.547 1.04.82 2.236.82 3.584 0 1.348-.273 2.543-.82 3.584-.546 1.04-1.288 1.86-2.227 2.457-.938.598-2.005.896-3.2.896zm-.23-1.97a3.98 3.98 0 0 0 2.099-.59c.666-.41 1.195-.99 1.587-1.74.41-.751.615-1.63.615-2.637 0-1.024-.205-1.903-.615-2.637-.392-.75-.921-1.323-1.587-1.715a3.857 3.857 0 0 0-2.099-.615c-.751 0-1.459.205-2.125.615-.648.392-1.178.964-1.587 1.715-.41.734-.615 1.613-.615 2.637s.205 1.911.615 2.662c.409.734.939 1.306 1.587 1.715a4.116 4.116 0 0 0 2.125.59zm19.73 1.97a6.608 6.608 0 0 1-2.637-.563 6.642 6.642 0 0 1-2.304-1.664c-.665-.734-1.152-1.647-1.459-2.739l2.074-.845c.29 1.058.819 1.946 1.587 2.663.768.716 1.698 1.075 2.79 1.075.683 0 1.306-.12 1.869-.359a3.286 3.286 0 0 0 1.382-1.1c.359-.478.538-1.059.538-1.741 0-.905-.341-1.622-1.024-2.15-.666-.547-1.655-1.05-2.97-1.511l-1.152-.41a13.954 13.954 0 0 1-2.048-.972 5.22 5.22 0 0 1-1.689-1.536c-.444-.649-.666-1.46-.666-2.432 0-.888.239-1.699.717-2.432.478-.734 1.135-1.323 1.971-1.767.837-.444 1.801-.665 2.893-.665 1.143 0 2.099.213 2.867.64.785.41 1.4.904 1.843 1.484.461.564.768 1.084.922 1.562l-2.022.87c-.103-.358-.299-.725-.589-1.1-.29-.393-.683-.717-1.178-.973-.478-.273-1.083-.41-1.817-.41-.598 0-1.161.12-1.69.359-.512.239-.93.571-1.254.998-.308.41-.461.887-.461 1.434 0 .768.307 1.373.921 1.817.615.444 1.443.845 2.484 1.203l1.203.41c.546.188 1.101.418 1.664.691.58.273 1.118.623 1.613 1.05.495.426.896.956 1.203 1.587.307.614.461 1.357.461 2.227 0 .939-.188 1.75-.564 2.432a4.746 4.746 0 0 1-1.433 1.639 5.972 5.972 0 0 1-1.971.921c-.7.205-1.391.307-2.074.307zm13.187-.204c-1.092 0-1.971-.316-2.636-.948-.666-.648-.999-1.544-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117c0 .683.137 1.212.41 1.587.29.376.759.563 1.408.563.29 0 .555-.042.793-.128.239-.085.453-.187.64-.307v2.125c-.221.102-.469.179-.742.23-.256.069-.606.103-1.05.103zm9.799.204c-1.314 0-2.475-.307-3.482-.921a6.658 6.658 0 0 1-2.381-2.483c-.563-1.058-.844-2.236-.844-3.533 0-1.297.281-2.466.844-3.507a6.605 6.605 0 0 1 2.381-2.51c1.007-.614 2.168-.92 3.482-.92s2.474.315 3.481.946a6.418 6.418 0 0 1 2.356 2.51c.58 1.04.87 2.2.87 3.48 0 1.298-.29 2.475-.87 3.534a6.465 6.465 0 0 1-2.356 2.483c-1.007.614-2.167.921-3.481.921zm0-1.97a4.34 4.34 0 0 0 2.201-.59 4.462 4.462 0 0 0 1.69-1.69c.427-.75.64-1.646.64-2.687s-.213-1.929-.64-2.663c-.427-.75-.99-1.322-1.69-1.715a4.34 4.34 0 0 0-2.201-.589c-.785 0-1.528.197-2.227.59-.7.392-1.263.963-1.69 1.714-.427.734-.64 1.622-.64 2.663 0 1.04.213 1.937.64 2.688.427.734.99 1.297 1.69 1.69a4.48 4.48 0 0 0 2.227.588zm8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4.02 4.02 0 0 1 1.562-.333c.392 0 .699.025.921.077.222.034.427.094.615.179v2.355c-.547-.273-1.161-.41-1.844-.41-.631 0-1.211.18-1.74.538a4.003 4.003 0 0 0-1.28 1.434 4.236 4.236 0 0 0-.461 1.97V40.4h-2.176zm10.88-15.462c-.427 0-.794-.153-1.101-.46a1.503 1.503 0 0 1-.461-1.101c0-.444.154-.81.461-1.101.307-.307.674-.46 1.101-.46.444 0 .81.153 1.101.46.307.29.46.657.46 1.1 0 .428-.153.794-.46 1.102a1.45 1.45 0 0 1-1.101.46zM182.046 40.4V27.344h2.176V40.4h-2.176zm11.256.41c-1.263 0-2.389-.3-3.379-.897a6.39 6.39 0 0 1-2.304-2.457c-.546-1.041-.819-2.227-.819-3.559 0-1.245.256-2.397.768-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.523 5.523 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.16 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm13.475 11.904c-1.468 0-2.663-.34-3.584-1.024-.922-.7-1.562-1.527-1.92-2.483l1.945-.87c.342.785.828 1.39 1.459 1.817a3.75 3.75 0 0 0 2.1.64c.768 0 1.45-.162 2.048-.486.614-.324.921-.802.921-1.434 0-.58-.256-1.032-.768-1.356-.495-.325-1.194-.598-2.099-.82l-1.587-.41c-.615-.17-1.195-.409-1.741-.716s-.99-.7-1.331-1.178c-.324-.494-.487-1.092-.487-1.792 0-.785.231-1.459.692-2.022.46-.563 1.066-.99 1.817-1.28a6.294 6.294 0 0 1 2.407-.46c1.109 0 2.116.247 3.02.742.922.478 1.571 1.169 1.946 2.073l-1.894.87c-.325-.648-.76-1.1-1.306-1.356s-1.143-.384-1.792-.384c-.683 0-1.306.162-1.869.486-.546.307-.819.734-.819 1.28s.213.956.64 1.229c.444.273.981.495 1.613.666l1.894.486c2.577.666 3.866 1.929 3.866 3.789 0 .819-.231 1.527-.691 2.125-.461.597-1.084 1.058-1.869 1.382-.785.324-1.656.486-2.611.486z"})),Jt||(Jt=o.createElement("defs",null,o.createElement("linearGradient",{id:"a",x1:13.255,x2:35.289,y1:6.599,y2:62.791,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#79B3FF"}),o.createElement("stop",{offset:1,stopColor:"#CBACFF"})),o.createElement("filter",{id:"b",width:46.08,height:46.08,x:8.96,y:10.24,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o.createElement("feOffset",{dy:1.28}),o.createElement("feGaussianBlur",{stdDeviation:1.92}),o.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})))))}),Qt,ea,ta;function wt(){return wt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wt.apply(this,arguments)}var ao=o.memo(t=>{let{title:e,titleId:a,...r}=t;return o.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 274 118","aria-labelledby":a},r),e?o.createElement("title",{id:a},e):null,Qt||(Qt=o.createElement("path",{fill:"#F4F2EF",d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z"})),ea||(ea=o.createElement("path",{fill:"#FBBC04",fillRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",clipRule:"evenodd"})),ta||(ta=o.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"})))}),za=we({isRTL:!1,userId:0,locale:{},newStoryURL:"",cdnURL:"",version:"",capabilities:{},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0},containerId:""});function ro(t){let{config:e,children:a}=t;return n.createElement(za.Provider,{value:e},a)}const B={CREATING_STORY_FROM_TEMPLATE:"creating_story_from_template",CREATE_STORY_FROM_TEMPLATE_SUCCESS:"create_story_from_template_success",CREATE_STORY_FROM_TEMPLATE_FAILURE:"create_story_from_template_failure",LOADING_STORIES:"loading_stories",FETCH_STORIES_SUCCESS:"fetch_stories_success",FETCH_STORIES_FAILURE:"fetch_stories_failure",UPDATE_STORY:"update_story",UPDATE_STORY_FAILURE:"update_story_failure",TRASH_STORY:"trash_story",TRASH_STORY_FAILURE:"trash_story_failure",DUPLICATE_STORY:"duplicate_story",DUPLICATE_STORY_FAILURE:"duplicate_story_failure"},no={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};var aa,ra;function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vt.apply(this,arguments)}const oo=o.memo(t=>{let{title:e,titleId:a,...r}=t;return o.createElement("svg",vt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":a},r),e?o.createElement("title",{id:a},e):null,aa||(aa=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z"})),ra||(ra=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263l4.967-2.129Z"})))});var na,oa;function St(){return St=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},St.apply(this,arguments)}const so=o.memo(t=>{let{title:e,titleId:a,...r}=t;return o.createElement("svg",St({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":a},r),e?o.createElement("title",{id:a},e):null,na||(na=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.493 2.493 0 0 0-.782.748 2.493 2.493 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.476 2.476 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484Z"})),oa||(oa=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9"})))}),Y={OPEN_IN_EDITOR:"open-in-editor-action",RENAME:"rename-action",DUPLICATE:"duplicate-action",DELETE:"delete-story-action",COPY_STORY_LINK:"copy-story-link",OPEN_STORY_LINK:"open-story-link",CLOSE:"close-menu"},lo=[{label:h("Open in editor","web-stories"),value:Y.OPEN_IN_EDITOR,isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasEditAction)}},{label:h("Open in new tab","web-stories"),value:Y.OPEN_STORY_LINK,isEnabled:t=>!!(t!=null&&t.previewLink)},{label:h("Copy Story URL","web-stories"),value:Y.COPY_STORY_LINK,isEnabled:t=>!!(t!=null&&t.previewLink)},{label:h("Rename","web-stories"),value:Y.RENAME,separator:"top",isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasEditAction)}},{label:h("Duplicate","web-stories"),value:Y.DUPLICATE,isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasEditAction)}},{label:h("Delete Story","web-stories"),value:Y.DELETE,separator:"top",isEnabled:t=>{var e;return!!((e=t==null?void 0:t.capabilities)!=null&&e.hasDeleteAction)}}],te={ASC:"asc",DESC:"desc"},M={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},io={orderby:M,order:te},Ha={[M.NAME]:te.ASC,[M.DATE_CREATED]:te.DESC,[M.LAST_MODIFIED]:te.DESC,[M.CREATED_BY]:te.ASC},co=[{label:h("Name","web-stories"),value:M.NAME},{label:h("Date Created","web-stories"),value:M.DATE_CREATED},{label:h("Last Modified","web-stories"),value:M.LAST_MODIFIED},{label:h("Created By","web-stories"),value:M.CREATED_BY}],Ge={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},k={ALL:Object.values(Ge).join(","),PUBLISHED_AND_FUTURE:[Ge.PUBLISH,Ge.FUTURE].join(","),...Ge},uo={[k.PUBLISH]:h("Published","web-stories"),[k.PENDING]:h("Pending","web-stories"),[k.FUTURE]:h("Scheduled","web-stories"),[k.DRAFT]:h("Draft","web-stories"),[k.PRIVATE]:h("Private","web-stories")},mo=[{label:h("All Stories","web-stories"),value:k.ALL,status:"all"},{label:h("Drafts","web-stories"),value:k.DRAFT,status:k.DRAFT},{label:h("Pending","web-stories"),value:k.PENDING,status:k.PENDING},{label:h("Published","web-stories"),value:k.PUBLISH,status:k.PUBLISH},{label:h("Scheduled","web-stories"),value:k.FUTURE,status:k.FUTURE},{label:h("Private","web-stories"),value:k.PRIVATE,status:k.PRIVATE}],po={[k.ALL]:t=>A(ue("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",t,"web-stories"),String(t)),[k.DRAFT]:t=>A(ue("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",t,"web-stories"),String(t)),[k.PUBLISH]:t=>A(ue("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",t,"web-stories"),String(t)),[k.FUTURE]:t=>A(ue("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",t,"web-stories"),String(t)),[k.PENDING]:t=>A(ue("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",t,"web-stories"),String(t)),[k.PRIVATE]:t=>A(ue("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",t,"web-stories"),String(t))},Tt={filters:{status:k.ALL},sort:{orderby:M.LAST_MODIFIED,order:Ha[M.LAST_MODIFIED]}},pe={DIY_CRAFTS:"diy_crafts",MOVIES_TV:"movies_tv",BEAUTY_STYLE:"beauty_style",FITNESS_WELLBEING:"fitness_wellbeing",FOOD:"food",TRAVEL:"travel",MUSIC:"music",SPORTS:"sports"};z("DIY & Crafts","template vertical","web-stories"),pe.DIY_CRAFTS,z("Movies & TV","template vertical","web-stories"),pe.MOVIES_TV,z("Beauty & Style","template vertical","web-stories"),pe.BEAUTY_STYLE,z("Fitness & Wellbeing","template vertical","web-stories"),pe.FITNESS_WELLBEING,z("Food","template vertical","web-stories"),pe.FOOD,z("Travel","template vertical","web-stories"),pe.TRAVEL,z("Music","template vertical","web-stories"),pe.MUSIC,z("Sports","template vertical","web-stories"),pe.SPORTS;const se={WHITE:"white",BLACK:"black",GRAY:"gray",BROWN:"brown",RED:"red",ORANGE:"orange",YELLOW:"yellow",GREEN:"green",BLUE:"blue",PINK:"pink",PURPLE:"purple"};z("White","color","web-stories"),se.WHITE,z("Black","color","web-stories"),se.BLACK,z("Gray","color","web-stories"),se.GRAY,z("Brown","color","web-stories"),se.BROWN,z("Red","color","web-stories"),se.RED,z("Orange","color","web-stories"),se.ORANGE,z("Yellow","color","web-stories"),se.YELLOW,z("Green","color","web-stories"),se.GREEN,z("Blue","color","web-stories"),se.BLUE,z("Pink","color","web-stories"),se.PINK,z("Purple","color","web-stories"),se.PURPLE;const Nt={ALL:"template"},ho={[Nt.ALL]:t=>A(ue("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",t,"web-stories"),String(t))},go={ASC:"asc",DESC:"desc"},Ie={POPULAR:"popular",RECENT:"recent"},fo={orderby:Ie,order:go},Ke={filters:{status:Nt.ALL},sort:{orderby:Ie.POPULAR}},bo=[{label:h("Popular","web-stories"),value:Ie.POPULAR},{label:h("Recent","web-stories"),value:Ie.RECENT}],yo={template:h("See details","web-stories")},Xe=288,be=1098,de={TABLET:"tablet",DESKTOP:"desktop",THUMBNAIL:"thumbnail"},Ze={[de.TABLET]:200,[de.DESKTOP]:232,[de.THUMBNAIL]:33},_t={COLUMN_GAP:24,ROW_GAP:32},Ft={GUTTER:52},Eo="useskeyboard",Ya={LAYOUT_SQUISHABLE:3,LAYOUT_FIXED:5,STICKY_TABLE:2,POPOVER_MENU:10,POPOVER_PANEL:10},Z={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},Je={[Z.DASHBOARD]:h("Dashboard","web-stories"),[Z.TEMPLATES_GALLERY]:h("Explore Templates","web-stories"),[`${Z.TEMPLATES_GALLERY}/${Z.TEMPLATE_DETAIL}`]:h("Template Details","web-stories"),DEFAULT:h("Dashboard","web-stories")},wo=[{value:Z.DASHBOARD,label:Je[Z.DASHBOARD],Icon:so},{value:Z.TEMPLATES_GALLERY,label:Je[Z.TEMPLATES_GALLERY],Icon:oo}],ee={GRID:"grid",LIST:"list"},sa={[ee.GRID]:h("Switch to List View","web-stories"),[ee.LIST]:h("Switch to Grid View","web-stories")},Qe={DASHBOARD:"DASHBOARD",TEMPLATES_GALLERY:"TEMPLATES_GALLERY"},vo={[Qe.DASHBOARD]:{...po},[Qe.TEMPLATES_GALLERY]:{...ho}},Wa=300,et=853,tt=640;function So(t,e){switch(e.type){case B.LOADING_STORIES:case B.CREATING_STORY_FROM_TEMPLATE:return{...t,isLoading:e.payload};case B.CREATE_STORY_FROM_TEMPLATE_FAILURE:case B.FETCH_STORIES_FAILURE:case B.UPDATE_STORY_FAILURE:case B.TRASH_STORY_FAILURE:case B.DUPLICATE_STORY_FAILURE:return{...t,error:{...e.payload,id:Date.now()}};case B.CREATE_STORY_FROM_TEMPLATE_SUCCESS:return{...t,error:{}};case B.UPDATE_STORY:return{...t,error:{},stories:{...t.stories,[e.payload.id]:e.payload}};case B.TRASH_STORY:{const a=e.payload.storyStatus===k.DRAFT?k.DRAFT:k.PUBLISH;return{...t,error:{},storiesOrderById:t.storiesOrderById.filter(r=>r!==e.payload.id),totalStoriesByStatus:{...t.totalStoriesByStatus,all:t.totalStoriesByStatus.all-1,[a]:t.totalStoriesByStatus[a]-1},stories:Object.keys(t.stories).reduce((r,l)=>(parseInt(l)!==e.payload.id&&(r[l]=t.stories[l]),r),{})}}case B.DUPLICATE_STORY:return{...t,error:{},storiesOrderById:[e.payload.id,...t.storiesOrderById],totalStoriesByStatus:{...t.totalStoriesByStatus,all:t.totalStoriesByStatus.all+1,[e.payload.status]:t.totalStoriesByStatus[e.payload.status]+1},stories:{...t.stories,[e.payload.id]:e.payload}};case B.FETCH_STORIES_SUCCESS:{const{fetchedStoryIds:a,totalStoriesByStatus:r,totalPages:l,page:i,stories:s}=e.payload,{storiesOrderById:d,stories:c}=t,p=i===1?a:[...d,...a],u=[...new Set(p)];return{...t,error:{},storiesOrderById:u,stories:{...c,...s},totalPages:l||1,totalStoriesByStatus:r,allPagesFetched:i>=l}}default:return t}}const Re={LOAD_STORIES:{MESSAGE:h("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:h("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:h("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:h("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:h("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:h("Cannot connect to data source","web-stories"),MESSAGE:h("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:h("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:h("Could not load the template","web-stories")}};function Q(){return Le(za,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe)}const To=`${Zr.LOCAL_AUTOSAVE_PREFIX}_auto-draft`,_o=()=>{const t=o.useRef(!0),e=o.useMemo(()=>new Map,[]),[a,r]=o.useReducer(So,no),{apiCallbacks:l}=Q(),i=o.useRef(!1);o.useEffect(()=>(i.current=!0,()=>{i.current=!1}),[]);const s=o.useCallback(async u=>{r({type:B.LOADING_STORIES,payload:!0});const m=je("load_stories");try{const{stories:g,fetchedStoryIds:E,totalPages:f,totalStoriesByStatus:v}=await l.fetchStories(u);if(!i.current)return;t.current&&e.forEach(w=>{w(v)}),t.current=!1,r({type:B.FETCH_STORIES_SUCCESS,payload:{stories:g,totalPages:f,totalStoriesByStatus:v,fetchedStoryIds:E,page:u.page}})}catch(g){r({type:B.FETCH_STORIES_FAILURE,payload:{message:Re.LOAD_STORIES.MESSAGE,code:g.code}})}finally{r({type:B.LOADING_STORIES,payload:!1}),m()}},[l,e]),d=o.useCallback(async u=>{const m=je("load_update_story");try{const g=await l.updateStory(u);r({type:B.UPDATE_STORY,payload:g})}catch(g){r({type:B.UPDATE_STORY_FAILURE,payload:{message:Re.UPDATE_STORY.MESSAGE,code:g.code}})}finally{m()}},[l]),c=o.useCallback(async u=>{const m=je("load_trash_story");try{await l.trashStory(u.id),r({type:B.TRASH_STORY,payload:{id:u.id,storyStatus:u.status}})}catch(g){r({type:B.TRASH_STORY_FAILURE,payload:{message:Re.DELETE_STORY.MESSAGE,code:g.code}})}finally{m()}},[l]),p=o.useCallback(async u=>{r({type:B.CREATING_STORY_FROM_TEMPLATE,payload:!0});try{const m=await l.createStoryFromTemplate(u);Xr.deleteItemByKey(To),r({type:B.CREATE_STORY_FROM_TEMPLATE_SUCCESS}),window.location=m.editLink}catch(m){r({type:B.CREATE_STORY_FROM_TEMPLATE_FAILURE,payload:{message:Re.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:m.code}})}finally{r({type:B.CREATING_STORY_FROM_TEMPLATE,payload:!1})}},[l]);return{stories:a,api:{duplicateStory:o.useCallback(async u=>{const m=je("load_duplicate_story");try{const g=await l.duplicateStory(u);r({type:B.DUPLICATE_STORY,payload:g})}catch(g){r({type:B.DUPLICATE_STORY_FAILURE,payload:{message:Re.DUPLICATE_STORY.MESSAGE,code:g.code}})}finally{m()}},[l]),fetchStories:s,createStoryFromTemplate:p,trashStory:c,updateStory:d,addInitialFetchListener:o.useCallback(u=>{const m=Symbol();return e.set(m,u),()=>{e.delete(m)}},[e])}}};function Co(t,e){K(2,arguments);var a=V(t),r=$a(e);return isNaN(r)?new Date(NaN):(r&&a.setDate(a.getDate()+r),a)}function la(t){K(1,arguments);var e=V(t);return e.setHours(0,0,0,0),e}function He(t,e){K(2,arguments);var a=V(t),r=V(e),l=a.getTime()-r.getTime();return l<0?-1:l>0?1:l}function Io(t,e){K(2,arguments);var a=V(t),r=V(e),l=a.getTime()-r.getTime();return l>0?-1:l<0?1:l}function qa(t,e){K(2,arguments);var a=la(t),r=la(e);return a.getTime()===r.getTime()}function Lo(t,e){K(2,arguments);var a=V(t),r=V(e),l=a.getFullYear()-r.getFullYear(),i=a.getMonth()-r.getMonth();return l*12+i}function Oo(t,e){return K(2,arguments),V(t).getTime()-V(e).getTime()}var ia={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},xo="trunc";function Ao(t){return t?ia[t]:ia[xo]}function Ro(t){K(1,arguments);var e=V(t);return e.setHours(23,59,59,999),e}function $o(t){K(1,arguments);var e=V(t),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}function ko(t){K(1,arguments);var e=V(t);return Ro(e).getTime()===$o(e).getTime()}function Mo(t,e){K(2,arguments);var a=V(t),r=V(e),l=He(a,r),i=Math.abs(Lo(a,r)),s;if(i<1)s=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-l*i);var d=He(a,r)===-l;ko(V(t))&&i===1&&He(t,r)===1&&(d=!1),s=l*(i-Number(d))}return s===0?0:s}function Do(t,e,a){K(2,arguments);var r=Oo(t,e)/1e3;return Ao(a==null?void 0:a.roundingMethod)(r)}function Ka(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}function Po(t){return Ka({},t)}var ca=1440,No=2520,ut=43200,Fo=86400;function Bo(t,e,a){var r,l;K(2,arguments);var i=Qr(),s=(r=(l=a==null?void 0:a.locale)!==null&&l!==void 0?l:i.locale)!==null&&r!==void 0?r:Jr;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var d=He(t,e);if(isNaN(d))throw new RangeError("Invalid time value");var c=Ka(Po(a),{addSuffix:!!(a!=null&&a.addSuffix),comparison:d}),p,u;d>0?(p=V(e),u=V(t)):(p=V(t),u=V(e));var m=Do(u,p),g=(Yt(u)-Yt(p))/1e3,E=Math.round((m-g)/60),f;if(E<2)return a!=null&&a.includeSeconds?m<5?s.formatDistance("lessThanXSeconds",5,c):m<10?s.formatDistance("lessThanXSeconds",10,c):m<20?s.formatDistance("lessThanXSeconds",20,c):m<40?s.formatDistance("halfAMinute",0,c):m<60?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",1,c):E===0?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",E,c);if(E<45)return s.formatDistance("xMinutes",E,c);if(E<90)return s.formatDistance("aboutXHours",1,c);if(E<ca){var v=Math.round(E/60);return s.formatDistance("aboutXHours",v,c)}else{if(E<No)return s.formatDistance("xDays",1,c);if(E<ut){var w=Math.round(E/ca);return s.formatDistance("xDays",w,c)}else if(E<Fo)return f=Math.round(E/ut),s.formatDistance("aboutXMonths",f,c)}if(f=Mo(u,p),f<12){var _=Math.round(E/ut);return s.formatDistance("xMonths",_,c)}else{var T=f%12,S=Math.floor(f/12);return T<3?s.formatDistance("aboutXYears",S,c):T<9?s.formatDistance("overXYears",S,c):s.formatDistance("almostXYears",S+1,c)}}function jo(t,e){return K(1,arguments),Bo(t,Date.now(),e)}function Uo(t){return K(1,arguments),qa(t,Date.now())}function Go(t,e){K(2,arguments);var a=$a(e);return Co(t,-a)}function Vo(t){return K(1,arguments),qa(t,Go(Date.now(),1))}function Ct(t){if(!t)return"";const e=Rt(t);if(Uo(e)){const{locale:a}=ka();return jo(e,{includeSeconds:!1,addSuffix:!0,locale:a})}return Vo(e)?h("yesterday","web-stories"):en(t)}function zo(t){return Rt(t,{timeZone:"+0000"})}const Te={LOADING_TEMPLATES:"loading_templates",FETCH_TEMPLATES_SUCCESS:"fetch_templates_success",FETCH_TEMPLATES_FAILURE:"fetch_templates_failure",PLACEHOLDER:"placeholder"},Xa={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null},Ho=(t,e)=>t.reduce((a,r)=>(r[e]&&(a[r[e]],a[r[e]]=r),a),{});function Yo(t,e){switch(e.type){case Te.LOADING_TEMPLATES:return{...t,isLoading:e.payload};case Te.FETCH_TEMPLATES_FAILURE:return{...t,error:{...e.payload,id:Date.now()}};case Te.FETCH_TEMPLATES_SUCCESS:{const a=e.payload.templates.map(i=>{let{id:s}=i;return s}),r=e.payload.page===1?a:[...t.templatesOrderById,...a],l=[...new Set(r)];return{...t,error:{},templatesOrderById:l,templates:{...t.templates,...Ho(e.payload.templates,"id")},isLoading:!1,totalPages:e.payload.totalPages,totalTemplates:e.payload.totalTemplates,allPagesFetched:e.payload.page>=e.payload.totalPages,templatesByTag:e.payload.templatesByTag}}case Te.PLACEHOLDER:return Xa;default:return t}}function Wo(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const{id:a,slug:r,modified:l,creationDate:i}=t;return a&&r?{...t,id:a,slug:r,creationDate:Rt(i,ka()),status:"template",modified:zo(l),isLocal:e}:null}const qo=()=>{const[t,e]=o.useReducer(Yo,Xa),{cdnURL:a}=Q(),r=o.useCallback(async()=>{e({type:Te.LOADING_TEMPLATES,payload:!0});const i={},{getAllTemplates:s}=await tn(()=>import("./index-0cb78aaf.js"),["assets/index-0cb78aaf.js","assets/useIndexedDBMedia-e884b012.js"]),d=(await s({cdnURL:a})).map(c=>{const p=Wo(c);return p.tags.forEach(u=>{i[u]?i[u].push(p.id):i[u]=[p.id]}),p}).sort((c,p)=>Io(c.creationDate,p.creationDate));e({type:Te.FETCH_TEMPLATES_SUCCESS,payload:{page:1,templates:d,totalPages:1,totalTemplates:d.length,templatesByTag:i}})},[a]),l=o.useCallback(i=>t.templates[i]?Promise.resolve(t.templates[i]):Promise.reject(new Error),[t]);return{templates:t,api:{fetchExternalTemplates:r,fetchExternalTemplateById:l}}};function Ko(){const{apiCallbacks:{getAuthors:t}}=Q();return{api:{getAuthors:t}}}function Xo(){const{apiCallbacks:{getTaxonomies:t,getTaxonomyTerms:e}}=Q();return{api:{getTaxonomies:t,getTaxonomyTerms:e}}}const Za=we({state:{},actions:{}});function Zo(t){let{children:e}=t;const{api:a}=Ko(),{api:r}=Xo(),{templates:l,api:i}=qo(),{stories:s,api:d}=_o(),c={state:{stories:s,templates:l},actions:{storyApi:d,templateApi:i,usersApi:a,taxonomyApi:r}};return n.createElement(Za.Provider,{value:c},e)}const Ja=re(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return`1px solid ${e.colors.border.defaultNormal}`}),Jo=y.div.withConfig({displayName:"components__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),Qa=y.div.withConfig({displayName:"components__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],Ja);Qa.propTypes={$isThreeRows:b.bool};const Qo=y.div.withConfig({displayName:"components__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),er=y(ie).attrs({type:ne.Plain}).withConfig({displayName:"components__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],t=>{let{$isSelected:e,theme:a}=t;return e&&re(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],a.borders.radius.medium,a.colors.interactiveBg.active)},Ja);er.propTypes={$isSelected:b.bool};const tr=b.oneOf([...Object.values(k),...Object.values(Nt)]),es=b.shape({id:b.number.isRequired,status:tr,title:b.string.isRequired,modified:b.oneOfType([b.object,b.string]),author:b.object,capabilities:b.shape({hasDeleteAction:b.bool,hasEditAction:b.bool})}),ts=b.shape({id:b.number.isRequired,status:tr,title:b.string.isRequired,pages:b.array,modified:b.object,colors:b.arrayOf(b.shape({label:b.string.isRequired,color:b.string.isRequired})),description:b.string,tags:b.arrayOf(b.string),createdBy:b.string,postersByPage:b.arrayOf(b.shape({webp:b.string,png:b.string,type:b.string}))});b.arrayOf(es),b.arrayOf(ts).isRequired,b.shape({duplicateStory:b.func,trashStory:b.func,updateStory:b.func}),b.shape({createStoryFromTemplate:b.func,handleDetailsToggle:b.func,switchToTemplateByOffset:b.func}),b.shape({all:b.number,draft:b.number,publish:b.number});const ar=b.shape({width:b.number,height:b.number});b.shape({handleMenuToggle:b.func.isRequired,contextMenuId:b.number.isRequired,menuItems:b.arrayOf(b.shape({label:b.string,value:b.oneOfType([b.string,b.bool]),url:b.string,isEnabled:b.func,action:b.func}))}),b.shape({handleOnRenameStory:b.func,id:b.number,handleCancelRename:b.func});const rr=y.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],_t.COLUMN_GAP,_t.ROW_GAP,t=>{let{columnWidth:e}=t;return`
    repeat(auto-fill, ${e}px)`},t=>{let{columnHeight:e}=t;return`minmax(${e}px, auto)`},t=>{let{theme:e}=t;return re(["&:focus-visible{",";}"],Ma(e.colors.border.focus))});rr.propTypes={columnHeight:b.number,columnWidth:b.number};const nr=o.forwardRef(function(e,a){let{ariaLabel:r,children:l,pageSize:i}=e;return n.createElement(rr,{ref:a,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":r,columnWidth:i.width,columnHeight:i.height},l)});var da;function It(){return It=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},It.apply(this,arguments)}const as=o.memo(t=>{let{title:e,titleId:a,...r}=t;return o.createElement("svg",It({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 4 16","aria-labelledby":a},r),e?o.createElement("title",{id:a},e):null,da||(da=o.createElement("path",{fill:"currentColor",d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})))}),rs="context-menu-button",le=y.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],t=>{let{menuOpen:e,isVisible:a}=t;return e||a?1:0},t=>{let{theme:e,$isInverted:a}=t;return a?e.colors.inverted.fg.primary:e.colors.interactiveFg.brandNormal},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e,$isInverted:a}=t;return $t(!1,!!a&&e.colors.standard.black)});le.propTypes={menuOpen:b.bool};const or=y.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],t=>{let{verticalAlign:e="flex-start"}=t;return e},t=>{let{$menuStyleOverrides:e}=t;return e});function sr(t){let{contextMenuId:e,onMoreButtonSelected:a,storyId:r,verticalAlign:l,menuItems:i,itemActive:s,tabIndex:d,menuStyleOverrides:c,menuLabel:p,isInverted:u}=t;const m=e===r,g=o.useCallback(E=>a(E,-1),[a]);return n.createElement(or,{verticalAlign:l,"data-testid":`story-context-menu-${r}`,$menuStyleOverrides:c},n.createElement(le,{"data-testid":`story-context-button-${r}`,tabIndex:d,menuOpen:m,isVisible:s,"aria-label":p||h("More Options","web-stories"),onClick:E=>a(E,m?-1:r),className:rs,$isInverted:u},n.createElement(as,null)),n.createElement(an,{animate:!0,isOpen:m,onDismiss:g},i.map(E=>{let{label:f,separator:v,...w}=E;const _=w.href?eo:rn;return n.createElement(o.Fragment,{key:f},v==="top"&&n.createElement(Wt,null),n.createElement(_,w,f),v==="bottom"&&n.createElement(Wt,null))})))}or.propTypes={verticalAlign:b.oneOf(["center","flex-start","flex-end"])};const Bt=y.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],t=>{let{$posterHeight:e}=t;return`${e}px auto`},le,le,le,le);Bt.propTypes={$posterHeight:b.number};b.shape({label:b.string.isRequired,color:b.string.isRequired});const ns=y.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),os=y.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],t=>{let{theme:e,$backgroundColor:a,color:r,size:l,spacing:i}=t;return`
    width: ${l}px;
    height: ${l}px;
    border-radius: 50%;
    margin-bottom: 0;
    background-color: rgb(${a});
    ${(s=>({"#fff":`border: solid 1px ${s}`,"#ffffff":`border: solid 1px ${s}`,white:`border: solid 1px ${s}`,"#fef9f1":`border: solid 1px ${s}`,"#fff8f2":`border: solid 1px ${s}`,"#f9f9f9":`border: solid 1px ${s}`,"#fcfcfc":`border: solid 1px ${s}`}))(e.colors.border.defaultNormal)[r]||""};

    & + & {
      margin-left: ${i||10}px;
    }
  `});function ss(t){let{colors:e,size:a,spacing:r,...l}=t;return n.createElement(ns,l,e.map(i=>{let{label:s,color:d}=i;const{r:c,g:p,b:u}=nn(d).color,m=`${c}, ${p}, ${u}`;return n.createElement(os,{key:d,size:a,spacing:r,color:d,$backgroundColor:m,title:s,ariaLabel:s,"data-testid":"detail-template-color"})}))}const lt=y.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],Ft.GUTTER),ls={MENU:"menu",PANEL:"panel",COLOR_PANEL:"color_panel"};y(ie).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],t=>{let{theme:e}=t;return Ma(e.colors.border.focus)});y.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(on);y.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],t=>{let{isDragging:e,theme:a}=t;return e?a.colors.border.focus:a.colors.border.defaultNormal});y(q.Paragraph).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],t=>{let{theme:e}=t;return e.colors.fg.tertiary});y.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],t=>{let{theme:e}=t;return e.colors.standard.white},t=>{let{isLoading:e}=t;return e?.6:0},t=>{let{isLoading:e}=t;return e?"100":"0"});const is=y(sn).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],t=>{let{$isInverted:e,theme:a}=t;return e&&re(["input{color:",";}"],a.colors.inverted.fg.primary)}),lr=t=>{let{noAutoFocus:e,error:a,id:r,isInverted:l,label:i,onEditCancel:s,onEditComplete:d,placeholder:c,value:p}=t;const u=o.useRef(null),[m,g]=o.useState(p);o.useEffect(()=>{g(p)},[p]),Pe(u,()=>{s()},[s]),o.useEffect(()=>{var v;!e&&u.current&&((v=u.current.querySelector("input"))==null||v.focus())},[e]);const E=o.useCallback(v=>{let{target:w}=v;g(w.value)},[g]),f=o.useCallback(v=>{let{nativeEvent:w}=v;w.keyCode===13?d(m):w.keyCode===27&&s()},[m,d,s]);return n.createElement("div",{ref:u},n.createElement(is,{"aria-label":i,id:`${r}`,"data-testid":"inline-input-form",value:m,onKeyDown:f,onChange:E,placeholder:c,hasError:!!a,hint:a,$isInverted:l}))},ir=we(null),cs=t=>{let{children:e}=t;const a=o.useRef(),r=o.useRef(null);o.useEffect(()=>{var s;a.current=(s=document==null?void 0:document.getElementById("web-stories-dashboard"))==null?void 0:s.querySelector(["button","a"])},[]);const l=o.useCallback(()=>{var s,d,c;(d=(s=document.documentElement)==null?void 0:s.scrollTo)==null||d.call(s,{top:0,behavior:"smooth"}),(c=a.current)==null||c.focus()},[]),i=o.useMemo(()=>({state:{scrollFrameRef:r},actions:{scrollToTop:l}}),[l]);return n.createElement(ir.Provider,{value:i},e)},cr=()=>{const t=ln(ir);if(!t)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return t},ds=y.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),us=t=>{let{children:e}=t;const{state:{scrollFrameRef:a}}=cr();return n.createElement(ds,{ref:a},e)},ms=y.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],Ya.LAYOUT_FIXED),ps=t=>{let{children:e}=t;return n.createElement(ms,null,e)},hs=y.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],be,be),gs=y.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],t=>{let{fullWidth:e}=t;return e?"100%":`calc(100% - ${Xe}px)`},t=>{let{fullWidth:e}=t;return e?"0":`${Xe}px`},be),fs=y.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],t=>{let{topOffset:e}=t;return`${e}px`},Xe,t=>{let{theme:e}=t;return e.colors.bg.primary},Ya.LAYOUT_FIXED,cn.outCubic,be,t=>{let{isOpen:e}=t;return e?1:0},t=>{let{isOpen:e}=t;return e?"visible":"hidden"},t=>{let{isOpen:e}=t;return e?"none":"-100%"}),dr=y.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var _e;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_e||(_e={}));var ua=function(t){return t},ma="beforeunload",bs="hashchange",ys="popstate";function Es(t){t===void 0&&(t={});var e=t,a=e.window,r=a===void 0?document.defaultView:a,l=r.history;function i(){var L=ga(r.location.hash.substr(1)),I=L.pathname,R=I===void 0?"/":I,U=L.search,F=U===void 0?"":U,G=L.hash,P=G===void 0?"":G,$=l.state||{};return[$.idx,ua({pathname:R,search:F,hash:P,state:$.usr||null,key:$.key||"default"})]}var s=null;function d(){if(s)E.call(s),s=null;else{var L=_e.Pop,I=i(),R=I[0],U=I[1];if(E.length){if(R!=null){var F=u-R;F&&(s={action:L,location:U,retry:function(){O(F*-1)}},O(F))}}else S(L)}}r.addEventListener(ys,d),r.addEventListener(bs,function(){var L=i(),I=L[1];mt(I)!==mt(m)&&d()});var c=_e.Pop,p=i(),u=p[0],m=p[1],g=ha(),E=ha();u==null&&(u=0,l.replaceState(qt({},l.state,{idx:u}),""));function f(){var L=document.querySelector("base"),I="";if(L&&L.getAttribute("href")){var R=r.location.href,U=R.indexOf("#");I=U===-1?R:R.slice(0,U)}return I}function v(L){return f()+"#"+(typeof L=="string"?L:mt(L))}function w(L,I){return I===void 0&&(I=null),ua(qt({pathname:m.pathname,hash:"",search:""},typeof L=="string"?ga(L):L,{state:I,key:ws()}))}function _(L,I){return[{usr:L.state,key:L.key,idx:I},v(L)]}function T(L,I,R){return!E.length||(E.call({action:L,location:I,retry:R}),!1)}function S(L){c=L;var I=i();u=I[0],m=I[1],g.call({action:c,location:m})}function C(L,I){var R=_e.Push,U=w(L,I);function F(){C(L,I)}if(T(R,U,F)){var G=_(U,u+1),P=G[0],$=G[1];try{l.pushState(P,"",$)}catch{r.location.assign($)}S(R)}}function x(L,I){var R=_e.Replace,U=w(L,I);function F(){x(L,I)}if(T(R,U,F)){var G=_(U,u),P=G[0],$=G[1];l.replaceState(P,"",$),S(R)}}function O(L){l.go(L)}var H={get action(){return c},get location(){return m},createHref:v,push:C,replace:x,go:O,back:function(){O(-1)},forward:function(){O(1)},listen:function(I){return g.push(I)},block:function(I){var R=E.push(I);return E.length===1&&r.addEventListener(ma,pa),function(){R(),E.length||r.removeEventListener(ma,pa)}}};return H}function pa(t){t.preventDefault(),t.returnValue=""}function ha(){var t=[];return{get length(){return t.length},push:function(a){return t.push(a),function(){t=t.filter(function(r){return r!==a})}},call:function(a){t.forEach(function(r){return r&&r(a)})}}}function ws(){return Math.random().toString(36).substr(2,8)}function mt(t){var e=t.pathname,a=e===void 0?"/":e,r=t.search,l=r===void 0?"":r,i=t.hash,s=i===void 0?"":i;return l&&l!=="?"&&(a+=l.charAt(0)==="?"?l:"?"+l),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function ga(t){var e={};if(t){var a=t.indexOf("#");a>=0&&(e.hash=t.substr(a),t=t.substr(0,a));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}var ur=we({state:{activeRoute:"",currentPath:"",queryParams:{},availableRoutes:[],defaultRoute:""},actions:{push:()=>{},replace:()=>{},setAvailableRoutes:()=>[]}});function De(){return Le(ur,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe)}function Lt(t){return t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:t.startsWith("/")?`#${t}`:t===""?"#/":`${window.location.hash}/${t}`}function vs(t){let{currentPath:e,path:a,availableRoutes:r,defaultRoute:l,isDefault:i=!1,exact:s=!1}=t;const d=new RegExp(`^${a}`).exec(e);if(!d&&!i)return null;const c=d==null?void 0:d[0];return i&&r.filter(p=>e.startsWith(p)).length<=1?l:s&&e!==c?null:c}function pt(t){let{component:e,path:a,exact:r=!1,isDefault:l=!1}=t;const{availableRoutes:i,currentPath:s,defaultRoute:d}=De(c=>{let{state:p}=c;return p});return vs({currentPath:s,availableRoutes:i,defaultRoute:d,path:a,exact:r,isDefault:l})?e:null}const mr=we({actions:{},state:{}});function pr(){return Le(mr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe)}function Ss(t){let{children:e}=t;const[a,r]=o.useState(!1),l=o.useCallback(()=>{r(!a)},[a]),i=o.useMemo(()=>({actions:{toggleSideBar:l},state:{sideBarVisible:a}}),[a,l]);return n.createElement(mr.Provider,{value:i},e)}const ht=y.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),Ts=y(Ne).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),fa=y.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),ba=y.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),ya=re(["span{color:",";}svg path{stroke:",";}"],t=>{let{theme:e}=t;return e.colors.interactiveFg.brandPress},t=>{let{theme:e}=t;return e.colors.interactiveFg.brandPress}),Ea=y(Ra).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})(t=>{let{active:e,theme:a,isIconLink:r}=t;return re([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],r&&re(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),a.colors.fg.secondary,e&&ya,ya)}),_s=y(q.Span).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),Cs=y(q.Paragraph).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})(t=>{let{theme:e}=t;return re(["color:",";"],e.colors.fg.secondary)});function at(){return at=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},at.apply(this,arguments)}const Is=y.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);function Ls(){const t=De(f=>{let{state:v}=f;return v.activeRoute}),{newStoryURL:e,version:a,leftRailSecondaryNavigation:r,canViewDefaultTemplates:l,styleConstants:{topOffset:i}}=Q(),s=o.useRef(null),d=o.useRef(null),{state:{sideBarVisible:c},actions:{toggleSideBar:p}}=pr(),u=o.useCallback(f=>{let{target:v}=f;v!==s.current&&v!==d.current&&p()},[p,s,d]),m=o.useCallback(()=>{c&&p()},[p,c]);Pe(s,m,[c]),o.useLayoutEffect(()=>{c&&s.current&&s.current.focus()},[c]);const g=o.useCallback(()=>{he("create_new_story")},[]),E=o.useCallback((f,v)=>{dn(f,v.trackingEvent)},[]);return n.createElement(fs,{onClickCapture:u,ref:s,isOpen:c,topOffset:i,role:"navigation","aria-label":h("Main dashboard navigation","web-stories")},n.createElement("div",{ref:d},n.createElement(Ts,{forwardedAs:"h2"},n.createElement(to,{title:h("Web Stories Dashboard","web-stories")})),n.createElement(ht,null,n.createElement(kt,{type:ne.Quaternary,size:ce.Small,href:e,onClick:g},h("Create New Story","web-stories"))),n.createElement(ht,null,n.createElement(fa,null,wo.map(f=>{let{Icon:v,...w}=f;return w.value===Z.TEMPLATES_GALLERY&&!l?null:n.createElement(ba,{key:w.value},n.createElement(Ea,at({active:t===w.value,href:Lt(w.value),size:N.Small,isBold:!0,isIconLink:!!v,"aria-label":t===w.value?A(h("%s (active view)","web-stories"),w.label):w.label},w.isExternal&&{rel:"noreferrer",target:"_blank",onClick:_=>E(_,w)}),n.createElement(Is,null,v&&n.createElement(v,{width:"22px"})),n.createElement(_s,{size:N.Small,isBold:!0},w.label)))})))),n.createElement(ht,null,r&&n.createElement(fa,null,r.map(f=>n.createElement(ba,{key:f.value},n.createElement(Ea,at({active:t===f.value,href:Lt(f.value),size:N.Small,"aria-label":t===f.value?A(h("%s (active view)","web-stories"),f.label):f.label},f.isExternal&&{rel:"noreferrer",target:"_blank",onClick:v=>E(v,f)}),n.createElement(q.Span,{size:N.Small,isBold:!0},f.label))))),n.createElement(Cs,{size:N.XSmall},A(h("© %1$s Google Version %2$s","web-stories"),new Date().getFullYear(),a))))}var wa;function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ot.apply(this,arguments)}const Os=o.memo(t=>{let{title:e,titleId:a,...r}=t;return o.createElement("svg",Ot({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":a},r),e?o.createElement("title",{id:a},e):null,wa||(wa=o.createElement("path",{fill:"currentColor",d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})))}),xs=y(Os).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],t=>{let{theme:e}=t;return e.colors.interactiveFg.brandNormal}),As=y.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],t=>{let{theme:e}=t;return e.borders.radius.small},$t,t=>{let{showOnlyOnSmallViewport:e}=t;return e&&re(["display:none;@media screen and (max-width:","px){display:inline-block;}"],be)});function Rs(t){let{showOnlyOnSmallViewport:e}=t;const{actions:a}=pr();return n.createElement(As,{onClick:a.toggleSideBar,showOnlyOnSmallViewport:e,"aria-label":h("Toggle main navigation","web-stories")},n.createElement(xs,{"aria-hidden":!0}))}const $s=y(ie).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})(t=>{let{$isVisible:e,theme:a}=t;return re(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],a.colors.opacity.white64,e?"auto":"none",Number(e))}),ks=y(un).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),hr=()=>{const[t,e]=o.useState(!1),{actions:{scrollToTop:a}}=cr(),r=Ee(()=>e(window.scrollY>0),100);return o.useEffect(()=>(window.addEventListener("scroll",r,{passive:!0}),function(){window.removeEventListener("scroll",r,{passive:!0})}),[r]),n.createElement($s,{disabled:!t,"aria-label":h("Scroll back to top","web-stories"),"data-testid":"scroll-to-top-button",$isVisible:t,onClick:a,variant:Ye.Circle},n.createElement(ks,{"aria-hidden":!0}))},Ms=y.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],mn((t,e)=>{let{paragraph:a}=t,{Small:r}=e;return a[r]})),Ds=y.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),Ps=y.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],t=>{let{theme:e}=t;return e.colors.bg.secondary}),Ns=y(Ps).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],t=>{let{theme:e}=t;return e.colors.bg.secondary},t=>{let{topOffset:e}=t;return`${e}px`},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e}=t;return e.borders.radius.small},t=>{let{theme:e}=t;return e.borders.radius.small}),xe=y.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),Fs=y(xe).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),va=y(xe).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),Bs=y(xe).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],t=>{let{theme:e}=t;return e.breakpoint.tabletMax}),js=y(xe).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Us=y(xe).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]);y(xe).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]);const gr=y.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],t=>{let{theme:e}=t;return e.breakpoint.tabletMax}),ge=y.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;word-break:break-word;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,t=>{let{theme:e}=t;return e.colors.standard.black}),Gs=y(ge).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],t=>{let{theme:e}=t;return e.colors.fg.secondary},t=>{let{theme:e}=t;return e.breakpoint.tabletMax});y(ge).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]);y(ge).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]);const Vs=y(ge).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],Ze[de.THUMBNAIL]);function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xt.apply(this,arguments)}function jt(t){let{placement:e=st.Bottom,...a}=t;const{isRTL:r}=Q(),l=r?hn[e]:e;return n.createElement(pn,xt({placement:l},a))}const zs=y.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),Hs=y.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],t=>{let{theme:e}=t;return e.borders.radius.small},$t,t=>{let{theme:e}=t;return e.colors.interactiveFg.hover},t=>{let{theme:e}=t;return e.colors.interactiveFg.active});function Ys(t){let{onPress:e,layoutStyle:a}=t;return n.createElement(zs,null,n.createElement(jt,{title:sa[a],placement:st.BottomEnd,hasTail:!0},n.createElement(Hs,{"aria-label":sa[a],onClick:e},a===ee.GRID&&n.createElement(gn,{height:"32px",width:"32px","data-testid":"list-icon"}),a===ee.LIST&&n.createElement(fn,{height:"32px",width:"32px","data-testid":"grid-icon"}))))}const Ws=t=>{let{availableRoutes:e,currentPath:a,defaultRoute:r}=t;return e.filter(l=>a.startsWith(l)).length<=1?r:a};function qs(t){let{children:e,...a}=t;const r=o.useRef(a.history||Es()),[l,i]=o.useState(r.current.location.pathname),[s,d]=o.useState([]),c=Z.DASHBOARD,p=o.useMemo(()=>Ws({availableRoutes:s,currentPath:l,defaultRoute:c}),[s,l,c]),u=f=>{const v=new URLSearchParams(f);return Object.fromEntries(v)},[m,g]=o.useState(u(r.current.location.search));o.useEffect(()=>r.current.listen(f=>{let{location:v}=f;g(u(v.search)),i(v.pathname)}),[]);const E=o.useMemo(()=>({state:{activeRoute:p,currentPath:l,queryParams:m,availableRoutes:s,defaultRoute:c},actions:{push:f=>r.current.push(f),replace:f=>r.current.replace(f),setAvailableRoutes:d}}),[p,s,l,c,m]);return n.createElement(ur.Provider,{value:E},e)}const Ks=Mt(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),Xs=Mt(["*:focus{outline:none !important;}"]),Zs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],Js=()=>{const[t,e]=o.useState(!1),a=l=>{!t&&Zs.includes(l.key)&&e(!0)},r=()=>{t&&e(!1)};return o.useEffect(()=>(document.addEventListener("keydown",a),document.addEventListener("mousedown",r),function(){document.removeEventListener("keydown",a),document.removeEventListener("mousedown",r)})),o.useEffect(()=>{document.body.classList.toggle(Eo,t)},[t]),t?null:n.createElement(Xs,null)},Sa=t=>Math.round(t/yn),Ta=t=>t<=be?de.TABLET:de.DESKTOP,Qs=(t,e)=>{let{bp:a,respectSetWidth:r,availableContainerSpace:l}=e;if(r)return{width:t,height:Sa(t)};a===de.DESKTOP&&(l-=Xe);const i=Math.floor(l/t),s=t+(l-(t*i+_t.COLUMN_GAP*(i-1)+2*Ft.GUTTER))/i;return{width:s,height:Sa(s)}},_a=t=>window.innerWidth<be?be:t;function fr(){var g;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{thumbnailMode:e=!1,isGrid:a}=t,{containerId:r}=Q(),l=o.useRef(document.getElementById(r)),[i,s]=o.useState(window.innerWidth),[d,c]=o.useState(Ta(i)),[p,u]=o.useState(_a(((g=l.current)==null?void 0:g.offsetWidth)||window.innerWidth)),m=Ee(E=>{s(E)},500);return o.useEffect(()=>{c(Ta(i))},[i]),bn(l,E=>{let{width:f}=E;u(_a(f)),window.innerWidth!==i&&m(window.innerWidth)},[u,i,m]),o.useMemo(()=>({pageSize:Qs(Ze[e?de.THUMBNAIL:d],{respectSetWidth:!a||e,availableContainerSpace:p,bp:d})}),[d,a,e,p])}function el(t){let{filtersObject:e=Tt.filters,sortObject:a=Tt.sort,isLoading:r=!1,totalPages:l}=t;const[i,s]=o.useState(ee.GRID),[d,c]=o.useState(a),[p,u]=o.useState(e),[m,g]=o.useState(1),E=o.useRef(!1),[f,v]=o.useState(!1),{pageSize:w}=fr({thumbnailMode:i===ee.LIST,isGrid:i===ee.GRID}),_=o.useCallback(O=>{g(Da(O,{MIN:1,MAX:l}))},[l]),T=o.useCallback(O=>{c(O),_(1)},[_]),S=o.useCallback(O=>{u(O),_(1)},[_]),C=o.useCallback(()=>{const O=i===ee.LIST?ee.GRID:ee.LIST;s(O)},[i,s]),x=o.useCallback(()=>{E.current=!0,_(m+1)},[m,_]);return o.useEffect(()=>{var O;(O=p==null?void 0:p.search)!=null&&O.length&&he("search",{search_type:"dashboard_stories",search_term:p.search,search_filter:p.status,search_author_filter:p.author,search_order:d.order,search_orderby:d.orderby,search_view:i})},[p,d,i]),o.useEffect(()=>{r||(E.current=!1)},[r]),o.useEffect(()=>{l&&!f&&v(!0)},[l,f]),o.useEffect(()=>{f&&S(e)},[S,f,e]),o.useEffect(()=>{f&&T(a)},[T,f,a]),o.useMemo(()=>({view:{style:i,toggleStyle:C,pageSize:w},sort:{value:d.orderby,direction:d.order,set:T},filters:{value:p,set:S},page:{value:m,set:g,requestNextPage:x},initialPageReady:f,showStoriesWhileLoading:E}),[i,C,w,d,T,p,S,f,m,x])}b.shape({style:b.oneOf(Object.values(ee)),toggleStyle:b.func,pageSize:ar}),b.shape({filterId:b.number,toggleFilterId:b.func,queriedAuthors:b.arrayOf(b.shape({id:b.number,name:b.string})).isRequired,setQueriedAuthors:b.func}),b.shape({value:b.oneOfType([b.number,b.string]),set:b.func}),b.shape({value:b.oneOf(Object.values(M)),set:b.func,direction:b.oneOf(Object.values(te)),setDirection:b.func}),b.shape({value:b.number,set:b.func,requestNextPage:b.func}),b.shape({keyword:b.string,setKeyword:b.func}),b.shape({current:b.bool});function tl(t){let{totalPages:e,sortObject:a=Ke.sort,filtersObject:r=Ke.filters}=t;const[l,i]=o.useState(a),[s,d]=o.useState(r),[c,p]=o.useState(1),{pageSize:u}=fr({isGrid:!0}),m=o.useCallback(v=>{p(Da(v,{MIN:1,MAX:e}))},[e]),g=o.useCallback(()=>m(c+1),[c,m]),E=o.useCallback(v=>{i(v),m(1)},[m]),f=o.useCallback(v=>{d(v),m(1)},[m]);return o.useMemo(()=>({view:{style:ee.GRID,pageSize:u},sort:{value:l.orderby,direction:l.order,set:E},filters:{value:s,set:f},page:{value:c,set:p,requestNextPage:g}}),[u,l,E,c,g,s,f])}b.shape({style:b.oneOf(Object.values(ee)),pageSize:ar}),b.shape({value:b.oneOfType([b.number,b.string]),set:b.func}),b.shape({value:b.number,set:b.func,requestNextPage:b.func}),b.shape({keyword:b.string,setKeyword:b.func}),b.shape({value:b.oneOf(Object.values(Ie)),set:b.func});const al=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});function rl(t){let{config:e,children:a}=t;const r=En(al(),e),l={...We,colors:wn},{isRTL:i,flags:s,styleConstants:{leftOffset:d,topOffset:c}={}}=r;return n.createElement(vn,{features:s},n.createElement(Sn,{stylisPlugins:i?[Pa]:[]},n.createElement(Na,{theme:l},n.createElement(Tn,null),n.createElement(_n,null),n.createElement(ro,{config:r},n.createElement(Zo,null,n.createElement(Ss,null,n.createElement(qs,null,n.createElement(Cn,null,n.createElement(In,{value:{isRTL:i,leftOffset:d,topOffset:c}},n.createElement(Ks,null),n.createElement(Js,null),a)))))))))}Object.defineProperty(Pa,"name",{value:"stylisRTLPlugin"});function nl(t){return A(h("Poster of template page %s","web-stories"),t)}function ol(t){let{galleryPosters:e,isRTL:a,galleryLabel:r}=t;const[l,i]=o.useState(0),[s,d]=o.useState(),c=o.useRef(),p=o.useRef(),u=o.useRef({}),m=o.useCallback(f=>{i(f),d(f)},[]),g=o.useCallback(f=>{d(f)},[]);o.useEffect(()=>{e&&(i(0),d())},[e]),Dt({containerRef:c,gridRef:p,itemRefs:u,isRTL:a,currentItemId:s,items:e});const E=o.useMemo(()=>e.map((f,v)=>{const w=`gallery_item_${v}`,_=v+1,T=s?s===v:l===v;return n.createElement("div",{key:w,ref:S=>{u.current[v]=S},onFocus:()=>g(v)},n.createElement(er,{$isSelected:l===v,tabIndex:T?0:-1,onClick:()=>m(v),"aria-label":A(h(l===v?"Page %s (current page)":"Page %s","web-stories"),_)},n.createElement("picture",null,n.createElement("source",{srcSet:f.webp,type:"image/webp"}),n.createElement("source",{srcSet:f.png,type:"image/png"}),n.createElement("img",{src:f.png,decoding:"async",alt:nl(_),width:tt,height:et}))))}),[e,l,s,g,m]);return n.createElement(Jo,{ref:c},n.createElement(Qo,{ref:p,role:"group","aria-label":r,"data-testid":"mini-cards-container"},E),n.createElement(Qa,null,e[l]&&n.createElement("picture",null,n.createElement("source",{srcSet:e[l].webp,type:"image/webp"}),n.createElement("source",{srcSet:e[l].png,type:"image/png"}),n.createElement("img",{src:e[l].png,decoding:"async",alt:A(h("Active Page Preview - Page %s","web-stories"),l+1),width:tt,height:et}))))}function Me(){return Me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Me.apply(this,arguments)}const sl=t=>{let{onClose:e,onSecondary:a,onPrimary:r,primaryText:l,secondaryText:i,primaryRest:s,secondaryRest:d,actions:c,children:p,...u}=t;const m=o.useMemo(()=>l&&n.createElement(ie,Me({type:ne.Primary,size:ce.Small,onClick:()=>r==null?void 0:r()},s),l),[l,s,r]),g=o.useMemo(()=>i&&n.createElement(ie,Me({type:ne.Tertiary,size:ce.Small,onClick:()=>(a==null?void 0:a())||e()},d),i),[i,d,a,e]);return n.createElement(Na,{theme:We},n.createElement(Ln,Me({onClose:e},u,{actions:c||n.createElement(n.Fragment,null,g,m)}),p))},ye={Provider:cs,Scrollable:us,Fixed:ps},Ut="UPDATE_FILTER",Gt="UPDATE_SORT",Vt="REGISTER_FILTERS",br=(t,e)=>{let{type:a,payload:r={}}=e;switch(a){case Ut:{const l=["search","status"],{key:i,value:s}=r,d=t.filters.find(m=>m.key===i);if(!d)return t;if(s.filterId&&(d==null?void 0:d.filterId)===s.filterId){if(l.includes(i))return t;s.filterId=null}const c=t.filters.indexOf(d),p=[...t.filters];p[c]={...d,...s};const u={};for(const m of p)m.filterId&&(u[m.key]=m.filterId);return{...t,filters:p,filtersObject:u}}case Gt:{const{type:l,values:i}=r,s={},d=l==="story"?io:fo;for(const c in i)c in d&&Object.values(d[c]).includes(i[c])&&t.sortObject[c]!==i[c]&&(s[c]=i[c]);return Object.entries(s).length===0?t:{...t,sortObject:{...t.sortObject,...s}}}case Vt:{const{value:l}=r,i=t.filters.map(d=>d.key),s=l.filter(d=>!i.includes(d.key));return s.length?{...t,filters:[...s,...t.filters]}:t}default:return t}};function Ae(){return Le(Za,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe)}const gt={};function ll(){const{getTaxonomies:t,getTaxonomyTerms:e}=Ae(l=>{let{actions:{taxonomyApi:{getTaxonomies:i,getTaxonomyTerms:s}}}=l;return{getTaxonomies:i,getTaxonomyTerms:s}}),a=o.useCallback(async(l,i)=>{const{restBase:s,restPath:d}=l;return(await e(d,{search:i,per_page:-1})).map(c=>({...c,restBase:s,restPath:d}))},[e]),r=o.useCallback(async l=>{const{restBase:i}=l;return gt[i]||(gt[i]=await a(l)),gt[i]},[a]);return o.useCallback(async()=>(await t({hierarchical:!0,show_ui:!0})).map(l=>({key:l.restBase,restPath:l.restPath,placeholder:l.labels.allItems,ariaLabel:l.labels.filterByItem,noMatchesFoundLabel:l.labels.notFound,searchPlaceholder:l.labels.searchItems,query:i=>a(l,i),getPrimaryOptions:()=>r(l)})),[a,r,t])}let ft=null;function il(){const{getAuthors:t}=Ae(r=>{let{actions:{usersApi:{getAuthors:l}}}=r;return{getAuthors:l}}),e=o.useCallback(async r=>(await t(r)).map(l=>{let{id:i,name:s}=l;return{id:i,name:s}}),[t]),a=o.useCallback(async()=>(ft||(ft=await e()),ft),[e]);return o.useCallback(()=>({key:"author",ariaLabel:h("Filter stories by author","web-stories"),placeholder:h("All Authors","web-stories"),searchPlaceholder:h("Search Authors","web-stories"),noMatchesFoundLabel:h("No authors found","web-stories"),query:e,getPrimaryOptions:a}),[e,a])}const yr=we({state:{},actions:{}});function cl(t){let{children:e}=t;const a=ll(),r=il(),[l,i]=o.useReducer(br,{filters:[],filtersObject:{},sortObject:{}}),s=o.useCallback(m=>{i({type:Gt,payload:{type:"story",values:m}})},[]),d=o.useCallback((m,g)=>{i({type:Ut,payload:{key:m,value:g}})},[]),c=o.useCallback(m=>{i({type:Vt,payload:{value:m}})},[]),p=o.useCallback(async()=>{const m=[...await a(),r()].filter(g=>!!g);m.length&&c(m)},[c,r,a]),u=o.useMemo(()=>({state:l,actions:{updateFilter:d,updateSort:s,registerFilters:c}}),[l,d,s,c]);return o.useEffect(()=>{p()},[p]),n.createElement(yr.Provider,{value:u},e)}function Fe(){return Le(yr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe)}const dl=y(On).withConfig({displayName:"sortDropDown__StyledDropDown",componentId:"sc-lqi6ue-0"})(["width:210px;"]);function ul(t){let{pageSortOptions:e,pageSortDefaultOption:a,currentSort:r,handleSortChange:l}=t;const i=o.useCallback((s,d)=>{l({orderby:d})},[l]);return n.createElement(dl,{ariaLabel:h("Choose sort option for display","web-stories"),options:e,type:ls.DropDown,selectedValue:(r==null?void 0:r.orderby)||a,onMenuItemClick:i})}const ml=y.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["display:grid;gap:1rem;min-height:76px;grid-template-columns:1fr auto auto;justify-content:start;align-items:center;margin-top:-10px;"]),Ca=y.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),pl=y.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;flex-wrap:wrap;margin:1rem 0;row-gap:1rem;justify-self:end;"]),hl=y.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-3"})([""]),gl=y(xn).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-4"})(["max-width:","px;"],350);function Er(t){let{handleLayoutSelect:e,resultsLabel:a,layoutStyle:r,pageSortOptions:l=[],pageSortDefaultOption:i,showGridToggle:s,showSortDropdown:d,filters:c=[],currentSort:p,handleSortChange:u}=t;const{updateFilter:m}=Fe(g=>{let{actions:{updateFilter:E}}=g;return{updateFilter:E}});return n.createElement(lt,null,n.createElement(hl,{id:"body-view-options-header"}),n.createElement(ml,null,n.createElement(q.Span,{size:N.Small},n.createElement(An,null,a)),n.createElement(pl,null,c!=null&&c.length?c.map(g=>n.createElement(Ca,{key:g.key,title:g.placeholder},n.createElement(gl,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:h("Search results","web-stories"),"aria-label":g.ariaLabel,onChange:E=>{let{id:f}=E;m(g.key,{filterId:f})},getOptionsByQuery:g.query,getPrimaryOptions:g.getPrimaryOptions,selectedId:g.filterId,placeholder:g.placeholder,noMatchesFoundLabel:g.noMatchesFoundLabel,searchPlaceholder:g.searchPlaceholder,offsetOverride:!0,maxWidth:350,containerStyleOverrides:re(["flex-direction:column;"])}))):null,d&&n.createElement(Ca,null,n.createElement(ul,{pageSortOptions:l,pageSortDefaultOption:i,currentSort:p,handleSortChange:u}))),s&&n.createElement(Ys,{layoutStyle:r,onPress:e})))}const fl=y.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),bl=y(ao).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);function wr(t){let{children:e}=t;return n.createElement(fl,null,n.createElement(bl,{"aria-hidden":!0,width:274,height:118}),e)}const yl=y(lt).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],t=>{let{theme:e}=t;return e.colors.divider.secondary}),El=y(Va).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),wl=y.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),vl=y.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),zt=t=>{let{children:e,heading:a,searchPlaceholder:r,searchOptions:l=[],showSearch:i,handleSearchChange:s,searchValue:d,onClear:c=Fa}=t;return n.createElement(yl,null,n.createElement(El,{as:"h2",size:N.Small},n.createElement(Rs,{showOnlyOnSmallViewport:!0}),a),e&&n.createElement(wl,null,e),i&&n.createElement(vl,null,n.createElement(Jn,{placeholder:r,searchValue:d,options:l,handleSearchValueChange:s,onClear:c,emptyText:h("No options available","web-stories")})))},Ce=t=>t===""?h("Untitled","web-stories"):t,vr=()=>{},Sr=t=>{let{menuItems:e,story:a,isLocked:r}=t;const l=e.default?()=>e.default(a):vr;return e.filter(i=>i.isEnabled===void 0||i.isEnabled(a)).map(i=>{let{capability:s,value:d,...c}=i;const p=(m=>e.find(g=>(g==null?void 0:g.value)===m))(d),u={onClick:p?()=>p.action(a):l};switch(d){case Y.OPEN_IN_EDITOR:u.href=a.bottomTargetAction,u.openNewTab=!1;break;case Y.OPEN_STORY_LINK:u.href=a.previewLink,u.openNewTab=!0;break;case Y.RENAME:case Y.DELETE:u.disabled=r}return c==null||delete c.action,{...c,...u}})},Sl=y.div.withConfig({displayName:"components__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],t=>{let{theme:e}=t;return e.colors.gradient.placeholder},Ze[de.THUMBNAIL],Ze[de.THUMBNAIL]/(3/4),t=>{let{theme:e}=t;return e.borders.radius.small}),Tl=y.div.withConfig({displayName:"components__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),_l=y(Ba).withConfig({displayName:"components__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],t=>{let{theme:e}=t;return e.colors.interactiveBg.brandNormal},t=>{let{theme:e}=t;return e.colors.standard.white},t=>{let{theme:e}=t;return e.borders.radius.round}),Cl=y(gr).withConfig({displayName:"components__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],le,le),Il=y.div.withConfig({displayName:"components__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],le,le,le);function Ll(t){window.getSelection().selectAllChildren(t.target)}function Ol(){window.getSelection().removeAllRanges()}const xl=t=>{var u;let{story:e,renameStory:a,userId:r,storyMenu:l,storyStatus:i}=t;const s=o.useMemo(()=>(e==null?void 0:e.locked)&&r!==(e==null?void 0:e.lockUser.id),[e,r]),d=Ce(e.title),c=o.useMemo(()=>Sr({menuItems:l.menuItems,story:e,isLocked:s}),[l,e,s]),p=o.useMemo(()=>c.length?n.createElement(sr,{menuLabel:A(h("Context menu for %s","web-stories"),d),onMoreButtonSelected:(m,g)=>l.handleMenuToggle(g),contextMenuId:l.contextMenuId,storyId:e.id,menuItems:c,verticalAlign:"center"}):null,[c,d,l,e]);return n.createElement(Cl,{"data-testid":`story-list-item-${e.id}`},n.createElement(Vs,null,n.createElement(jt,{title:s&&(e!=null&&e.lockUser.name)?A(h("%s is currently editing this story","web-stories"),e==null?void 0:e.lockUser.name):""},n.createElement(Tl,null,n.createElement(Sl,e.featuredMediaUrl?{src:e.featuredMediaUrl,alt:A(h("%s Poster image","web-stories"),d),as:"img",decoding:"async"}:null),s&&n.createElement(_l,null)))),n.createElement(ge,null,n.createElement(Il,null,a.id===e.id?n.createElement(lr,{onEditComplete:m=>a.handleOnRenameStory(e,m),onEditCancel:a.handleCancelRename,value:e.title,id:e.id,label:h("Rename story","web-stories")}):n.createElement(n.Fragment,null,n.createElement(Ne,{tabIndex:0,onFocus:Ll,onBlur:Ol,size:N.XXXSmall,as:"h3","aria-label":s?A(h("%1$s (locked by %2$s)","web-stories"),d,e==null?void 0:e.lockUser.name):d},d),p))),n.createElement(ge,null,n.createElement(q.Span,{size:N.Small},((u=e.author)==null?void 0:u.name)||"—")),n.createElement(ge,null,n.createElement(q.Span,{size:N.Small},Ct(e.createdGmt))),n.createElement(ge,null,n.createElement(q.Span,{size:N.Small},Ct(e.modifiedGmt))),i!==k.DRAFT&&n.createElement(Gs,null,n.createElement(q.Span,{size:N.Small},uo[e==null?void 0:e.status])))},{focusableOutlineCSS:Al}=Rn,Rl=y.div.withConfig({displayName:"components__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),Tr=y.div.withConfig({displayName:"components__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],t=>{let{theme:e}=t;return e.colors.fg.primary},t=>{let{active:e}=t;return e?"visible":"hidden"},t=>{let{asc:e}=t;return e&&re(["transform:rotate(180deg);"])}),$l=y.div.withConfig({displayName:"components__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),bt=y(Tr).withConfig({displayName:"components__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],t=>{let{active:e}=t;return!e&&"display: none;"},t=>{let{theme:e}=t;return e.breakpoint.mobile}),$e=y(q.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"components__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],t=>{let{theme:e}=t;return e.colors.blue[70]},t=>{let{theme:e}=t;return Al(e.colors.border.focus,e.colors.bg.secondary)}),kl={[te.DESC]:te.ASC,[te.ASC]:te.DESC};function Ml(t){let{hideStoryList:e,renameStory:a,stories:r,storyMenu:l}=t;const{userId:i,styleConstants:{topOffset:s}}=Q(),{filters:d,sortObject:c,updateSort:p}=Fe(w=>{let{state:{filters:_,sortObject:T},actions:{updateSort:S}}=w;return{filters:_,sortObject:T,updateSort:S}}),[u,m]=o.useMemo(()=>[c==null?void 0:c.orderby,c==null?void 0:c.order],[c]),g=o.useMemo(()=>d.filter(w=>{let{key:_}=w;return _==="status"}).filterId,[d]),E=o.useCallback(w=>{p(w!==u?{orderby:w,order:Ha[w]}:{order:kl[m]})},[p,u,m]),f=o.useCallback((w,_)=>{let{key:T}=w;T==="Enter"&&E(_)},[E]),v=o.useMemo(()=>!e&&r.map(w=>n.createElement(xl,{key:`story-${w.id}`,story:w,userId:i,renameStory:a,storyStatus:g,storyMenu:l})),[e,a,r,g,l,i]);return n.createElement(Rl,{"data-testid":"story-list-view"},n.createElement(Ms,{"aria-label":h("List view of created stories","web-stories")},n.createElement(Ns,{topOffset:s},n.createElement(gr,null,n.createElement(Fs,{onClick:()=>E(M.NAME),onKeyDown:w=>f(w,M.NAME)},n.createElement($e,{"aria-label":h("Title, select to sort table by story title","web-stories"),size:N.Small,isBold:!0},h("Title","web-stories"))),n.createElement(Us,{onClick:()=>E(M.NAME),onKeyDown:w=>f(w,M.NAME)},n.createElement($e,{"aria-hidden":!0,active:u===M.NAME,size:N.Small,isBold:!0},h("Title","web-stories")),n.createElement(Tr,{active:u===M.NAME,asc:m===te.ASC},n.createElement(Ue,null))),n.createElement(js,null,n.createElement($e,{"aria-label":h("Author, select to sort table by story author","web-stories"),onClick:()=>E(M.CREATED_BY),onKeyDown:w=>f(w,M.CREATED_BY),active:u===M.CREATED_BY,size:N.Small,isBold:!0},h("Author","web-stories")),n.createElement(bt,{"aria-hidden":!0,active:u===M.CREATED_BY,asc:m===te.ASC},u===M.CREATED_BY?n.createElement(Ue,null):n.createElement($l,null))),n.createElement(va,null,n.createElement($e,{"aria-label":h("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>E(M.DATE_CREATED),onKeyDown:w=>f(w,M.DATE_CREATED),active:u===M.DATE_CREATED,size:N.Small,isBold:!0},h("Date Created","web-stories")),n.createElement(bt,{"aria-hidden":!0,active:u===M.DATE_CREATED,asc:m===te.ASC},n.createElement(Ue,null))),n.createElement(va,null,n.createElement($e,{"aria-label":h("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>E(M.LAST_MODIFIED),onKeyDown:w=>f(w,M.LAST_MODIFIED),active:u===M.LAST_MODIFIED,size:N.Small,isBold:!0},h("Last Modified","web-stories")),n.createElement(bt,{"aria-hidden":!0,active:u===M.LAST_MODIFIED,asc:m===te.ASC},n.createElement(Ue,null))),g!==k.DRAFT&&n.createElement(Bs,null,n.createElement(q.Span,{isBold:!0,size:N.Small},h("Publish State","web-stories"))))),n.createElement(Ds,null,v)))}const rt=y.div.withConfig({displayName:"components__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return e.colors.gradient.posterOverlay}),nt=y.div.withConfig({displayName:"components__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return e.colors.opacity.black3}),_r=y.div.withConfig({displayName:"components__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Cr=y.div.withConfig({displayName:"components__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return e.colors.gradient.placeholder}),Ir=y(Bt).withConfig({displayName:"components__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],t=>{let{$posterHeight:e}=t;return`${e}px auto`});Ir.propTypes={$posterHeight:b.number};const Dl=y.div.withConfig({displayName:"components__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),Pl=y.a.withConfig({displayName:"components__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],t=>{let{theme:e}=t;return e.borders.radius.medium},t=>{let{theme:e}=t;return`4px solid ${e.colors.interactiveBg.active}`}),Nl=y.div.withConfig({displayName:"components__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),Lr=y.div.withConfig({displayName:"components__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),Fl=y(Lr).withConfig({displayName:"components__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),Bl=y.div.withConfig({displayName:"components__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),Ia=y.div.withConfig({displayName:"components__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;align-items:space-between;flex-direction:column;align-self:flex-end;"]),jl=y(Ne).attrs({as:"h3",size:N.XSmall}).withConfig({displayName:"components__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],t=>{let{theme:e}=t;return e.colors.inverted.fg.primary}),Ve=y(q.Span).attrs({size:N.XSmall}).withConfig({displayName:"components__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],t=>{let{theme:e}=t;return e.colors.inverted.fg.primary}),Ul=y.img.withConfig({displayName:"components__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],t=>{let{theme:e}=t;return`2px solid ${e.colors.interactiveBg.brandNormal}`},t=>{let{theme:e}=t;return e.borders.radius.small}),Gl=y(Ba).withConfig({displayName:"components__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],t=>{let{theme:e}=t;return e.colors.inverted.fg.primary}),Vl=t=>{let{author:e,contextMenu:a,displayDate:r,editMode:l,formattedTitle:i,id:s,isLocked:d,lockUser:c={},onEditComplete:p,onEditCancel:u,status:m,title:g}=t;const E=o.useMemo(()=>{if(!r)return null;switch(m){case k.PUBLISH:return A(h("Published %s","web-stories"),r);case k.FUTURE:return A(h("Scheduled %s","web-stories"),r);default:return A(h("Modified %s","web-stories"),r)}},[m,r]),{name:f,avatar:v}=c,w=d&&v&&n.createElement(Fl,null,n.createElement(jt,{position:st.BottomStart,title:f&&A(h("%s is currently editing this story","web-stories"),f)},n.createElement(Ul,{src:v,alt:f,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"})));return n.createElement(Nl,null,w,l?n.createElement(lr,{onEditComplete:p,onEditCancel:u,value:g,id:s,label:h("Rename story","web-stories"),isInverted:!0}):n.createElement(Lr,null,d&&n.createElement(Gl,null),n.createElement(jl,null,i)),n.createElement(Bl,null,n.createElement(Ia,null,m===k.DRAFT&&n.createElement(Ve,{isBold:!0},h("Draft","web-stories")),m===k.PENDING&&n.createElement(Ve,{isBold:!0},h("Pending","web-stories")),(e==null?void 0:e.name)&&n.createElement(Ve,null,e==null?void 0:e.name),n.createElement(Ve,{className:"dashboard-grid-item-date"},E)),n.createElement(Ia,null,a)))};function ot(){return ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ot.apply(this,arguments)}const Or=o.forwardRef((t,e)=>{var w,_;let{onFocus:a,isActive:r,pageSize:l,renameStory:i,story:s,storyMenu:d}=t;const{userId:c}=Q(),p=r?0:-1,u=i?{editMode:(i==null?void 0:i.id)===(s==null?void 0:s.id),onEditComplete:T=>i==null?void 0:i.handleOnRenameStory(s,T),onEditCancel:i==null?void 0:i.handleCancelRename}:{},m=o.useMemo(()=>(s==null?void 0:s.locked)&&c!==(s==null?void 0:s.lockUser.id),[s,c]),g=o.useMemo(()=>Sr({menuItems:d.menuItems,story:s,isLocked:m}),[d,s,m]),E=Ct((s==null?void 0:s.status)===k.DRAFT?s==null?void 0:s.modifiedGmt:s==null?void 0:s.createdGmt),f=Ce(s.title),v=o.useMemo(()=>g.length?n.createElement(sr,{menuLabel:m?A(h("Context menu for %1$s (locked by %2$s)","web-stories"),f,s==null?void 0:s.lockUser.name):A(h("Context menu for %s","web-stories"),f),itemActive:r,tabIndex:p,onMoreButtonSelected:d.handleMenuToggle,contextMenuId:d.contextMenuId,storyId:s.id,isInverted:!0,menuItems:g,menuStyleOverrides:re(["margin:0 0 0 auto;"])}):null,[m,f,(w=s==null?void 0:s.lockUser)==null?void 0:w.name,s.id,r,p,d,g]);return n.createElement(Ir,{"data-testid":`story-grid-item-${s.id}`,onFocus:a,$posterHeight:l.height,ref:e,"aria-label":A(h("Details about %s","web-stories"),f)},n.createElement(_r,null,n.createElement(Dl,null,n.createElement(Cr,ot({},s.featuredMediaUrl?{alt:A(h("%s Poster image","web-stories"),f),as:"img",src:s.featuredMediaUrl,decoding:"async"}:null,{width:tt,height:et})),n.createElement(rt,null),n.createElement(nt,null,((_=s==null?void 0:s.capabilities)==null?void 0:_.hasEditAction)&&n.createElement(Pl,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:p,href:s.editStoryLink},n.createElement($n,null,A(h("Open %s in Editor","web-stories"),f))),n.createElement(Vl,ot({author:s.author,contextMenu:v,displayDate:E,formattedTitle:f,id:s.id,isLocked:m,lockUser:s==null?void 0:s.lockUser,status:s==null?void 0:s.status,title:s.title},u))))))});Or.displayName="StoryGridItem";const zl=y(nr).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],Ft.GUTTER),Hl=t=>{let{stories:e,pageSize:a,storyMenu:r,renameStory:l,returnStoryFocusId:i}=t;const{isRTL:s}=Q(),d=o.useRef(),c=o.useRef(),p=o.useRef({}),[u,m]=o.useState(),g=o.useRef(),E=o.useMemo(()=>e.map(T=>{let{id:S}=T;return S}),[e]);Dt({containerRef:d,gridRef:c,itemRefs:p,isRTL:s,currentItemId:u,items:e}),o.useEffect(()=>{var T,S,C;if(!u&&(i!=null&&i.value)&&!g.current){const x=i==null?void 0:i.value;m(x);const O=(C=(S=(T=p.current)==null?void 0:T[x])==null?void 0:S.querySelectorAll(["button","a"]))==null?void 0:C[0];O==null||O.focus()}},[u,i]),o.useEffect(()=>{u&&(g.current=u)},[u]);const f=o.useCallback((T,S)=>{if(r.handleMenuToggle(S),S<0&&(T==null?void 0:T.keyCode)===9){const C=T!=null&&T.shiftKey?u:E[E.indexOf(u)+1];i.set(C),g.current=null,m(null)}},[u,E,i,r]),v=o.useCallback(()=>{g.current=null,m(null),i.set(null)},[i]);Pe(d,()=>m(null),[]);const w=o.useMemo(()=>{const T=[Y.DELETE,Y.RENAME,Y.DUPLICATE],S=r.menuItems.map(C=>{const x={...C};return T.includes(C==null?void 0:C.value)&&(x.action=O=>{v(),C.action(O)}),x});return{...r,handleMenuToggle:f,menuItems:S}},[f,r,v]),_=o.useMemo(()=>e.map(T=>n.createElement(Or,{onFocus:()=>m(T.id),isActive:u===T.id,ref:S=>{p.current[T.id]=S},key:T.id,pageSize:a,renameStory:l,story:T,storyMenu:w})),[u,w,a,l,e]);return n.createElement("div",{ref:d},n.createElement(zl,{pageSize:a,ref:c,role:"list",ariaLabel:h("Viewing stories","web-stories")},_))},La="DELETE_STORY";function Yl(t){let{loading:e,storyActions:a,stories:r,view:l}=t;const[i,s]=o.useState(-1),[d,c]=o.useState(-1),[p,u]=o.useState(""),[m,g]=o.useState(null),[E,f]=o.useState({}),[v,w]=o.useState(null),{showSnackbar:_}=Pt(),T=p===La&&m,S=o.useMemo(()=>r.map($=>{let{id:J}=$;return J}),[r]);o.useEffect(()=>{if(E.id&&!v){const $=S.indexOf(E.id),J=$>0?-1:1,ve=E.isDeleted?J:0,D=S[$+ve];D&&w(D)}},[E,v,S]),o.useEffect(()=>{p||g(null)},[p,g]),o.useEffect(()=>{p&&(f({}),w(null))},[p]);const C=o.useCallback(($,J)=>{c(-1),he("rename_story"),a.updateStory({...$,title:{raw:J}})},[a]),x=o.useCallback(()=>{he("delete_story"),a.trashStory(m),f({id:m.id,isDeleted:!0}),u("")},[a,m]),O=o.useCallback(()=>{s(-1),he("open_in_editor")},[]),H=o.useCallback($=>{s(-1),c($.id)},[]),L=o.useCallback($=>{s(-1),he("duplicate_story"),a.duplicateStory($),f({id:$.id})},[a]),I=o.useCallback($=>{s(-1),g($),u(La)},[]),R=o.useCallback($=>{s(-1),window.navigator.clipboard.writeText($.link),_({message:A(h("%s has been copied to your clipboard.","web-stories"),Ce($.title)),dismissible:!0}),f({id:$.id})},[_]),U=lo.map($=>{switch($==null?void 0:$.value){case Y.COPY_STORY_LINK:$.action=R;break;case Y.DELETE:$.action=I;break;case Y.DUPLICATE:$.action=L;break;case Y.OPEN_STORY_LINK:$.action=O;break;case Y.RENAME:$.action=H;break;default:$.action=()=>s(-1)}return $}),F=o.useMemo(()=>({handleMenuToggle:s,contextMenuId:i,menuItems:U}),[i,U,s]),G=o.useMemo(()=>({id:d,handleOnRenameStory:C,handleCancelRename:()=>c(-1)}),[C,c,d]),P=o.useMemo(()=>l.style===ee.LIST?n.createElement(Ml,{hideStoryList:(e==null?void 0:e.isLoading)&&!(e!=null&&e.showStoriesWhileLoading.current),pageSize:l.pageSize,renameStory:G,stories:r,storyMenu:F}):!(e!=null&&e.isLoading)||e!=null&&e.isLoading&&(e!=null&&e.showStoriesWhileLoading.current)?n.createElement(Hl,{isLoading:e==null?void 0:e.isLoading,pageSize:l.pageSize,renameStory:G,storyMenu:F,stories:r,returnStoryFocusId:{value:v,set:w}}):null,[e,G,v,r,F,l]);return n.createElement(n.Fragment,null,P,(e==null?void 0:e.isLoading)&&!(e!=null&&e.showStoriesWhileLoading.current)&&n.createElement(dr,null,n.createElement(ja,null)),T&&n.createElement(sl,{isOpen:!0,contentLabel:h("Dialog to confirm deleting a story","web-stories"),title:h("Delete Story","web-stories"),onClose:()=>{f({id:m.id}),u("")},secondaryText:h("Cancel","web-stories"),secondaryRest:{"aria-label":A(h('Cancel deleting story "%s"',"web-stories"),Ce(m.title))},primaryText:h("Delete","web-stories"),onPrimary:x,primaryRest:{"aria-label":A(h('Confirm deleting story "%s"',"web-stories"),Ce(m.title))}},n.createElement(q.Paragraph,{size:N.Small},A(h('Are you sure you want to delete "%s"?',"web-stories"),Ce(m.title)))))}function xr(t){let{filtersObject:e}=t;const{search:a}=e;return a?A(h(`Sorry, we couldn't find any results matching "%s"`,"web-stories"),a):Object.keys(e).length!==0?h("Sorry, we couldn't find any results","web-stories"):h("Start telling Stories.","web-stories")}function Wl(t){let{allPagesFetched:e,canViewDefaultTemplates:a,filtersObject:r={},loading:l,page:i,stories:s,storyActions:d,view:c}=t;return n.createElement(ye.Scrollable,null,n.createElement(lt,null,s.length>0?n.createElement(n.Fragment,null,n.createElement(Yl,{storyActions:d,stories:s,view:c,loading:l}),n.createElement(Ua,{canLoadMore:!e,isLoading:l==null?void 0:l.isLoading,allDataLoadedMessage:h("No more stories","web-stories"),allDataLoadedAriaMessage:h("All stories are loaded","web-stories"),loadingAriaMessage:h("Loading more stories","web-stories"),onLoadMore:i.requestNextPage})):!(l!=null&&l.isLoading)&&n.createElement(wr,null,n.createElement(Ne,{size:N.Small,as:"h3"},n.createElement(xr,{filtersObject:r})),Object.keys(r).length===0&&a&&n.createElement(kt,{type:ne.Primary,size:ce.Medium,href:Lt(Z.TEMPLATES_GALLERY)},h("Explore Templates","web-stories")))))}xr.propTypes={filtersObject:b.object};function Ar(t){let{isActiveSearch:e,currentFilter:a,totalResults:r,view:l}=t;return o.useMemo(()=>{var c;const i=r??0,s=((c=vo[l])==null?void 0:c[a])||"",d=typeof s=="function"?s(i):s;return e?A(ue("%s result","%s results",i,"web-stories"),A("<strong>%s</strong>",i)):d},[e,r,l,a])}function ql(t){return t.reduce((e,a)=>!a.title||(a==null?void 0:a.title.trim().length)<=0?e:[...e,{label:a.title,value:a.title}],[])}const Kl=y(kn).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],t=>{let{theme:e,isActive:a}=t;return a?e.colors.gray[20]:e.colors.fg.tertiary});function Xl(t){let{initialPageReady:e,totalStoriesByStatus:a,currentStatus:r}=t;const{updateFilter:l,registerFilters:i}=Fe(p=>{let{actions:{updateFilter:u,registerFilters:m}}=p;return{updateFilter:u,registerFilters:m}}),s=o.useCallback(p=>{l("status",{filterId:p})},[l]);o.useEffect(()=>{i([{key:"status",filterId:Tt.filters.status}])},[i]);const d=o.useMemo(()=>Object.keys(a).reduce((p,u)=>p+a[u],0),[a]),c=o.useMemo(()=>mo.filter(p=>{let{status:u}=p;return u in a&&a[u]>0||u===r}).map(p=>{let{label:u,status:m,value:g}=p;const E=a[m],f=!E;return{ariaLabel:A(h("Filter stories by %s","web-stories"),u),disabled:f,isActive:r===g,value:g,label:u,count:E}}),[a,r]);return!e||!d||a&&Object.keys(a).length===0?null:n.createElement(n.Fragment,null,c.map(p=>{let{ariaLabel:u,disabled:m,isActive:g,value:E,label:f,count:v}=p;return n.createElement(Kl,{key:E,onClick:()=>s(E),isActive:g,disabled:m,"aria-label":u},f,n.createElement("span",null,v))}))}var Zl=o.memo(function(e){let{initialPageReady:a,stories:r,totalStoriesByStatus:l,view:i}=e;const s=o.useMemo(()=>ql(r),[r]),{filters:d,sortObject:c,updateFilter:p,updateSort:u,registerFilters:m}=Fe(S=>{let{state:{filters:C,sortObject:x},actions:{updateFilter:O,updateSort:H,registerFilters:L}}=S;return{filters:C,updateFilter:O,sortObject:x,updateSort:H,registerFilters:L}}),[g,E,f]=o.useMemo(()=>{const S=d.find(x=>{let{key:O}=x;return O==="status"}),C=d.find(x=>{let{key:O}=x;return O==="search"});return[d.filter(x=>{let{key:O}=x;return!["status","search"].includes(O)}),S==null?void 0:S.filterId,C==null?void 0:C.filterId]},[d]),v=o.useMemo(()=>((E==null?void 0:E.split(","))||[]).reduce((S,C)=>S+(l[C]||0),0),[E,l]),w=Ar({currentFilter:E,isActiveSearch:!!f,totalResults:v,view:Qe.DASHBOARD}),_=Ee(async S=>{await he("search",{search_type:"dashboard",search_term:S}),p("search",{filterId:S})},Wa);o.useEffect(()=>{m([{key:"search"}])},[m]);const T=o.useCallback(()=>p("search",{filterId:null}),[p]);return n.createElement(n.Fragment,null,n.createElement(zt,{heading:h("Dashboard","web-stories"),searchPlaceholder:h("Search Stories","web-stories"),searchOptions:s,handleSearchChange:_,showSearch:a,searchValue:f,onClear:T},n.createElement(Xl,{initialPageReady:a,totalStoriesByStatus:l,currentStatus:E})),n.createElement(Er,{showGridToggle:!0,filters:g,showSortDropdown:!0,resultsLabel:w,layoutStyle:i.style,handleLayoutSelect:i.toggleStyle,pageSortOptions:co,pageSortDefaultOption:M.LAST_MODIFIED,handleSortChange:u,currentSort:c}))});function Jl(){const{duplicateStory:t,fetchStories:e,trashStory:a,updateStory:r,allPagesFetched:l,isLoading:i,stories:s,storiesOrderById:d,totalPages:c,totalStoriesByStatus:p}=Ae(C=>{let{actions:{storyApi:{duplicateStory:x,fetchStories:O,trashStory:H,updateStory:L}},state:{stories:{allPagesFetched:I,isLoading:R,stories:U,storiesOrderById:F,totalPages:G,totalStoriesByStatus:P}}}=C;return{duplicateStory:x,fetchStories:O,trashStory:H,updateStory:L,allPagesFetched:I,isLoading:R,stories:U,storiesOrderById:F,totalPages:G,totalStoriesByStatus:P}}),{filtersObject:u,sortObject:m}=Fe(C=>{let{state:{filtersObject:x,sortObject:O}}=C;return{filtersObject:x,sortObject:O}}),{apiCallbacks:g,canViewDefaultTemplates:E}=Q(),f=o.useRef(!1);o.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]);const{page:v,view:w,showStoriesWhileLoading:_,initialPageReady:T}=el({filtersObject:u,sortObject:m,isLoading:i,totalPages:c});o.useEffect(()=>{e({page:v.value,filters:u,sort:m})},[e,u,m,v.value,g]);const S=o.useMemo(()=>d.map(C=>s[C]),[s,d]);return n.createElement(ye.Provider,null,n.createElement(Zl,{initialPageReady:T,stories:S,totalStoriesByStatus:p,view:w}),n.createElement(Wl,{allPagesFetched:l,canViewDefaultTemplates:E,filtersObject:u,loading:{isLoading:i,showStoriesWhileLoading:_},page:v,stories:S,storyActions:{duplicateStory:t,trashStory:a,updateStory:r},view:w}),n.createElement(ye.Fixed,null,n.createElement(hr,null)))}function Ql(){return n.createElement(cl,null,n.createElement(Jl,null))}const fe={VERTICAL:"VERTICAL",COLOR:"COLOR",TAG:"TAG",TITLE:"TITLE"};function ei(t){const e=Object.values(t),a=e.flatMap(s=>s.colors).map(s=>({label:s.family,value:s.family,type:fe.COLOR})),r=e.flatMap(s=>s.tags).map(s=>({label:s,value:s,type:fe.TAG})),l=e.map(s=>s.vertical).map(s=>({label:s,value:s,type:fe.VERTICAL})),i=e.map(s=>({label:s.title,value:s.title,type:fe.TITLE}));return[...ke(r,"label"),...ke(a,"label"),...ke(l,"label"),...ke(i,"label")]}function ti(t){return e=>!t||t.some(a=>{switch(a==null?void 0:a.type){case fe.TAG:return e.tags.map(r=>r.toLowerCase()).includes(a.value.toLowerCase());case fe.COLOR:return e.colors.map(r=>r.label.toLowerCase()).includes(a.value.toLowerCase());case fe.VERTICAL:return e.vertical.toLowerCase().includes(a.value.toLowerCase());case fe.TITLE:return e.title.toLowerCase().includes(a.value.toLowerCase());default:return!0}})}const Rr=we({state:{},actions:{}}),{filters:ai,sort:ri}=Ke;function ni(t){let{children:e}=t;const[a,r]=o.useReducer(br,{filters:[],filtersObject:ai,sortObject:ri}),l=o.useCallback((c,p)=>{r({type:Ut,payload:{key:c,value:p}})},[]),i=o.useCallback(c=>{r({type:Gt,payload:{type:"template",values:c}})},[]),s=o.useCallback(c=>{r({type:Vt,payload:{value:c}})},[]),d=o.useMemo(()=>({state:a,actions:{updateSort:i,updateFilter:l,registerFilters:s}}),[a,i,l,s]);return n.createElement(Rr.Provider,{value:d},e)}function $r(){return Le(Rr,arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe)}const oi=y.div.withConfig({displayName:"components__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],rt,nt,rt,nt,t=>{let{$isSelected:e}=t;return e?1:0}),si=y.div.withConfig({displayName:"components__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),li=y(Cr).attrs({as:"picture"}).withConfig({displayName:"components__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],t=>{let{theme:e}=t;return e.borders.radius.medium}),kr="focus_template",ii=y(ie).attrs({type:ne.Tertiary,size:ce.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],t=>{let{theme:e}=t;return e.colors.standard.white}),Mr=o.forwardRef((t,e)=>{let{onCreateStory:a,onFocus:r,height:l,id:i,isActive:s,posterSrc:d,slug:c,title:p,status:u,onSeeDetailsClick:m=Fa}=t;const g=s?0:-1,E=A(h("First page of %s template","web-stories"),p);return n.createElement(Bt,{ref:e,id:`template-grid-item-${i}`,className:"templateGridItem","data-testid":`template-grid-item-${i}`,$posterHeight:l,onFocus:r},n.createElement(_r,null,n.createElement(oi,{$isSelected:s},n.createElement(li,null,n.createElement("source",{srcSet:d==null?void 0:d.webp,type:"image/webp"}),n.createElement("source",{srcSet:d==null?void 0:d.png,type:"image/png"}),n.createElement("img",{src:d==null?void 0:d.png,alt:E,decoding:"async",width:tt,height:et})),n.createElement(rt,null),n.createElement(nt,{"data-testid":"card-action-container","data-template-slug":c},n.createElement(si,null,n.createElement(ii,{ariaLabel:A(h("Go to detail view of %s","web-stories"),p),onClick:()=>m(i,p),className:kr,tabIndex:g},yo[u]),a&&n.createElement(ie,{size:ce.Small,type:ne.Primary,onClick:a,tabIndex:g,ariaLabel:A(h("Create new story from %s","web-stories"),p)},h("Use template","web-stories")))))))});Mr.displayName="TemplateGridItem";function ci(t){let{pageSize:e,templates:a,templateActions:r}=t;const{isRTL:l,apiCallbacks:i}=Q(),s=o.useRef(),d=o.useRef(),c=o.useRef({}),[p,u]=o.useState(null),{handleDetailsToggle:m,createStoryFromTemplate:g}=r||{},E=!!(i!=null&&i.createStoryFromTemplate);Dt({containerRef:s,gridRef:d,itemRefs:c,isRTL:l,currentItemId:p,items:a}),o.useEffect(()=>{var v,w,_;p&&((_=(w=(v=c.current)==null?void 0:v[p])==null?void 0:w.querySelector(`.${kr}`))==null||_.focus())},[p]),Pe(s,()=>u(null),[]);const f=o.useMemo(()=>a.map(v=>{let{id:w,slug:_,status:T,title:S,postersByPage:C}=v;const x=p===w,O=C==null?void 0:C[0];return n.createElement(Mr,{onCreateStory:E?()=>g(w):vr,onFocus:()=>{u(w)},onSeeDetailsClick:m,height:e.height,id:w,isActive:x,key:_,posterSrc:O,ref:H=>{c.current[w]=H},slug:_,status:T,title:S})}),[a,p,E,m,e.height,g]);return n.createElement("div",{ref:s},n.createElement(nr,{pageSize:e,role:"list",ref:d,ariaLabel:h("Viewing available templates","web-stories")},f))}function di(t){let{allPagesFetched:e,isLoading:a,page:r,templates:l,view:i,totalTemplates:s,search:d,templateActions:c}=t;const{newStoryURL:p}=Q(),u=o.useMemo(()=>a?n.createElement(dr,null,n.createElement(ja,null)):s>0?n.createElement(n.Fragment,null,n.createElement(ci,{templates:l,pageSize:i.pageSize,templateActions:c}),n.createElement(Ua,{canLoadMore:!e,isLoading:a,allDataLoadedMessage:h("No more templates","web-stories"),allDataLoadedAriaMessage:h("All templates are loaded","web-stories"),loadingAriaMessage:h("Loading more templates","web-stories"),onLoadMore:r.requestNextPage})):n.createElement(wr,null,n.createElement(Ne,{size:N.Small,as:"h3"},d?A(h(`Sorry, we couldn't find any results matching "%s"`,"web-stories"),d):h("No templates currently available.","web-stories")),!d&&n.createElement(kt,{type:ne.Primary,size:ce.Medium,href:p},h("Create New Story","web-stories"))),[e,a,p,r.requestNextPage,c,d,l,s,i.pageSize]);return n.createElement(ye.Scrollable,null,n.createElement(lt,null,u))}function ui(t){let{isLoading:e,totalTemplates:a,view:r,searchOptions:l=[]}=t;const i=Mn("enableInProgressTemplateActions"),{filters:s,sortObject:d,updateFilter:c,updateSort:p,registerFilters:u}=$r(w=>{let{state:{filters:_,sortObject:T},actions:{updateFilter:S,updateSort:C,registerFilters:x}}=w;return{filters:_,sortObject:T,updateFilter:S,updateSort:C,registerFilters:x}}),[m,g]=o.useMemo(()=>{const w=s.find(T=>{let{key:S}=T;return S==="status"}),_=s.find(T=>{let{key:S}=T;return S==="search"});return[w==null?void 0:w.filterId,_==null?void 0:_.filterId]},[s]),E=Ee(w=>{c("search",{filterId:w})},Wa);o.useEffect(()=>{u([{key:"search"}]),u([{key:"status",filterId:Ke.filters.status}])},[u]);const f=o.useCallback(()=>c("search",{filterId:null}),[c]),v=Ar({totalResults:a,currentFilter:m,view:Qe.TEMPLATES_GALLERY});return n.createElement(n.Fragment,null,n.createElement(zt,{heading:h("Explore Templates","web-stories"),searchPlaceholder:h("Search Templates","web-stories"),showSearch:!0,searchOptions:l,searchValue:g,handleSearchChange:E,onClear:f}),n.createElement(Er,{resultsLabel:v,layoutStyle:r.style,handleLayoutSelect:r.toggleStyle,isLoading:e,pageSortOptions:bo,pageSortDefaultOption:Ie.POPULAR,currentSort:d,handleSortChange:p,showSortDropdown:i,sortDropdownAriaLabel:h("Choose sort option for display","web-stories")}))}const mi=y.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),pi=y(ie).attrs({type:ne.Primary,size:ce.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);function hi(t){let{templateTitle:e,templateId:a,templateActions:r,canCreateStory:l}=t;const{createStoryFromTemplate:i,handleDetailsToggle:s}=r||{};return n.createElement(mi,null,n.createElement(ie,{type:ne.Tertiary,variant:Ye.Square,size:ce.Small,"aria-label":h("Close","web-stories"),onClick:s},n.createElement(Dn,null)),l&&n.createElement(pi,{onClick:()=>i(a),"aria-label":A(h("Use %s template to create new story","web-stories"),e)},h("Use template","web-stories")))}const gi=y.section.withConfig({displayName:"components__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),fi=y.div.withConfig({displayName:"components__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),bi=y.div.withConfig({displayName:"components__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),yi=y.section.attrs({"aria-label":h("Template Details","web-stories")}).withConfig({displayName:"components__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),Ei=y.div.withConfig({displayName:"components__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]);y.section.attrs({"aria-label":h("Related Templates","web-stories")}).withConfig({displayName:"components__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]);const wi=y(gi).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"]),vi=y(q.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],t=>{let{theme:e}=t;return e.colors.fg.tertiary}),Si=y(q.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),Oa=y.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,t=>{let{alignLeft:e}=t;return e?`
          left: 0;
          transform: translate(-187.5%, -50%);
        `:`
          right: 0;
          transform: translate(187.5%, -50%);
        `}),Ti=y(Pn).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],t=>{let{theme:e}=t;return e.colors.fg.primary}),xa=y.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);function _i(t){let{activeTemplateIndex:e,isRTL:a,filteredTemplatesLength:r,switchToTemplateByOffset:l,template:i}=t;const{postersByPage:s,title:d,description:c,tags:p,colors:u}=i||{},[m,g]=o.useState([]);o.useEffect(()=>{s&&g(Object.values(s).map((w,_)=>({id:_,...w})))},[s]);const{NextButton:E,PrevButton:f}=o.useMemo(()=>{const w=a?e-1:e+1,_=a?e+1:e-1,T=a?!r||e===r-1:!r||e===0,S=a?!r||e===0:!r||e===r-1,C=n.createElement(ie,{type:ne.Tertiary,size:ce.Small,variant:Ye.Square,"aria-label":h("View previous template","web-stories"),onClick:()=>{l(_),g([])},disabled:T},n.createElement(Nn,{height:32,width:32})),x=n.createElement(ie,{type:ne.Tertiary,size:ce.Small,variant:Ye.Square,"aria-label":h("View next template","web-stories"),onClick:()=>{l(w),g([])},disabled:S},n.createElement(Fn,{height:32,width:32}));return a?{NextButton:C,PrevButton:x}:{NextButton:x,PrevButton:C}},[r,e,a,l]),v=i?A(h("By %s","web-stories"),i.createdBy):null;return n.createElement(wi,null,n.createElement(fi,null,n.createElement(Oa,{alignLeft:!0},f),n.createElement(bi,null,n.createElement(ol,{galleryPosters:m,isRTL:a,galleryLabel:h("Template details by page","web-stories")}),n.createElement(Ei,null,n.createElement(yi,null,n.createElement(Va,{size:N.Small,as:"h3","data-testid":"template-details-title"},d),n.createElement(vi,{size:N.Medium},v),n.createElement(Si,{size:N.Medium},c),n.createElement(xa,{role:"list","aria-label":h("Template tags","web-stories")},p.map(w=>n.createElement(Ti,{key:w,disabled:!0},w))),n.createElement(xa,null,n.createElement(ss,{colors:u,size:32,"aria-label":h("Template colors","web-stories")}))))),n.createElement(Oa,null,E)))}function Ci(t){let{activeTemplateIndex:e,activeTemplate:a,filteredTemplatesLength:r,isDetailsViewOpen:l,templateActions:i}=t;const{isRTL:s,apiCallbacks:d}=Q(),c=!!(d!=null&&d.createStoryFromTemplate),{handleDetailsToggle:p,switchToTemplateByOffset:u}=i||{};return n.createElement(Bn,{isOpen:l,onClose:p,contentLabel:A(h("Template Details for %s","web-stories"),a==null?void 0:a.title),overlayStyles:{backgroundColor:`${We.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${We.colors.standard.white}`}},n.createElement(hi,{templateTitle:a==null?void 0:a.title,templateId:a==null?void 0:a.id,templateActions:i,canCreateStory:c}),n.createElement(_i,{activeTemplateIndex:e,isRTL:s,filteredTemplatesLength:r,switchToTemplateByOffset:u,template:a}))}function Ii(){const t=Aa(),[e,a]=o.useState(!1),[r,l]=o.useState(null),[i,s]=o.useState(0),{templateIdParam:d,replace:c}=De(D=>{let{actions:j,state:W}=D;return{templateIdParam:W.queryParams.id,replace:j.replace}}),p=o.useRef(d),{allPagesFetched:u,isLoading:m,templates:g,templatesOrderById:E,totalPages:f,totalTemplates:v,createStoryFromTemplate:w,fetchExternalTemplates:_}=Ae(D=>{let{state:{templates:{allPagesFetched:j,isLoading:W,templates:ae,templatesOrderById:it,totalPages:ct,totalTemplates:dt}},actions:{storyApi:{createStoryFromTemplate:Be},templateApi:{fetchExternalTemplates:Se}}}=D;return{allPagesFetched:j,isLoading:W,templates:ae,templatesOrderById:it,totalPages:ct,totalTemplates:dt,createStoryFromTemplate:Be,fetchExternalTemplates:Se}}),{filters:T,sortObject:S,filtersObject:C}=$r(D=>{let{state:{filters:j,sortObject:W,filtersObject:ae}}=D;return{filters:j,sortObject:W,filtersObject:ae}}),{page:x,view:O}=tl({filtersObject:C,sortObject:S,totalPages:f}),[H]=o.useMemo(()=>{const D=T.find(j=>{let{key:W}=j;return W==="search"});return[D==null?void 0:D.filterId]},[T]),L=o.useMemo(()=>ei(g),[g]),I=o.useMemo(()=>H?L.filter(D=>D.label.toLowerCase().includes(H.toLowerCase())):L,[L,H]),R=o.useMemo(()=>E.map(D=>g[D]).filter(ti(I)),[E,g,I]),U=o.useMemo(()=>v!==R.length?R.length:v,[R,v]),F=o.useMemo(()=>ke(I,"label"),[I]),G=o.useCallback(D=>{const j=g[D];he("use_template",{name:j.title,template_id:j.id}),w(j)},[w,g]),P=o.useCallback(D=>{const j=R.find(W=>W.id===D);l(j),s(R.findIndex(W=>W.id===D)),p.current&&(p.current=void 0),c(`?id=${j.id}&isLocal=${j.isLocal}`)},[c,R]),$=o.useCallback((D,j)=>{a(W=>{const ae=!W;return j&&Ga(j),ae&&D&&P(D),ae||(c(""),t(h("Exit detail templates view","web-stories"))),ae})},[c,t,P]),J=o.useCallback(D=>{const j=R[D];l(j),s(D),c(`?id=${j.id}&isLocal=${j.isLocal}`),t(A(h("Viewing %s","web-stories"),j.title))},[R,c,t]),ve=o.useMemo(()=>({createStoryFromTemplate:G,handleDetailsToggle:$,switchToTemplateByOffset:J}),[G,$,J]);return o.useEffect(()=>{_()},[_]),o.useEffect(()=>{if(p.current&&R.length){if(!R.some(D=>D.id===parseInt(p.current)))return void c("");a(!0),P(parseInt(p.current))}},[R,c,P]),n.createElement(ye.Provider,null,n.createElement(ui,{isLoading:m&&!v,totalTemplates:U,searchOptions:F,view:O}),n.createElement(di,{isLoading:m,allPagesFetched:u,page:x,templates:R,totalTemplates:U,search:H,view:O,templateActions:ve}),n.createElement(ye.Fixed,null,n.createElement(hr,null)),n.createElement(Ci,{activeTemplate:r,activeTemplateIndex:i,isDetailsViewOpen:e,templateActions:ve,filteredTemplatesLength:R.length}))}function Li(){return n.createElement(ni,null,n.createElement(Ii,null))}function Oi(){const{storyError:t,templateError:e}=Ae(l=>{let{state:{stories:{error:i},templates:{error:s}}}=l;return{storyError:i,templateError:s}}),{showSnackbar:a}=Pt(),r=Ee(l=>a({message:l,dismissible:!0}),200);o.useEffect(()=>{t!=null&&t.id&&r(t.message)},[t,r]),o.useEffect(()=>{e!=null&&e.id&&r(e.message)},[e,r])}function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},At.apply(this,arguments)}const xi=t=>{let{additionalRoutes:e}=t;const{currentPath:a,templateId:r,availableRoutes:l}=De(S=>{let{state:C}=S;return{...C,templateId:C.queryParams.id}}),{push:i,setAvailableRoutes:s}=De(S=>{let{actions:C}=S;return C}),{canViewDefaultTemplates:d,leftRailSecondaryNavigation:c=[],documentTitleSuffix:p=h("Web Stories","web-stories")}=Q(),{addInitialFetchListener:u}=Ae(S=>{var O;let{actions:{storyApi:{addInitialFetchListener:C}},state:{templates:{templates:x}}}=S;return{currentTemplate:r!==void 0?(O=x[r])==null?void 0:O.title:void 0,addInitialFetchListener:C}}),m=o.useRef(a===Z.DASHBOARD),[g,E]=o.useState(!m.current);o.useEffect(()=>u==null?void 0:u(S=>{(S==null?void 0:S.all)<=0&&m.current&&d&&(i(Z.TEMPLATES_GALLERY),m.current=!1),E(!0)}),[u,i,a,d]),o.useEffect(()=>{if(l.length>0)return;const S=e?e.map(C=>{let{path:x}=C;return x}):[];s([...Object.values(Z),...S])},[e,l.length,s]),o.useEffect(()=>{if(!g)return;const S=c.find(x=>x.value===a),C=Je[a]||(S==null?void 0:S.label)||Je.DEFAULT;document.title=A(h("%1$s ‹ %2$s","web-stories"),C,p),Ga(C)},[a,g,c,p]),Oi();const{clearSnackbar:f,removeSnack:v,placement:w,currentSnacks:_}=Pt(),T=jn(a);return o.useEffect(()=>{a!==T&&f()},[f,a,T]),n.createElement(n.Fragment,null,n.createElement(hs,null,n.createElement(Ls,null),n.createElement(gs,null,l.length>0&&n.createElement(n.Fragment,null,n.createElement(pt,{exact:!0,isDefault:!0,path:Z.DASHBOARD,component:n.createElement(Ql,null)}),d&&n.createElement(pt,{path:Z.TEMPLATES_GALLERY,component:n.createElement(Li,null)}),e&&e.map(S=>n.createElement(pt,At({key:S.path},S)))))),n.createElement(Un,{notifications:_,onRemove:v,placement:w,max:1}))};function Ai(){return me.jsx(ye.Provider,{children:me.jsxs("div",{children:[me.jsx(zt,{heading:"Settings"}),me.jsx(ye.Scrollable,{children:me.jsx("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#EEE"},children:"Settings"})})]})})}const Ri=async()=>{const t=await Gn(),e=[];return{stories:t.reduce((r,l)=>{var i;return console.log("acc, story",r,l),e.push(l.storyId),r[l.storyId]={author:l.author,capabilities:{hasEditAction:!0,hasDeleteAction:!0},id:l.storyId,created:l==null?void 0:l.created,createdGMT:l==null?void 0:l.createdGMT,editStoryLink:`/webstories/editor.html?id=${l.storyId}`,featuredMediaUrl:l==null?void 0:l.featuredMediaUrl,modified:l==null?void 0:l.modified,modifiedGMT:l==null?void 0:l.modifiedGMT,status:l.status?l.status:"publish",title:(i=l==null?void 0:l.title)==null?void 0:i.raw},r},{}),fetchedStoryIds:e,totalPages:e.length===0?0:1,totalStoriesByStatus:{all:e.length,publish:e.length}}},$i=async t=>{await Vn(t)},ki=async({id:t,author:e,title:a})=>{var l;if(!t)return{};const r=await zn(t);return e&&(r.author=e),a&&(r.title=a),await Hn(r),{author:r.author,capabilities:{hasEditAction:!0,hasDeleteAction:!0},id:r.storyId,created:r==null?void 0:r.created,createdGMT:r==null?void 0:r.createdGMT,editStoryLink:`/webstories/editor.html?id=${r.storyId}`,featuredMediaUrl:r==null?void 0:r.featuredMediaUrl,modified:r==null?void 0:r.modified,modifiedGMT:r==null?void 0:r.modifiedGMT,status:r.status?r.status:"publish",title:(l=r==null?void 0:r.title)==null?void 0:l.raw}},Mi=Mt`
  body.web-story_page_stories-dashboard #wpbody {
    ${Yn};
  }
`,Pi=()=>{const t={newStoryURL:"/webstories/editor.html",apiCallbacks:{fetchStories:Ri,updateStory:ki,trashStory:$i}};return me.jsxs(rl,{config:t,children:[me.jsx(Mi,{}),me.jsx(xi,{additionalRoutes:[{path:"/settings",component:me.jsx(Ai,{})}]})]})};export{Pi as C};
